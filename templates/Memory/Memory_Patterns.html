<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memory Patterns - Data Structures & Algorithm Design</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600;700&display=swap');

        :root {
            --bg-primary: #0a0e27;
            --bg-secondary: #141834;
            --bg-tertiary: #1a1f3a;
            --bg-card: #1e2540;
            --accent-primary: #00d9ff;
            --accent-secondary: #7c3aed;
            --accent-success: #10b981;
            --accent-warning: #f59e0b;
            --accent-danger: #ef4444;
            --text-primary: #e2e8f0;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            --border-color: #2d3551;
            --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.3);
            --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.4);
            --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.5);
            --shadow-glow: 0 0 20px rgba(0, 217, 255, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'JetBrains Mono', monospace;
            background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
            color: var(--text-primary);
            line-height: 1.7;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Animated Background */
        .animated-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            opacity: 0.3;
        }

        .floating-shape {
            position: absolute;
            border-radius: 50%;
            filter: blur(60px);
            animation: float 20s infinite ease-in-out;
        }

        .shape-1 {
            width: 400px;
            height: 400px;
            background: var(--accent-primary);
            top: 10%;
            left: 10%;
            animation-delay: 0s;
        }

        .shape-2 {
            width: 300px;
            height: 300px;
            background: var(--accent-secondary);
            top: 60%;
            right: 10%;
            animation-delay: 5s;
        }

        .shape-3 {
            width: 250px;
            height: 250px;
            background: var(--accent-success);
            bottom: 10%;
            left: 50%;
            animation-delay: 10s;
        }

        @keyframes float {
            0%, 100% { transform: translate(0, 0) scale(1); }
            25% { transform: translate(50px, -50px) scale(1.1); }
            50% { transform: translate(-30px, 30px) scale(0.9); }
            75% { transform: translate(40px, 50px) scale(1.05); }
        }

        /* Container */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 40px 20px;
            position: relative;
            z-index: 1;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 60px;
            animation: fadeInDown 0.8s ease;
        }

        .header h1 {
            font-size: 3.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--accent-primary) 0%, var(--accent-secondary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 20px;
            text-shadow: 0 0 30px rgba(0, 217, 255, 0.5);
        }

        .header .subtitle {
            font-size: 1.3rem;
            color: var(--text-secondary);
            margin-bottom: 30px;
        }

        /* Progress Tracker */
        .progress-tracker {
            background: var(--bg-card);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 40px;
            border: 1px solid var(--border-color);
            box-shadow: var(--shadow-md);
            animation: fadeInUp 0.8s ease;
        }

        .progress-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
        }

        .progress-icon {
            font-size: 2rem;
        }

        .progress-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--accent-primary);
        }

        .checkpoints {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }

        .checkpoint {
            background: var(--bg-tertiary);
            padding: 20px;
            border-radius: 12px;
            border-left: 4px solid var(--accent-primary);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .checkpoint:hover {
            transform: translateX(10px);
            box-shadow: var(--shadow-glow);
            border-left-color: var(--accent-secondary);
        }

        .checkpoint-time {
            color: var(--accent-primary);
            font-weight: 600;
            font-size: 0.9rem;
            margin-bottom: 8px;
        }

        .checkpoint-title {
            color: var(--text-primary);
            font-size: 1rem;
            line-height: 1.5;
        }

        /* Section */
        .section {
            background: var(--bg-card);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 40px;
            border: 1px solid var(--border-color);
            box-shadow: var(--shadow-md);
            animation: fadeInUp 0.8s ease;
            opacity: 0;
            animation-fill-mode: forwards;
        }

        .section:nth-child(1) { animation-delay: 0.1s; }
        .section:nth-child(2) { animation-delay: 0.2s; }
        .section:nth-child(3) { animation-delay: 0.3s; }
        .section:nth-child(4) { animation-delay: 0.4s; }

        .section-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid var(--border-color);
        }

        .section-icon {
            font-size: 2.5rem;
        }

        .section-title {
            font-size: 2rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--accent-primary) 0%, var(--accent-secondary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .section-subtitle {
            font-size: 1.3rem;
            color: var(--text-secondary);
            margin-bottom: 30px;
            font-weight: 500;
        }

        /* Decision Framework */
        .decision-framework {
            display: grid;
            gap: 25px;
            margin-top: 30px;
        }

        .question-card {
            background: var(--bg-tertiary);
            padding: 25px;
            border-radius: 15px;
            border: 1px solid var(--border-color);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .question-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 5px;
            height: 100%;
            background: linear-gradient(180deg, var(--accent-primary), var(--accent-secondary));
            transform: scaleY(0);
            transition: transform 0.3s ease;
        }

        .question-card:hover::before {
            transform: scaleY(1);
        }

        .question-card:hover {
            transform: translateX(10px);
            box-shadow: var(--shadow-lg);
        }

        .question-number {
            display: inline-block;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            color: white;
            padding: 8px 16px;
            border-radius: 8px;
            font-weight: 700;
            font-size: 0.9rem;
            margin-bottom: 15px;
        }

        .question-title {
            font-size: 1.3rem;
            color: var(--text-primary);
            font-weight: 600;
            margin-bottom: 20px;
        }

        .options-list {
            list-style: none;
            padding-left: 0;
        }

        .options-list li {
            padding: 12px 20px;
            margin-bottom: 10px;
            background: var(--bg-secondary);
            border-radius: 8px;
            border-left: 3px solid var(--accent-success);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .options-list li:hover {
            background: var(--bg-primary);
            transform: translateX(5px);
            box-shadow: 0 4px 12px rgba(0, 217, 255, 0.2);
        }

        .options-list li strong {
            color: var(--accent-primary);
            margin-right: 8px;
        }

        /* Code Block */
        .code-block {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 25px;
            margin: 25px 0;
            border: 1px solid var(--border-color);
            position: relative;
            overflow: hidden;
        }

        .code-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border-color);
        }

        .code-lang {
            color: var(--accent-primary);
            font-weight: 600;
            font-size: 0.9rem;
        }

        .copy-btn {
            background: var(--accent-primary);
            color: var(--bg-primary);
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            font-family: 'JetBrains Mono', monospace;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.85rem;
        }

        .copy-btn:hover {
            background: var(--accent-secondary);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(124, 58, 237, 0.4);
        }

        .code-content {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            line-height: 1.8;
            color: var(--text-primary);
            overflow-x: auto;
        }

        .code-content pre {
            margin: 0;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        /* Syntax Highlighting */
        .keyword { color: #c792ea; }
        .function { color: #82aaff; }
        .string { color: #c3e88d; }
        .comment { color: #697098; font-style: italic; }
        .number { color: #f78c6c; }
        .operator { color: #89ddff; }

        /* Info Box */
        .info-box {
            background: linear-gradient(135deg, rgba(0, 217, 255, 0.1), rgba(124, 58, 237, 0.1));
            border: 1px solid var(--accent-primary);
            border-radius: 12px;
            padding: 25px;
            margin: 25px 0;
            position: relative;
            overflow: hidden;
        }

        .info-box::before {
            content: 'ğŸ’¡';
            font-size: 2rem;
            position: absolute;
            top: 20px;
            right: 20px;
            opacity: 0.3;
        }

        .info-box-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--accent-primary);
            margin-bottom: 15px;
        }

        .info-box-content {
            color: var(--text-secondary);
            line-height: 1.8;
        }

        /* Warning Box */
        .warning-box {
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.1), rgba(245, 158, 11, 0.1));
            border: 1px solid var(--accent-danger);
            border-radius: 12px;
            padding: 25px;
            margin: 25px 0;
        }

        .warning-box::before {
            content: 'âš ï¸';
            font-size: 2rem;
            position: absolute;
            top: 20px;
            right: 20px;
            opacity: 0.3;
        }

        /* Success Box */
        .success-box {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(34, 197, 94, 0.1));
            border: 1px solid var(--accent-success);
            border-radius: 12px;
            padding: 25px;
            margin: 25px 0;
        }

        .success-box::before {
            content: 'âœ“';
            font-size: 2rem;
            position: absolute;
            top: 20px;
            right: 20px;
            opacity: 0.3;
        }

        /* Interactive Toggle */
        .toggle-section {
            margin: 30px 0;
        }

        .toggle-header {
            background: var(--bg-tertiary);
            padding: 20px;
            border-radius: 12px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
            border: 1px solid var(--border-color);
        }

        .toggle-header:hover {
            background: var(--bg-secondary);
            box-shadow: var(--shadow-md);
        }

        .toggle-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .toggle-icon {
            font-size: 1.5rem;
            color: var(--accent-primary);
            transition: transform 0.3s ease;
        }

        .toggle-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease;
        }

        .toggle-content.active {
            max-height: none;
            overflow: visible;
        }

        .toggle-inner {
            padding: 25px;
            background: var(--bg-secondary);
            border-radius: 0 0 12px 12px;
            border: 1px solid var(--border-color);
            border-top: none;
        }

        /* Visual Diagram */
        .visual-diagram {
            background: var(--bg-tertiary);
            border-radius: 12px;
            padding: 30px;
            margin: 30px 0;
            border: 1px solid var(--border-color);
            text-align: center;
        }

        .diagram-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--accent-primary);
            margin-bottom: 20px;
        }

        .diagram-content {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            color: var(--text-secondary);
            white-space: pre;
            overflow-x: auto;
            text-align: left;
        }

        /* Comparison Table */
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 30px 0;
            background: var(--bg-secondary);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: var(--shadow-md);
        }

        .comparison-table thead {
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
        }

        .comparison-table th {
            padding: 20px;
            text-align: left;
            font-weight: 600;
            color: white;
        }

        .comparison-table td {
            padding: 18px 20px;
            border-bottom: 1px solid var(--border-color);
            color: var(--text-secondary);
        }

        .comparison-table tr:hover {
            background: var(--bg-tertiary);
        }

        .checkmark { color: var(--accent-success); }
        .crossmark { color: var(--accent-danger); }

        /* Animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2.5rem;
            }

            .header .subtitle {
                font-size: 1.1rem;
            }

            .section {
                padding: 25px;
            }

            .section-title {
                font-size: 1.5rem;
            }

            .checkpoints {
                grid-template-columns: 1fr;
            }

            .comparison-table {
                font-size: 0.85rem;
            }

            .comparison-table th,
            .comparison-table td {
                padding: 12px;
            }
        }
    </style>
</head>
<body>
    <!-- Animated Background -->
    <div class="animated-bg">
        <div class="floating-shape shape-1"></div>
        <div class="floating-shape shape-2"></div>
        <div class="floating-shape shape-3"></div>
    </div>

    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>ğŸ§  Memory Patterns</h1>
            <p class="subtitle">Master Data Structure Selection & Memory-Aware Algorithm Design</p>
        </div>

        <!-- Progress Tracker -->
        <div class="progress-tracker">
            <div class="progress-header">
                <span class="progress-icon">ğŸ“Š</span>
                <h2 class="progress-title">Day 2, Hour 2 - Learning Roadmap</h2>
            </div>
            <div class="checkpoints">
                <div class="checkpoint" onclick="scrollToSection('data-structures')">
                    <div class="checkpoint-time">[0-15 min]</div>
                    <div class="checkpoint-title">Choosing Data Structures Based on Memory Characteristics</div>
                </div>
                <div class="checkpoint" onclick="scrollToSection('algorithm-patterns')">
                    <div class="checkpoint-time">[15-30 min]</div>
                    <div class="checkpoint-title">Memory-Aware Algorithm Design Patterns</div>
                </div>
                <div class="checkpoint" onclick="scrollToSection('cache-conscious')">
                    <div class="checkpoint-time">[30-45 min]</div>
                    <div class="checkpoint-title">Cache-Conscious Programming Techniques</div>
                </div>
                <div class="checkpoint" onclick="scrollToSection('tradeoffs')">
                    <div class="checkpoint-time">[45-60 min]</div>
                    <div class="checkpoint-title">Memory Tradeoffs & Decision-Making Framework</div>
                </div>
            </div>
        </div>

        <!-- Section 1: Choosing Data Structures -->
        <div class="section" id="data-structures">
            <div class="section-header">
                <span class="section-icon">ğŸ—‚ï¸</span>
                <h2 class="section-title">Choosing Data Structures Based on Memory</h2>
            </div>

            <h3 class="section-subtitle">The Decision Framework - A Step-by-Step Process</h3>

            <p style="color: var(--text-secondary); font-size: 1.1rem; margin-bottom: 30px;">
                When facing any problem, ask these questions in this exact order to make optimal data structure decisions:
            </p>

            <div class="decision-framework">
                <div class="question-card">
                    <span class="question-number">QUESTION 1</span>
                    <h4 class="question-title">How much data am I dealing with?</h4>
                    <ul class="options-list">
                        <li><strong>Small (&lt; 1,000 elements):</strong> Memory doesn't matter much, optimize for simplicity</li>
                        <li><strong>Medium (1,000 - 1,000,000):</strong> Memory layout matters significantly</li>
                        <li><strong>Large (&gt; 1,000,000):</strong> Memory is CRITICAL, cache optimization required</li>
                        <li><strong>Huge (&gt; 100,000,000):</strong> May not fit in RAM, need disk-aware algorithms</li>
                    </ul>
                </div>

                <div class="question-card">
                    <span class="question-number">QUESTION 2</span>
                    <h4 class="question-title">What operations do I need?</h4>
                    <ul class="options-list">
                        <li><strong>Access by index:</strong> Arrays, Dynamic Arrays</li>
                        <li><strong>Search for element:</strong> Hash Tables, Trees</li>
                        <li><strong>Insert/delete at beginning/middle/end:</strong> Linked Lists, Deques</li>
                        <li><strong>Find minimum/maximum:</strong> Heaps, Priority Queues</li>
                        <li><strong>Iterate through all elements:</strong> Arrays, Lists</li>
                    </ul>
                </div>

                <div class="question-card">
                    <span class="question-number">QUESTION 3</span>
                    <h4 class="question-title">What are the access patterns?</h4>
                    <ul class="options-list">
                        <li><strong>Sequential:</strong> One element after another (cache-friendly)</li>
                        <li><strong>Random:</strong> Any element at any time (requires fast lookup)</li>
                        <li><strong>Range queries:</strong> Elements in a specific range</li>
                        <li><strong>Frequency-based:</strong> Some elements accessed more than others</li>
                    </ul>
                </div>

                <div class="question-card">
                    <span class="question-number">QUESTION 4</span>
                    <h4 class="question-title">What are the constraints?</h4>
                    <ul class="options-list">
                        <li><strong>Memory budget:</strong> Maximum memory available</li>
                        <li><strong>Time requirements:</strong> Response time expectations</li>
                        <li><strong>Read-heavy vs write-heavy:</strong> Operation frequency patterns</li>
                    </ul>
                </div>
            </div>

            <div class="info-box">
                <h4 class="info-box-title">Framework Philosophy</h4>
                <div class="info-box-content">
                    This framework helps you systematically evaluate your problem and choose the right data structure. 
                    Each question builds upon the previous one, narrowing down your options until the optimal choice becomes clear.
                    Let's see how to apply this framework with real-world examples.
                </div>
            </div>
        </div>

        <!-- Example 1: Storing User Sessions -->
        <div class="section">
            <div class="section-header">
                <span class="section-icon">ğŸ’¼</span>
                <h2 class="section-title">Example 1: Storing User Sessions</h2>
            </div>

            <div class="info-box" style="border-color: var(--accent-warning);">
                <h4 class="info-box-title">ğŸ¯ Problem Statement</h4>
                <div class="info-box-content">
                    <p style="margin-bottom: 15px;">You're building a web server. Need to store active user sessions with the following requirements:</p>
                    <ul style="list-style: none; padding-left: 20px;">
                        <li style="margin: 8px 0;">âœ“ Add new session when user logs in</li>
                        <li style="margin: 8px 0;">âœ“ Remove expired session when timeout occurs</li>
                        <li style="margin: 8px 0;">âœ“ Look up session by ID (on every request - MOST FREQUENT)</li>
                        <li style="margin: 8px 0;">âœ“ Support 10,000 concurrent users</li>
                    </ul>
                </div>
            </div>

            <h3 class="section-subtitle">ğŸ” Applying the Decision Framework</h3>

            <div class="toggle-section">
                <div class="toggle-header" onclick="toggleContent(this)">
                    <span class="toggle-title">Step 1: Data Size Analysis</span>
                    <span class="toggle-icon">â–¼</span>
                </div>
                <div class="toggle-content">
                    <div class="toggle-inner">
                        <div class="question-card" style="margin: 0;">
                            <span class="question-number">Q1: How much data?</span>
                            <div style="margin-top: 15px; padding: 20px; background: var(--bg-primary); border-radius: 8px;">
                                <p style="color: var(--text-secondary); margin-bottom: 10px;">ğŸ“Š Calculation:</p>
                                <ul style="list-style: none; padding-left: 0;">
                                    <li style="padding: 8px 0; border-bottom: 1px solid var(--border-color);">
                                        <span style="color: var(--accent-primary);">â€¢</span> 10,000 users Ã— 1KB per session = <strong style="color: var(--accent-success);">10 MB</strong>
                                    </li>
                                    <li style="padding: 8px 0;">
                                        <span style="color: var(--accent-primary);">â€¢</span> Classification: <strong style="color: var(--accent-warning);">Medium-sized dataset</strong>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="toggle-section">
                <div class="toggle-header" onclick="toggleContent(this)">
                    <span class="toggle-title">Step 2: Operations Analysis</span>
                    <span class="toggle-icon">â–¼</span>
                </div>
                <div class="toggle-content">
                    <div class="toggle-inner">
                        <div class="question-card" style="margin: 0;">
                            <span class="question-number">Q2: What operations?</span>
                            <div style="margin-top: 15px;">
                                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                                    <div style="background: var(--bg-primary); padding: 15px; border-radius: 8px; border-left: 3px solid var(--accent-success);">
                                        <strong style="color: var(--accent-primary);">Insert</strong>
                                        <p style="font-size: 0.9rem; color: var(--text-secondary); margin-top: 5px;">When user logs in</p>
                                    </div>
                                    <div style="background: var(--bg-primary); padding: 15px; border-radius: 8px; border-left: 3px solid var(--accent-danger);">
                                        <strong style="color: var(--accent-primary);">Delete</strong>
                                        <p style="font-size: 0.9rem; color: var(--text-secondary); margin-top: 5px;">When session expires</p>
                                    </div>
                                    <div style="background: var(--bg-primary); padding: 15px; border-radius: 8px; border-left: 3px solid var(--accent-warning);">
                                        <strong style="color: var(--accent-primary);">Lookup</strong>
                                        <p style="font-size: 0.9rem; color: var(--text-secondary); margin-top: 5px;">On every request (99%)</p>
                                    </div>
                                </div>
                                <p style="margin-top: 20px; padding: 15px; background: linear-gradient(135deg, rgba(0, 217, 255, 0.1), rgba(124, 58, 237, 0.1)); border-radius: 8px; border-left: 4px solid var(--accent-primary);">
                                    <strong>Key Insight:</strong> No ordering needed, lookups are the critical path!
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="toggle-section">
                <div class="toggle-header" onclick="toggleContent(this)">
                    <span class="toggle-title">Step 3: Access Pattern Analysis</span>
                    <span class="toggle-icon">â–¼</span>
                </div>
                <div class="toggle-content">
                    <div class="toggle-inner">
                        <div class="question-card" style="margin: 0;">
                            <span class="question-number">Q3: Access pattern?</span>
                            <div style="margin-top: 15px;">
                                <ul style="list-style: none; padding-left: 0;">
                                    <li style="padding: 12px; margin: 10px 0; background: var(--bg-primary); border-radius: 8px; border-left: 3px solid var(--accent-primary);">
                                        <strong style="color: var(--accent-primary);">Pattern:</strong> Lookup by session ID (random access)
                                    </li>
                                    <li style="padding: 12px; margin: 10px 0; background: var(--bg-primary); border-radius: 8px; border-left: 3px solid var(--accent-success);">
                                        <strong style="color: var(--accent-success);">Frequency:</strong> Mostly reads (99% lookups, 1% insert/delete)
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="toggle-section">
                <div class="toggle-header" onclick="toggleContent(this)">
                    <span class="toggle-title">Step 4: Constraints Analysis</span>
                    <span class="toggle-icon">â–¼</span>
                </div>
                <div class="toggle-content">
                    <div class="toggle-inner">
                        <div class="question-card" style="margin: 0;">
                            <span class="question-number">Q4: Constraints?</span>
                            <div style="margin-top: 15px;">
                                <table style="width: 100%; border-collapse: collapse;">
                                    <tr style="border-bottom: 1px solid var(--border-color);">
                                        <td style="padding: 12px; font-weight: 600; color: var(--accent-primary);">Lookups:</td>
                                        <td style="padding: 12px; color: var(--text-secondary);">Must be O(1) - fast response critical</td>
                                    </tr>
                                    <tr style="border-bottom: 1px solid var(--border-color);">
                                        <td style="padding: 12px; font-weight: 600; color: var(--accent-primary);">Memory:</td>
                                        <td style="padding: 12px; color: var(--text-secondary);">10 MB is fine (fits easily in RAM)</td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="success-box" style="margin-top: 30px;">
                <h4 class="info-box-title" style="color: var(--accent-success);">âœ“ DECISION: Hash Table (Dictionary/Map)</h4>
                <div class="info-box-content">
                    <p style="margin-bottom: 15px; font-size: 1.1rem;"><strong>Why this choice is optimal:</strong></p>
                    <ul style="list-style: none; padding-left: 0;">
                        <li style="padding: 8px 0; color: var(--text-secondary);">
                            <span style="color: var(--accent-success); font-size: 1.2rem;">âœ“</span> 
                            <strong>O(1) average lookup</strong> - meets the critical requirement
                        </li>
                        <li style="padding: 8px 0; color: var(--text-secondary);">
                            <span style="color: var(--accent-success); font-size: 1.2rem;">âœ“</span> 
                            <strong>O(1) insert/delete</strong> - efficient for all operations
                        </li>
                        <li style="padding: 8px 0; color: var(--text-secondary);">
                            <span style="color: var(--accent-success); font-size: 1.2rem;">âœ“</span> 
                            <strong>10 MB fits easily in RAM</strong> - no memory concerns
                        </li>
                        <li style="padding: 8px 0; color: var(--text-secondary);">
                            <span style="color: var(--accent-success); font-size: 1.2rem;">âœ“</span> 
                            <strong>No ordering needed</strong> - perfect for our use case
                        </li>
                        <li style="padding: 8px 0; color: var(--text-secondary);">
                            <span style="color: var(--accent-success); font-size: 1.2rem;">âœ“</span> 
                            <strong>Good cache locality</strong> - within each bucket
                        </li>
                    </ul>
                </div>
            </div>

            <h3 class="section-subtitle" style="margin-top: 40px;">ğŸ—ï¸ Memory Layout Visualization</h3>

            <div class="visual-diagram">
                <div class="diagram-title">Hash Table Structure</div>
                <div class="diagram-content">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Hash Table (array of buckets)      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [0] â†’ session1 â†’ session5           â”‚
â”‚ [1] â†’ session3                      â”‚
â”‚ [2] â†’ (empty)                       â”‚
â”‚ [3] â†’ session2 â†’ session7           â”‚
â”‚ [4] â†’ session4                      â”‚
â”‚ ...                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Memory cost per session:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
 Key:      16 bytes (session ID)
 Value:  1024 bytes (session data)
 Overhead:  8 bytes (pointer)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
 Total:  1048 bytes per session

10,000 Ã— 1048 = 10 MB âœ“</div>
            </div>

            <div class="toggle-section">
                <div class="toggle-header" onclick="toggleContent(this)">
                    <span class="toggle-title">ğŸ’» Implementation Code</span>
                    <span class="toggle-icon">â–¼</span>
                </div>
                <div class="toggle-content">
                    <div class="toggle-inner">
                        <div class="code-block">
                            <div class="code-header">
                                <span class="code-lang">Python Implementation</span>
                                <button class="copy-btn" onclick="copyCode(this)">Copy Code</button>
                            </div>
                            <div class="code-content">
<pre><code><span class="keyword">class</span> <span class="function">SessionManager</span>:
    <span class="keyword">def</span> <span class="function">__init__</span>(self, max_sessions=<span class="number">10000</span>):
        self.sessions = {}  <span class="comment"># Hash table: session_id â†’ session_data</span>
        self.max_sessions = max_sessions
    
    <span class="keyword">def</span> <span class="function">add_session</span>(self, session_id, user_data):
        <span class="string">"""Add new session - O(1) operation"""</span>
        <span class="keyword">if</span> len(self.sessions) >= self.max_sessions:
            <span class="keyword">raise</span> <span class="function">Exception</span>(<span class="string">"Max sessions reached"</span>)
        
        self.sessions[session_id] = {
            <span class="string">'data'</span>: user_data,
            <span class="string">'timestamp'</span>: time.time()
        }
        <span class="keyword">return</span> <span class="keyword">True</span>
    
    <span class="keyword">def</span> <span class="function">get_session</span>(self, session_id):
        <span class="string">"""Lookup session - O(1) operation"""</span>
        <span class="keyword">return</span> self.sessions.get(session_id)
    
    <span class="keyword">def</span> <span class="function">remove_session</span>(self, session_id):
        <span class="string">"""Remove session - O(1) operation"""</span>
        <span class="keyword">if</span> session_id <span class="keyword">in</span> self.sessions:
            <span class="keyword">del</span> self.sessions[session_id]
            <span class="keyword">return</span> <span class="keyword">True</span>
        <span class="keyword">return</span> <span class="keyword">False</span>

<span class="comment"># Usage example</span>
manager = <span class="function">SessionManager</span>()

<span class="comment"># User logs in - O(1)</span>
manager.add_session(<span class="string">"abc123"</span>, {<span class="string">"user_id"</span>: <span class="number">42</span>, <span class="string">"name"</span>: <span class="string">"Alice"</span>})

<span class="comment"># Every request checks session - O(1)</span>
session = manager.get_session(<span class="string">"abc123"</span>)

<span class="comment"># Session expires - O(1)</span>
manager.remove_session(<span class="string">"abc123"</span>)</code></pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <h3 class="section-subtitle" style="margin-top: 40px;">âŒ Alternatives Considered & Rejected</h3>

            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>Data Structure</th>
                        <th>Lookup Time</th>
                        <th>Why Rejected</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Array</strong></td>
                        <td><span class="crossmark">âœ—</span> O(n)</td>
                        <td>Linear search too slow for 10,000 sessions</td>
                    </tr>
                    <tr>
                        <td><strong>Linked List</strong></td>
                        <td><span class="crossmark">âœ—</span> O(n)</td>
                        <td>Must traverse list to find session</td>
                    </tr>
                    <tr>
                        <td><strong>Binary Tree</strong></td>
                        <td><span class="crossmark">âœ—</span> O(log n)</td>
                        <td>Slower than hash, no ordering benefit here</td>
                    </tr>
                    <tr>
                        <td><strong>Hash Table</strong></td>
                        <td><span class="checkmark">âœ“</span> O(1)</td>
                        <td><strong style="color: var(--accent-success);">OPTIMAL CHOICE</strong></td>
                    </tr>
                </tbody>
            </table>
        </div>

Let's apply the framework:

Q1: How much data?

   10,000 users Ã— 1KB per session = 10 MB
   Medium-sized dataset

Q2: What operations?

   Insert: When user logs in
   Delete: When session expires
   Lookup: On every request (MOST FREQUENT)
   No need for ordering

Q3: Access pattern?

   Lookup by session ID (random access)
   Mostly reads (99% lookups, 1% insert/delete)

Q4: Constraints?

   Lookups must be O(1) - fast response critical
   Memory: 10 MB is fine

DECISION:

    Hash Table (Dictionary/Map)
    
    Why?
    âœ“ O(1) average lookup (critical requirement)
    âœ“ O(1) insert/delete
    âœ“ 10 MB fits easily in RAM
    âœ“ No ordering needed
    âœ“ Good cache locality within each bucket
    
    Memory layout:
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Hash Table (array of buckets)      â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ [0] â†’ session1 â†’ session5         â”‚
    â”‚ [1] â†’ session3                     â”‚
    â”‚ [2] â†’ (empty)                       â”‚
    â”‚ [3] â†’ session2 â†’ session7         â”‚
    â”‚ ...                                 â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    
    Memory cost per session:
    - Key: 16 bytes (session ID)
    - Value: 1024 bytes (session data)
    - Overhead: 8 bytes (pointer)
    Total: 1048 bytes per session
    10,000 Ã— 1048 = 10 MB âœ“
    

Alternative considered and rejected:

    Array: âœ— O(n) lookup too slow
    Linked List: âœ— O(n) lookup too slow
    Binary Tree: âœ— O(log n) lookup slower than hash, no ordering benefit
    

        <!-- Example 2: Real-Time Leaderboard -->
        <div class="section">
            <div class="section-header">
                <span class="section-icon">ğŸ†</span>
                <h2 class="section-title">Example 2: Real-Time Leaderboard</h2>
            </div>

            <div class="info-box" style="border-color: var(--accent-success);">
                <h4 class="info-box-title">ğŸ¯ Problem Statement</h4>
                <div class="info-box-content">
                    <p style="margin-bottom: 15px;">Game leaderboard tracking top 100 players out of 1,000,000 total players:</p>
                    <ul style="list-style: none; padding-left: 20px;">
                        <li style="margin: 8px 0;">âœ“ Update score (frequent operation)</li>
                        <li style="margin: 8px 0;">âœ“ Get top N players (very frequent)</li>
                        <li style="margin: 8px 0;">âœ“ Get player rank (occasional)</li>
                        <li style="margin: 8px 0;">ğŸ® <strong>Challenge:</strong> Only store top 100, not all 1M players!</li>
                    </ul>
                </div>
            </div>

            <h3 class="section-subtitle">ğŸ” Framework Application</h3>

            <div class="decision-framework">
                <div class="question-card">
                    <span class="question-number">Q1: Data Size</span>
                    <h4 class="question-title">Only need to keep top 100 in memory</h4>
                    <div style="padding: 20px; background: var(--bg-primary); border-radius: 8px; margin-top: 15px;">
                        <p style="color: var(--accent-primary); font-weight: 600; margin-bottom: 10px;">Memory Calculation:</p>
                        <ul style="list-style: none; padding-left: 0;">
                            <li style="padding: 8px 0;">100 players Ã— 50 bytes = <strong style="color: var(--accent-success);">5 KB</strong></li>
                            <li style="padding: 8px 0; color: var(--text-secondary);">Incredibly memory-efficient!</li>
                        </ul>
                    </div>
                </div>

                <div class="question-card">
                    <span class="question-number">Q2: Operations</span>
                    <h4 class="question-title">Performance Requirements</h4>
                    <div style="margin-top: 15px;">
                        <div style="display: grid; gap: 12px;">
                            <div style="padding: 15px; background: var(--bg-primary); border-radius: 8px; border-left: 3px solid var(--accent-warning);">
                                <strong style="color: var(--accent-primary);">Insert new score:</strong> 
                                <span style="color: var(--text-secondary);"> O(log n) acceptable</span>
                            </div>
                            <div style="padding: 15px; background: var(--bg-primary); border-radius: 8px; border-left: 3px solid var(--accent-success);">
                                <strong style="color: var(--accent-primary);">Get top N:</strong> 
                                <span style="color: var(--text-secondary);"> Should be O(N), very frequent</span>
                            </div>
                            <div style="padding: 15px; background: var(--bg-primary); border-radius: 8px; border-left: 3px solid var(--accent-warning);">
                                <strong style="color: var(--accent-primary);">Update score:</strong> 
                                <span style="color: var(--text-secondary);"> O(log n) acceptable</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="question-card">
                    <span class="question-number">Q3: Access Pattern</span>
                    <h4 class="question-title">Always need min/max extremes</h4>
                    <ul class="options-list">
                        <li><strong>Priority:</strong> Fast access to top/bottom of top 100</li>
                        <li><strong>Order:</strong> Ordered access required</li>
                        <li><strong>Pattern:</strong> Frequent queries to minimum (100th place)</li>
                    </ul>
                </div>

                <div class="question-card">
                    <span class="question-number">Q4: Constraints</span>
                    <h4 class="question-title">Critical Requirements</h4>
                    <ul class="options-list">
                        <li><strong>Sorting:</strong> Must maintain sorted order</li>
                        <li><strong>Performance:</strong> Fast access to extremes</li>
                        <li><strong>Memory:</strong> Limited to top 100 (don't store all 1M)</li>
                    </ul>
                </div>
            </div>

            <div class="success-box" style="margin-top: 30px;">
                <h4 class="info-box-title" style="color: var(--accent-success);">âœ“ DECISION: Min Heap of Size 100</h4>
                <div class="info-box-content">
                    <p style="margin-bottom: 15px; font-size: 1.1rem;"><strong>Why Min Heap is perfect:</strong></p>
                    <ul style="list-style: none; padding-left: 0;">
                        <li style="padding: 8px 0; color: var(--text-secondary);">
                            <span style="color: var(--accent-success); font-size: 1.2rem;">âœ“</span> 
                            <strong>O(log 100) â‰ˆ O(1)</strong> practically for insert/update (only 7 operations max)
                        </li>
                        <li style="padding: 8px 0; color: var(--text-secondary);">
                            <span style="color: var(--accent-success); font-size: 1.2rem;">âœ“</span> 
                            <strong>O(1) access to minimum</strong> (100th place player)
                        </li>
                        <li style="padding: 8px 0; color: var(--text-secondary);">
                            <span style="color: var(--accent-success); font-size: 1.2rem;">âœ“</span> 
                            <strong>O(100 log 100)</strong> to extract all top 100, sorted
                        </li>
                        <li style="padding: 8px 0; color: var(--text-secondary);">
                            <span style="color: var(--accent-success); font-size: 1.2rem;">âœ“</span> 
                            <strong>Minimal memory: only 5 KB</strong> for entire leaderboard!
                        </li>
                        <li style="padding: 8px 0; color: var(--text-secondary);">
                            <span style="color: var(--accent-success); font-size: 1.2rem;">âœ“</span> 
                            <strong>Good cache locality</strong> (array-based heap, contiguous memory)
                        </li>
                    </ul>
                </div>
            </div>

            <h3 class="section-subtitle" style="margin-top: 40px;">ğŸ—ï¸ Memory Layout & Heap Structure</h3>

            <div class="visual-diagram">
                <div class="diagram-title">Min Heap Stored as Array (Contiguous Memory)</div>
                <div class="diagram-content">â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Array Representation (Cache-Friendly)         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [Player1: 9999 pts] [Player2: 9998] [Player3: 9997]â”‚
â”‚       â†‘                   â†“              â†“          â”‚
â”‚     Root              Left child    Right child    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Heap Property: Parent â‰¤ Children (min heap)
Root = lowest score in top 100 (100th place)

Tree Visualization:
           [9999]
          /      \
     [9998]      [9997]
     /    \      /    \
 [9996] [9995] [9994] [9993]

When new score arrives:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
1. If score > root (better than 100th):
   â†’ Replace root
   â†’ Heapify down: O(log 100) = 7 ops
   
2. If score â‰¤ root:
   â†’ Ignore (not in top 100)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Memory: 100 Ã— 50 bytes = 5 KB âœ“</div>
            </div>

            <div class="toggle-section">
                <div class="toggle-header" onclick="toggleContent(this)">
                    <span class="toggle-title">ğŸ’» Python Implementation with Detailed Explanation</span>
                    <span class="toggle-icon">â–¼</span>
                </div>
                <div class="toggle-content">
                    <div class="toggle-inner">
                        <div class="code-block">
                            <div class="code-header">
                                <span class="code-lang">Python - Min Heap Leaderboard</span>
                                <button class="copy-btn" onclick="copyCode(this)">Copy Code</button>
                            </div>
                            <div class="code-content">
<pre><code><span class="keyword">import</span> heapq

<span class="keyword">class</span> <span class="function">Leaderboard</span>:
    <span class="string">"""
    Min Heap implementation for top-K tracking
    Root always contains the smallest element (100th place)
    """</span>
    <span class="keyword">def</span> <span class="function">__init__</span>(self, max_players=<span class="number">100</span>):
        self.heap = []  <span class="comment"># Min heap: stores (score, player_id)</span>
        self.max_size = max_players
    
    <span class="keyword">def</span> <span class="function">add_score</span>(self, player_id, score):
        <span class="string">"""
        Add new score to leaderboard
        Time: O(log K) where K = 100
        Space: O(1) per operation
        """</span>
        <span class="keyword">if</span> len(self.heap) < self.max_size:
            <span class="comment"># Heap not full, just add</span>
            heapq.<span class="function">heappush</span>(self.heap, (score, player_id))
        <span class="keyword">elif</span> score > self.heap[<span class="number">0</span>][<span class="number">0</span>]:
            <span class="comment"># New score better than 100th place!</span>
            <span class="comment"># Replace root (smallest) with new score</span>
            heapq.<span class="function">heapreplace</span>(self.heap, (score, player_id))
    
    <span class="keyword">def</span> <span class="function">get_top_n</span>(self, n=<span class="number">10</span>):
        <span class="string">"""Get top N players - O(K log K)"""</span>
        <span class="keyword">return</span> <span class="function">sorted</span>(self.heap, reverse=<span class="keyword">True</span>)[:n]
    
    <span class="keyword">def</span> <span class="function">get_rank</span>(self, player_id):
        <span class="string">"""Find player's rank in top 100"""</span>
        sorted_board = <span class="function">sorted</span>(self.heap, reverse=<span class="keyword">True</span>)
        <span class="keyword">for</span> rank, (score, pid) <span class="keyword">in</span> <span class="function">enumerate</span>(sorted_board, <span class="number">1</span>):
            <span class="keyword">if</span> pid == player_id:
                <span class="keyword">return</span> rank
        <span class="keyword">return</span> <span class="keyword">None</span>

<span class="comment"># Usage: 1 million players, only 5 KB memory!</span>
leaderboard = <span class="function">Leaderboard</span>(<span class="number">100</span>)
<span class="keyword">for</span> player_id <span class="keyword">in</span> <span class="function">range</span>(<span class="number">1_000_000</span>):
    score = random.<span class="function">randint</span>(<span class="number">0</span>, <span class="number">10000</span>)
    leaderboard.<span class="function">add_score</span>(player_id, score)</code></pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <h3 class="section-subtitle" style="margin-top: 40px;">âš–ï¸ Comparison with Alternatives</h3>

            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>Data Structure</th>
                        <th>Pros</th>
                        <th>Cons</th>
                        <th>Verdict</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Sorted Array</strong></td>
                        <td><span class="checkmark">âœ“</span> O(1) access</td>
                        <td><span class="crossmark">âœ—</span> O(n) insertion</td>
                        <td style="color: var(--accent-danger);">Bad for updates</td>
                    </tr>
                    <tr>
                        <td><strong>Balanced BST</strong></td>
                        <td><span class="checkmark">âœ“</span> O(log n) ops</td>
                        <td><span class="crossmark">âœ—</span> 6.6 KB overhead<br><span class="crossmark">âœ—</span> Cache-unfriendly</td>
                        <td style="color: var(--accent-danger);">More complex</td>
                    </tr>
                    <tr>
                        <td><strong>Min Heap</strong></td>
                        <td>
                            <span class="checkmark">âœ“</span> O(log 100) â‰ˆ O(1)<br>
                            <span class="checkmark">âœ“</span> Only 5 KB<br>
                            <span class="checkmark">âœ“</span> Cache-friendly
                        </td>
                        <td>None</td>
                        <td style="color: var(--accent-success); font-weight: 600;">OPTIMAL</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Example 3: Undo/Redo Feature -->
        <div class="section">
            <div class="section-header">
                <span class="section-icon">â†©ï¸</span>
                <h2 class="section-title">Example 3: Undo/Redo Feature in Text Editor</h2>
            </div>

            <div class="info-box" style="border-color: var(--accent-secondary);">
                <h4 class="info-box-title">ğŸ¯ Problem Statement</h4>
                <div class="info-box-content">
                    <p style="margin-bottom: 15px;">Implement undo/redo functionality for a text editor:</p>
                    <ul style="list-style: none; padding-left: 20px;">
                        <li style="margin: 8px 0;">âœ“ Store edit history</li>
                        <li style="margin: 8px 0;">âœ“ Undo: revert last action</li>
                        <li style="margin: 8px 0;">âœ“ Redo: replay undone action</li>
                        <li style="margin: 8px 0;">ğŸ“ <strong>Constraint:</strong> Max 1000 actions in history</li>
                    </ul>
                </div>
            </div>

            <h3 class="section-subtitle">ğŸ” Framework Application</h3>

            <div class="decision-framework">
                <div class="question-card">
                    <span class="question-number">Q1: Data Size</span>
                    <h4 class="question-title">1000 actions Ã— 100 bytes = 100 KB</h4>
                </div>

                <div class="question-card">
                    <span class="question-number">Q2: Operations</span>
                    <h4 class="question-title">LIFO Pattern Recognition!</h4>
                    <ul class="options-list">
                        <li><strong>Add action:</strong> Every edit (frequent)</li>
                        <li><strong>Undo:</strong> Pop last action (LIFO!)</li>
                        <li><strong>Redo:</strong> Push action back (LIFO!)</li>
                    </ul>
                </div>

                <div class="question-card">
                    <span class="question-number">Q3: Access Pattern</span>
                    <h4 class="question-title">Sequential, Most Recent Only</h4>
                    <ul class="options-list">
                        <li><strong>Pattern:</strong> Only access most recent</li>
                        <li><strong>Order:</strong> Sequential, never random</li>
                    </ul>
                </div>

                <div class="question-card">
                    <span class="question-number">Q4: Constraints</span>
                    <h4 class="question-title">Fixed Size, LIFO Critical</h4>
                    <ul class="options-list">
                        <li><strong>Size:</strong> Fixed max size (1000)</li>
                        <li><strong>Order:</strong> LIFO order is critical!</li>
                    </ul>
                </div>
            </div>

            <div class="success-box" style="margin-top: 30px;">
                <h4 class="info-box-title" style="color: var(--accent-success);">âœ“ DECISION: Two Stacks (Undo + Redo)</h4>
                <div class="info-box-content">
                    <ul style="list-style: none; padding-left: 0;">
                        <li style="padding: 8px 0; color: var(--text-secondary);">
                            <span style="color: var(--accent-success); font-size: 1.2rem;">âœ“</span> 
                            <strong>O(1) push/pop</strong> - perfect for undo/redo
                        </li>
                        <li style="padding: 8px 0; color: var(--text-secondary);">
                            <span style="color: var(--accent-success); font-size: 1.2rem;">âœ“</span> 
                            <strong>LIFO semantics</strong> match undo behavior exactly
                        </li>
                        <li style="padding: 8px 0; color: var(--text-secondary);">
                            <span style="color: var(--accent-success); font-size: 1.2rem;">âœ“</span> 
                            <strong>Contiguous memory</strong> - cache-friendly
                        </li>
                        <li style="padding: 8px 0; color: var(--text-secondary);">
                            <span style="color: var(--accent-success); font-size: 1.2rem;">âœ“</span> 
                            <strong>Simple implementation</strong> - minimal overhead
                        </li>
                    </ul>
                </div>
            </div>

            <h3 class="section-subtitle" style="margin-top: 40px;">ğŸ—ï¸ Stack Memory Layout & Operations</h3>

            <div class="visual-diagram">
                <div class="diagram-title">Two-Stack Architecture for Undo/Redo</div>
                <div class="diagram-content">Initial State:
Undo Stack:              Redo Stack:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Action 3    â”‚         â”‚   (empty)   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ Action 2    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Action 1    â”‚ â† bottom
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User types "hello":
Undo Stack:              Redo Stack:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ "hello" â†topâ”‚         â”‚   (empty)   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ Action 3    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Action 2    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User hits Undo:
Undo Stack:              Redo Stack:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Action 3â†topâ”‚         â”‚ "hello"â†top â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ Action 2    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User hits Redo:
Undo Stack:              Redo Stack:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ "hello"â†top â”‚         â”‚   (empty)   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ Action 3    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Memory: 2 Ã— 1000 Ã— 100 bytes = 200 KB max</div>
            </div>

            <div class="toggle-section">
                <div class="toggle-header" onclick="toggleContent(this)">
                    <span class="toggle-title">ğŸ’» Complete Implementation</span>
                    <span class="toggle-icon">â–¼</span>
                </div>
                <div class="toggle-content">
                    <div class="toggle-inner">
                        <div class="code-block">
                            <div class="code-header">
                                <span class="code-lang">Python - Undo/Redo Manager</span>
                                <button class="copy-btn" onclick="copyCode(this)">Copy Code</button>
                            </div>
                            <div class="code-content">
<pre><code><span class="keyword">class</span> <span class="function">UndoRedoManager</span>:
    <span class="string">"""Two-stack architecture for O(1) undo/redo"""</span>
    <span class="keyword">def</span> <span class="function">__init__</span>(self, max_size=<span class="number">1000</span>):
        self.undo_stack = []  <span class="comment"># List used as stack</span>
        self.redo_stack = []
        self.max_size = max_size
    
    <span class="keyword">def</span> <span class="function">add_action</span>(self, action):
        <span class="string">"""Add new action - O(1)"""</span>
        <span class="comment"># New action: clear redo stack</span>
        <span class="comment"># (can't redo after new action)</span>
        self.redo_stack.clear()
        
        <span class="comment"># Add to undo stack</span>
        self.undo_stack.append(action)
        
        <span class="comment"># Enforce size limit</span>
        <span class="keyword">if</span> len(self.undo_stack) > self.max_size:
            self.undo_stack.pop(<span class="number">0</span>)  <span class="comment"># Remove oldest</span>
    
    <span class="keyword">def</span> <span class="function">undo</span>(self):
        <span class="string">"""Undo last action - O(1)"""</span>
        <span class="keyword">if</span> <span class="keyword">not</span> self.undo_stack:
            <span class="keyword">return</span> <span class="keyword">None</span>
        
        action = self.undo_stack.pop()  <span class="comment"># O(1)</span>
        self.redo_stack.append(action)  <span class="comment"># O(1)</span>
        <span class="keyword">return</span> action
    
    <span class="keyword">def</span> <span class="function">redo</span>(self):
        <span class="string">"""Redo undone action - O(1)"""</span>
        <span class="keyword">if</span> <span class="keyword">not</span> self.redo_stack:
            <span class="keyword">return</span> <span class="keyword">None</span>
        
        action = self.redo_stack.pop()  <span class="comment"># O(1)</span>
        self.undo_stack.append(action)  <span class="comment"># O(1)</span>
        <span class="keyword">return</span> action

<span class="comment"># Usage Example</span>
manager = <span class="function">UndoRedoManager</span>()

<span class="comment"># User types</span>
manager.add_action(<span class="string">"insert 'H'"</span>)
manager.add_action(<span class="string">"insert 'e'"</span>)
manager.add_action(<span class="string">"insert 'l'"</span>)

<span class="comment"># User hits Ctrl+Z (undo)</span>
action = manager.undo()  <span class="comment"># Returns "insert 'l'"</span>

<span class="comment"># User hits Ctrl+Y (redo)</span>
action = manager.redo()  <span class="comment"># Returns "insert 'l'"</span></code></pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Example 4: URL Shortener Hit Counter -->
        <div class="section">
            <div class="section-header">
                <span class="section-icon">ğŸ”—</span>
                <h2 class="section-title">Example 4: URL Shortener Hit Counter</h2>
            </div>

            <div class="info-box" style="border-color: var(--accent-warning);">
                <h4 class="info-box-title">ğŸ¯ Problem Statement</h4>
                <div class="info-box-content">
                    <p style="margin-bottom: 15px;">Count hits for each shortened URL in the last 5 minutes:</p>
                    <ul style="list-style: none; padding-left: 20px;">
                        <li style="margin: 8px 0;">âœ“ Record timestamp of each hit</li>
                        <li style="margin: 8px 0;">âœ“ Query: "How many hits in last 5 minutes?"</li>
                        <li style="margin: 8px 0;">âœ“ 1000 URLs, average 100 hits/minute each</li>
                        <li style="margin: 8px 0;">ğŸ”¥ <strong>Challenge:</strong> 500,000 hits stored at any time!</li>
                    </ul>
                </div>
            </div>

            <h3 class="section-subtitle">ğŸ” Framework Application</h3>

            <div class="decision-framework">
                <div class="question-card">
                    <span class="question-number">Q1: Data Size</span>
                    <h4 class="question-title">500,000 timestamps Ã— 8 bytes = 4 MB</h4>
                    <div style="padding: 15px; background: var(--bg-primary); border-radius: 8px; margin-top: 15px;">
                        <p style="color: var(--text-secondary); margin: 0;">Per URL: 100 hits/min Ã— 5 min = 500 timestamps</p>
                        <p style="color: var(--text-secondary); margin: 8px 0 0 0;">1000 URLs Ã— 4 KB = 4 MB total âœ“</p>
                    </div>
                </div>

                <div class="question-card">
                    <span class="question-number">Q2: Operations</span>
                    <h4 class="question-title">Time-Based Queue Operations</h4>
                    <ul class="options-list">
                        <li><strong>Add timestamp:</strong> Every hit (frequent)</li>
                        <li><strong>Count recent:</strong> Every query</li>
                        <li><strong>Remove old:</strong> Automatic cleanup</li>
                    </ul>
                </div>

                <div class="question-card">
                    <span class="question-number">Q3: Access Pattern</span>
                    <h4 class="question-title">FIFO with Time Window</h4>
                    <ul class="options-list">
                        <li><strong>Time-based ordering</strong> (chronological)</li>
                        <li><strong>Old data leaves first</strong> (FIFO pattern!)</li>
                        <li><strong>New data enters at end</strong> (queue-like)</li>
                    </ul>
                </div>

                <div class="question-card">
                    <span class="question-number">Q4: Constraints</span>
                    <h4 class="question-title">Sliding Time Window</h4>
                    <ul class="options-list">
                        <li><strong>Only last 5 minutes:</strong> Automatic expiration</li>
                        <li><strong>Frequent operations:</strong> Both add and query</li>
                        <li><strong>Old data cleanup:</strong> Must be efficient</li>
                    </ul>
                </div>
            </div>

            <div class="success-box" style="margin-top: 30px;">
                <h4 class="info-box-title" style="color: var(--accent-success);">âœ“ DECISION: Deque + Sliding Window</h4>
                <div class="info-box-content">
                    <p style="margin-bottom: 15px; font-size: 1.1rem;"><strong>Perfect for time-based queuing:</strong></p>
                    <ul style="list-style: none; padding-left: 0;">
                        <li style="padding: 8px 0; color: var(--text-secondary);">
                            <span style="color: var(--accent-success); font-weight: 600;">âœ“ O(1) append</span> - 
                            Add new timestamp to end
                        </li>
                        <li style="padding: 8px 0; color: var(--text-secondary);">
                            <span style="color: var(--accent-success); font-weight: 600;">âœ“ O(1) remove</span> - 
                            Pop old timestamps from front
                        </li>
                        <li style="padding: 8px 0; color: var(--text-secondary);">
                            <span style="color: var(--accent-success); font-weight: 600;">âœ“ O(k) count</span> - 
                            Where k = hits in window (typically small)
                        </li>
                        <li style="padding: 8px 0; color: var(--text-secondary);">
                            <span style="color: var(--accent-success); font-weight: 600;">âœ“ Contiguous memory</span> - 
                            Array-based deque = cache-friendly
                        </li>
                        <li style="padding: 8px 0; color: var(--text-secondary);">
                            <span style="color: var(--accent-success); font-weight: 600;">âœ“ Natural ordering</span> - 
                            Chronological by default
                        </li>
                    </ul>
                </div>
            </div>

            <h3 class="section-subtitle" style="margin-top: 40px;">ğŸ—ï¸ Deque Memory Layout & Sliding Window</h3>

            <div class="visual-diagram">
                <div class="diagram-title">Circular Buffer (Deque) Structure</div>
                <div class="diagram-content">Deque as Circular Buffer:
Front                                    Back
  â†“                                        â†“
[t1][t2][t3][t4][............][tn-1][tn][empty][empty]
  â†‘                                  â†‘
Old timestamps                New timestamps
(will expire soon)            (just added)

Sliding Window Operation:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Current time: T = 1000
Window: 300 seconds (5 minutes)
Cutoff: T - 300 = 700

Timestamps in deque:
[650, 680, 710, 720, 805, 850, 900, 980]
  â†‘    â†‘    â†‘    â†‘    â†‘    â†‘    â†‘    â†‘
  Old  Old  Keep Keep Keep Keep Keep Keep

Query at T=1000:
1. Remove 650 (< 700) â† popleft()
2. Remove 680 (< 700) â† popleft()
3. 710 >= 700, STOP!
4. Count remaining: 6 hits

Result: [710, 720, 805, 850, 900, 980]

Memory per URL:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Timestamps: 500 Ã— 8 bytes = 4 KB
Overhead:   pointer + size = 16 bytes
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Total: 4 KB per URL

1000 URLs Ã— 4 KB = 4 MB âœ“</div>
            </div>

            <div class="toggle-section">
                <div class="toggle-header" onclick="toggleContent(this)">
                    <span class="toggle-title">ğŸ’» Complete Implementation with Examples</span>
                    <span class="toggle-icon">â–¼</span>
                </div>
                <div class="toggle-content">
                    <div class="toggle-inner">
                        <div class="code-block">
                            <div class="code-header">
                                <span class="code-lang">Python - URL Hit Counter with Deque</span>
                                <button class="copy-btn" onclick="copyCode(this)">Copy Code</button>
                            </div>
                            <div class="code-content">
<pre><code><span class="keyword">from</span> collections <span class="keyword">import</span> deque
<span class="keyword">import</span> time

<span class="keyword">class</span> <span class="function">HitCounter</span>:
    <span class="string">"""
    Sliding window hit counter using deque
    Automatically removes old timestamps
    """</span>
    <span class="keyword">def</span> <span class="function">__init__</span>(self, window_seconds=<span class="number">300</span>):
        self.window = window_seconds
        self.hits = deque()  <span class="comment"># Store timestamps only</span>
    
    <span class="keyword">def</span> <span class="function">hit</span>(self, timestamp):
        <span class="string">"""Record a hit at given timestamp - O(1)"""</span>
        self.hits.append(timestamp)
    
    <span class="keyword">def</span> <span class="function">get_hits</span>(self, timestamp):
        <span class="string">"""
        Get number of hits in last 5 minutes
        Time: O(k) where k = expired timestamps
        Space: O(1)
        """</span>
        <span class="comment"># Calculate cutoff time</span>
        cutoff = timestamp - self.window
        
        <span class="comment"># Remove all old timestamps from front</span>
        <span class="keyword">while</span> self.hits <span class="keyword">and</span> self.hits[<span class="number">0</span>] < cutoff:
            self.hits.popleft()  <span class="comment"># O(1) operation</span>
        
        <span class="comment"># Count remaining (all are recent)</span>
        <span class="keyword">return</span> len(self.hits)

<span class="keyword">class</span> <span class="function">URLShortener</span>:
    <span class="string">"""Complete URL shortener with hit tracking"""</span>
    <span class="keyword">def</span> <span class="function">__init__</span>(self):
        self.counters = {}  <span class="comment"># url â†’ HitCounter</span>
    
    <span class="keyword">def</span> <span class="function">record_hit</span>(self, url):
        <span class="string">"""Record a hit for URL"""</span>
        <span class="keyword">if</span> url <span class="keyword">not</span> <span class="keyword">in</span> self.counters:
            self.counters[url] = <span class="function">HitCounter</span>()
        
        current_time = time.time()
        self.counters[url].hit(current_time)
    
    <span class="keyword">def</span> <span class="function">get_recent_hits</span>(self, url):
        <span class="string">"""Get hits in last 5 minutes"""</span>
        <span class="keyword">if</span> url <span class="keyword">not</span> <span class="keyword">in</span> self.counters:
            <span class="keyword">return</span> <span class="number">0</span>
        
        current_time = time.time()
        <span class="keyword">return</span> self.counters[url].get_hits(current_time)

<span class="comment"># Example Usage</span>
shortener = <span class="function">URLShortener</span>()

<span class="comment"># Simulate hits at different times</span>
shortener.record_hit(<span class="string">"bit.ly/abc123"</span>)
time.sleep(<span class="number">1</span>)
shortener.record_hit(<span class="string">"bit.ly/abc123"</span>)
time.sleep(<span class="number">2</span>)
shortener.record_hit(<span class="string">"bit.ly/abc123"</span>)

<span class="comment"># Query recent hits</span>
hits = shortener.get_recent_hits(<span class="string">"bit.ly/abc123"</span>)
<span class="function">print</span>(<span class="string">f"Hits in last 5 min: </span>{hits}<span class="string">"</span>)  <span class="comment"># Output: 3</span></code></pre>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <h3 class="section-subtitle" style="margin-top: 40px;">âŒ Alternatives Rejected</h3>

            <table class="comparison-table">
                <thead>
                    <tr>
                        <th>Data Structure</th>
                        <th>Pros</th>
                        <th>Cons</th>
                        <th>Verdict</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Array + Cleanup Thread</strong></td>
                        <td><span class="checkmark">âœ“</span> Simple concept</td>
                        <td>
                            <span class="crossmark">âœ—</span> Threading complexity<br>
                            <span class="crossmark">âœ—</span> Race conditions<br>
                            <span class="crossmark">âœ—</span> Harder to debug
                        </td>
                        <td style="color: var(--accent-danger);">Too complex</td>
                    </tr>
                    <tr>
                        <td><strong>Hash Map {time: count}</strong></td>
                        <td><span class="checkmark">âœ“</span> O(1) lookup</td>
                        <td>
                            <span class="crossmark">âœ—</span> Must iterate all keys<br>
                            <span class="crossmark">âœ—</span> More memory (hash overhead)<br>
                            <span class="crossmark">âœ—</span> Cleanup is O(n)
                        </td>
                        <td style="color: var(--accent-danger);">Inefficient</td>
                    </tr>
                    <tr>
                        <td><strong>Sorted Array</strong></td>
                        <td><span class="checkmark">âœ“</span> Sequential memory</td>
                        <td>
                            <span class="crossmark">âœ—</span> O(log n) to find cutoff<br>
                            <span class="crossmark">âœ—</span> O(n) deletion (shifting)<br>
                            <span class="crossmark">âœ—</span> O(n) insertion
                        </td>
                        <td style="color: var(--accent-danger);">Too slow</td>
                    </tr>
                    <tr>
                        <td><strong>Deque + Sliding Window</strong></td>
                        <td>
                            <span class="checkmark">âœ“</span> O(1) add/remove<br>
                            <span class="checkmark">âœ“</span> O(k) cleanup<br>
                            <span class="checkmark">âœ“</span> Cache-friendly<br>
                            <span class="checkmark">âœ“</span> Auto-ordering
                        </td>
                        <td>None</td>
                        <td style="color: var(--accent-success); font-weight: 600;">OPTIMAL</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Pattern Recognition Guide -->
        <div class="section" id="pattern-guide">
            <div class="section-header">
                <span class="section-icon">ğŸ§­</span>
                <h2 class="section-title">Pattern Recognition Guide</h2>
            </div>

            <div class="info-box">
                <h4 class="info-box-title">ğŸ¯ Instant Decision Tree</h4>
                <div class="info-box-content">
                    <p style="margin-bottom: 15px;">After seeing these examples, use this quick reference to choose the right data structure:</p>
                </div>
            </div>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin-top: 30px;">
                <div class="question-card" style="background: linear-gradient(135deg, rgba(0, 217, 255, 0.1), rgba(124, 58, 237, 0.1));">
                    <span class="question-number">FIFO Pattern</span>
                    <h4 class="question-title">Need First In First Out?</h4>
                    <div style="margin-top: 15px; padding: 15px; background: var(--bg-primary); border-radius: 8px;">
                        <p style="color: var(--accent-primary); font-weight: 600; margin-bottom: 10px;">â†’ Queue (array-based)</p>
                        <p style="color: var(--text-secondary); font-size: 0.9rem;">Perfect for: task scheduling, breadth-first search, message processing</p>
                    </div>
                </div>

                <div class="question-card" style="background: linear-gradient(135deg, rgba(124, 58, 237, 0.1), rgba(0, 217, 255, 0.1));">
                    <span class="question-number">LIFO Pattern</span>
                    <h4 class="question-title">Need Last In First Out?</h4>
                    <div style="margin-top: 15px; padding: 15px; background: var(--bg-primary); border-radius: 8px;">
                        <p style="color: var(--accent-secondary); font-weight: 600; margin-bottom: 10px;">â†’ Stack (array-based)</p>
                        <p style="color: var(--text-secondary); font-size: 0.9rem;">Perfect for: undo/redo, DFS, expression evaluation, call stack simulation</p>
                    </div>
                </div>

                <div class="question-card" style="background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(0, 217, 255, 0.1));">
                    <span class="question-number">Lookup Pattern</span>
                    <h4 class="question-title">Need fast lookup by key?</h4>
                    <div style="margin-top: 15px; padding: 15px; background: var(--bg-primary); border-radius: 8px;">
                        <p style="color: var(--accent-success); font-weight: 600; margin-bottom: 10px;">â†’ Hash Table</p>
                        <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 8px;">â€¢ <strong>Ordered:</strong> TreeMap</p>
                        <p style="color: var(--text-secondary); font-size: 0.9rem;">â€¢ <strong>With eviction:</strong> LRU Cache</p>
                    </div>
                </div>

                <div class="question-card" style="background: linear-gradient(135deg, rgba(255, 193, 7, 0.1), rgba(255, 152, 0, 0.1));">
                    <span class="question-number">Sorted Pattern</span>
                    <h4 class="question-title">Need to maintain sorted order?</h4>
                    <div style="margin-top: 15px; padding: 15px; background: var(--bg-primary); border-radius: 8px;">
                        <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 8px;">â€¢ <strong>Small data:</strong> Sorted Array (binary search)</p>
                        <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 8px;">â€¢ <strong>Large data:</strong> Balanced Tree (Red-Black, AVL)</p>
                        <p style="color: var(--accent-warning); font-weight: 600;">â€¢ <strong>Just min/max:</strong> Heap</p>
                    </div>
                </div>

                <div class="question-card" style="background: linear-gradient(135deg, rgba(233, 30, 99, 0.1), rgba(156, 39, 176, 0.1));">
                    <span class="question-number">Index Pattern</span>
                    <h4 class="question-title">Need fast access by index?</h4>
                    <div style="margin-top: 15px; padding: 15px; background: var(--bg-primary); border-radius: 8px;">
                        <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 8px;">â€¢ <strong>Fixed size:</strong> Array</p>
                        <p style="color: var(--text-secondary); font-size: 0.9rem;">â€¢ <strong>Variable size:</strong> Dynamic Array (vector, ArrayList)</p>
                    </div>
                </div>

                <div class="question-card" style="background: linear-gradient(135deg, rgba(0, 217, 255, 0.1), rgba(16, 185, 129, 0.1));">
                    <span class="question-number">Both Ends Pattern</span>
                    <h4 class="question-title">Fast insert/delete at both ends?</h4>
                    <div style="margin-top: 15px; padding: 15px; background: var(--bg-primary); border-radius: 8px;">
                        <p style="color: var(--accent-primary); font-weight: 600; margin-bottom: 10px;">â†’ Deque (double-ended queue)</p>
                        <p style="color: var(--text-secondary); font-size: 0.9rem;">Perfect for: sliding window, palindrome check, work stealing</p>
                    </div>
                </div>

                <div class="question-card" style="background: linear-gradient(135deg, rgba(124, 58, 237, 0.1), rgba(233, 30, 99, 0.1));">
                    <span class="question-number">Middle Insert Pattern</span>
                    <h4 class="question-title">Fast insert/delete in middle?</h4>
                    <div style="margin-top: 15px; padding: 15px; background: var(--bg-primary); border-radius: 8px;">
                        <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 8px;">â€¢ <strong>Sequential access:</strong> Linked List</p>
                        <p style="color: var(--text-secondary); font-size: 0.9rem;">â€¢ <strong>Some random access:</strong> Skip List</p>
                    </div>
                </div>

                <div class="question-card" style="background: linear-gradient(135deg, rgba(255, 152, 0, 0.1), rgba(255, 193, 7, 0.1));">
                    <span class="question-number">Top-K Pattern</span>
                    <h4 class="question-title">Need to track top K elements?</h4>
                    <div style="margin-top: 15px; padding: 15px; background: var(--bg-primary); border-radius: 8px;">
                        <p style="color: var(--accent-warning); font-weight: 600; margin-bottom: 10px;">â†’ Min/Max Heap of size K</p>
                        <p style="color: var(--text-secondary); font-size: 0.9rem;">Perfect for: leaderboards, streaming top-K, priority queues</p>
                    </div>
                </div>

                <div class="question-card" style="background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(124, 58, 237, 0.1));">
                    <span class="question-number">Range Pattern</span>
                    <h4 class="question-title">Need range queries?</h4>
                    <div style="margin-top: 15px; padding: 15px; background: var(--bg-primary); border-radius: 8px;">
                        <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 8px;">â€¢ <strong>Sum queries:</strong> Fenwick Tree</p>
                        <p style="color: var(--text-secondary); font-size: 0.9rem;">â€¢ <strong>Min/Max queries:</strong> Segment Tree</p>
                    </div>
                </div>

                <div class="question-card" style="background: linear-gradient(135deg, rgba(0, 217, 255, 0.1), rgba(255, 152, 0, 0.1));">
                    <span class="question-number">Set Operations Pattern</span>
                    <h4 class="question-title">Fast union/intersection?</h4>
                    <div style="margin-top: 15px; padding: 15px; background: var(--bg-primary); border-radius: 8px;">
                        <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 8px;">â€¢ <strong>Small integers:</strong> Bit Set</p>
                        <p style="color: var(--text-secondary); font-size: 0.9rem;">â€¢ <strong>Large domain:</strong> Hash Set</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Memory-Aware Algorithm Design Patterns -->
        <div class="section" id="algorithm-patterns">
            <div class="section-header">
                <span class="section-icon">âš™ï¸</span>
                <h2 class="section-title">Memory-Aware Algorithm Design Patterns</h2>
            </div>

            <div class="info-box" style="border-color: var(--accent-secondary);">
                <h4 class="info-box-title">ğŸ“ Advanced Techniques (15-30 minutes)</h4>
                <div class="info-box-content">
                    <p>Now that you understand data structure selection, let's explore algorithm patterns that minimize memory usage while maintaining performance.</p>
                </div>
            </div>

            <!-- Pattern 1: In-Place Algorithms -->
            <h3 class="section-subtitle" style="margin-top: 40px;">
                <span style="color: var(--accent-primary);">Pattern 1:</span> In-Place Algorithms (O(1) Space)
            </h3>

            <div class="warning-box">
                <h4 class="info-box-title">ğŸ’¡ Philosophy</h4>
                <div class="info-box-content">
                    <strong>Modify input instead of creating new structures</strong> - Save memory by working directly on the input data.
                </div>
            </div>

            <div style="margin-top: 30px;">
                <h4 style="color: var(--text-primary); margin-bottom: 20px;">Example Problem: Remove Duplicates from Sorted Array</h4>

                <div class="toggle-section">
                    <div class="toggle-header" onclick="toggleContent(this)">
                        <span class="toggle-title">âŒ Naive Approach (O(n) extra space)</span>
                        <span class="toggle-icon">â–¼</span>
                    </div>
                    <div class="toggle-content">
                        <div class="toggle-inner">
                            <div class="code-block">
                                <div class="code-header">
                                    <span class="code-lang">Python - Memory Inefficient</span>
                                    <button class="copy-btn" onclick="copyCode(this)">Copy Code</button>
                                </div>
                                <div class="code-content">
<pre><code><span class="keyword">def</span> <span class="function">remove_duplicates_naive</span>(arr):
    <span class="string">"""Creates new array - wastes memory"""</span>
    result = []
    seen = <span class="function">set</span>()
    
    <span class="keyword">for</span> num <span class="keyword">in</span> arr:
        <span class="keyword">if</span> num <span class="keyword">not</span> <span class="keyword">in</span> seen:
            result.append(num)
            seen.add(num)
    
    <span class="keyword">return</span> result

<span class="comment"># Memory analysis:</span>
<span class="comment"># For arr with 1,000,000 elements:</span>
<span class="comment">#   result array: 1M Ã— 4 bytes = 4 MB</span>
<span class="comment">#   seen set:     1M Ã— 4 bytes = 4 MB</span>
<span class="comment">#   Total extra:  8 MB!</span></code></pre>
                                </div>
                            </div>

                            <div class="visual-diagram" style="margin-top: 20px;">
                                <div class="diagram-title">Memory Layout - Naive Approach</div>
                                <div class="diagram-content">Original Array (4 MB):
[1, 1, 2, 2, 2, 3, 4, 4, 5, 5, ...]

Result Array (4 MB):
[1, 2, 3, 4, 5, ...]  â† New allocation

Seen Set (4 MB):
{1, 2, 3, 4, 5, ...}  â† Hash table overhead

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Total Memory: 4 + 4 + 4 = 12 MB
Extra Memory: 8 MB (200% overhead!)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="toggle-section" style="margin-top: 20px;">
                    <div class="toggle-header" onclick="toggleContent(this)">
                        <span class="toggle-title">âœ… In-Place Approach (O(1) space)</span>
                        <span class="toggle-icon">â–¼</span>
                    </div>
                    <div class="toggle-content">
                        <div class="toggle-inner">
                            <div class="code-block">
                                <div class="code-header">
                                    <span class="code-lang">Python - Memory Efficient</span>
                                    <button class="copy-btn" onclick="copyCode(this)">Copy Code</button>
                                </div>
                                <div class="code-content">
<pre><code><span class="keyword">def</span> <span class="function">remove_duplicates_inplace</span>(arr):
    <span class="string">"""
    Modifies arr in-place, returns new length
    Key insight: Array is sorted, duplicates are adjacent!
    """</span>
    <span class="keyword">if</span> <span class="keyword">not</span> arr:
        <span class="keyword">return</span> <span class="number">0</span>
    
    <span class="comment"># Two pointers technique:</span>
    <span class="comment"># write_pos: where to write next unique element</span>
    <span class="comment"># read_pos: scanning through array</span>
    
    write_pos = <span class="number">1</span>  <span class="comment"># Position 0 is always unique</span>
    
    <span class="keyword">for</span> read_pos <span class="keyword">in</span> <span class="function">range</span>(<span class="number">1</span>, len(arr)):
        <span class="comment"># If current differs from previous unique</span>
        <span class="keyword">if</span> arr[read_pos] != arr[write_pos - <span class="number">1</span>]:
            arr[write_pos] = arr[read_pos]
            write_pos += <span class="number">1</span>
    
    <span class="keyword">return</span> write_pos

<span class="comment"># Memory: O(1) - only two integer variables!</span>
<span class="comment"># Same 1M array: 0 bytes extra (modifies input)</span></code></pre>
                                </div>
                            </div>

                            <div class="visual-diagram" style="margin-top: 20px;">
                                <div class="diagram-title">Step-by-Step Trace: [1, 1, 2, 2, 2, 3, 4, 4]</div>
                                <div class="diagram-content">Initial: write_pos = 1
arr = [1, 1, 2, 2, 2, 3, 4, 4]
       W  R
       â†“  â†“

Step 1 (read_pos=1):
arr[1]=1 == arr[0]=1, SKIP (duplicate)

Step 2 (read_pos=2):
arr[2]=2 != arr[0]=1, WRITE!
arr = [1, 2, 2, 2, 2, 3, 4, 4]
          W     R
          â†“     â†“

Step 3-4 (read_pos=3,4):
arr[3]=2 == arr[1]=2, SKIP
arr[4]=2 == arr[1]=2, SKIP

Step 5 (read_pos=5):
arr[5]=3 != arr[1]=2, WRITE!
arr = [1, 2, 3, 2, 2, 3, 4, 4]
             W        R
             â†“        â†“

Step 6 (read_pos=6):
arr[6]=4 != arr[2]=3, WRITE!
arr = [1, 2, 3, 4, 2, 3, 4, 4]
                W           R
                â†“           â†“

Step 7 (read_pos=7):
arr[7]=4 == arr[3]=4, SKIP

Final Result:
arr = [1, 2, 3, 4, _, _, _, _]
length = 4

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Total Memory: 4 MB (original array)
Extra Memory: 0 bytes! (just 2 integers)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”</div>
                            </div>

                            <div class="success-box" style="margin-top: 20px;">
                                <h4 class="info-box-title" style="color: var(--accent-success);">ğŸ’¡ Key Insight</h4>
                                <div class="info-box-content">
                                    <p><strong>When array is sorted, duplicates are adjacent.</strong></p>
                                    <p style="margin-top: 10px;">We can use two pointers to compress in-place, eliminating the need for extra data structures!</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

            <!-- Pattern 2: Streaming Algorithms -->
            <h3 class="section-subtitle" style="margin-top: 60px;">
                <span style="color: var(--accent-secondary);">Pattern 2:</span> Streaming Algorithms (Process Without Storing All)
            </h3>

            <div class="warning-box">
                <h4 class="info-box-title">ğŸ’¡ Philosophy</h4>
                <div class="info-box-content">
                    <strong>Process data as it arrives, don't store everything</strong> - Handle infinite streams efficiently by maintaining only what's necessary.
                </div>
            </div>

            <div style="margin-top: 30px;">
                <h4 style="color: var(--text-primary); margin-bottom: 20px;">Example Problem: Find Median of Infinite Stream</h4>

                <div class="toggle-section">
                    <div class="toggle-header" onclick="toggleContent(this)">
                        <span class="toggle-title">âŒ Naive Approach (Store Everything)</span>
                        <span class="toggle-icon">â–¼</span>
                    </div>
                    <div class="toggle-content">
                        <div class="toggle-inner">
                            <div class="code-block">
                                <div class="code-header">
                                    <span class="code-lang">Python - Memory Explosive!</span>
                                    <button class="copy-btn" onclick="copyCode(this)">Copy Code</button>
                                </div>
                                <div class="code-content">
<pre><code><span class="keyword">class</span> <span class="function">MedianNaive</span>:
    <span class="keyword">def</span> <span class="function">__init__</span>(self):
        self.numbers = []  <span class="comment"># Store ALL numbers</span>
    
    <span class="keyword">def</span> <span class="function">add_num</span>(self, num):
        self.numbers.append(num)
    
    <span class="keyword">def</span> <span class="function">find_median</span>(self):
        sorted_nums = <span class="function">sorted</span>(self.numbers)  <span class="comment"># O(n log n) every time!</span>
        n = len(sorted_nums)
        <span class="keyword">if</span> n % <span class="number">2</span> == <span class="number">0</span>:
            <span class="keyword">return</span> (sorted_nums[n//<span class="number">2</span>-<span class="number">1</span>] + sorted_nums[n//<span class="number">2</span>]) / <span class="number">2</span>
        <span class="keyword">else</span>:
            <span class="keyword">return</span> sorted_nums[n//<span class="number">2</span>]

<span class="comment"># Problem escalates quickly:</span>
<span class="comment"># After 1 million numbers:</span>
<span class="comment">#   Memory: 1M Ã— 4 bytes = 4 MB</span>
<span class="comment">#   Finding median: O(n log n) = SLOW!</span>
<span class="comment"># </span>
<span class="comment"># After 1 BILLION numbers:</span>
<span class="comment">#   Memory: 4 GB! (Won't fit in RAM)</span>
<span class="comment">#   Finding median: Extremely slow!</span></code></pre>
                                </div>
                            </div>

                            <div class="warning-box" style="margin-top: 20px; border-color: var(--accent-danger);">
                                <h4 class="info-box-title" style="color: var(--accent-danger);">âš ï¸ Fatal Flaws</h4>
                                <div class="info-box-content">
                                    <ul style="list-style: none; padding-left: 0;">
                                        <li style="padding: 5px 0;">âŒ <strong>Unbounded memory growth</strong> - Stores every number forever</li>
                                        <li style="padding: 5px 0;">âŒ <strong>O(n log n) queries</strong> - Re-sorts entire array each time</li>
                                        <li style="padding: 5px 0;">âŒ <strong>Not suitable for streams</strong> - Can't handle infinite data</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="toggle-section" style="margin-top: 20px;">
                    <div class="toggle-header" onclick="toggleContent(this)">
                        <span class="toggle-title">âœ… Streaming Approach (Two Heaps)</span>
                        <span class="toggle-icon">â–¼</span>
                    </div>
                    <div class="toggle-content">
                        <div class="toggle-inner">
                            <div class="info-box" style="border-color: var(--accent-primary);">
                                <h4 class="info-box-title">ğŸ¯ Key Insight</h4>
                                <div class="info-box-content">
                                    <p style="margin-bottom: 10px;"><strong>We don't need ALL numbers sorted!</strong></p>
                                    <p>We only need to know the middle value(s). Two heaps can maintain the "split point" efficiently.</p>
                                </div>
                            </div>

                            <div class="visual-diagram" style="margin-top: 20px;">
                                <div class="diagram-title">Two-Heap Architecture</div>
                                <div class="diagram-content">Stream: [5, 15, 1, 3, 10, 8, 2, ...]
                    â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   Two Heaps Maintain Balance  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â†“
    Max Heap (small)        Min Heap (large)
    [Smaller half]          [Larger half]
         â†“                       â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚    3    â”‚             â”‚    5    â”‚
    â”‚   / \   â”‚             â”‚   / \   â”‚
    â”‚  1   2  â”‚             â”‚  8  10  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†‘                       â†‘
      Max at top              Min at top
    (largest of small)     (smallest of large)

Invariants:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
1. All(small) â‰¤ All(large)
2. |size(small) - size(large)| â‰¤ 1
3. Median = top(s) or avg(top(small), top(large))
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Median is always at the heap tops! O(1) access!</div>
                            </div>

                            <div class="code-block" style="margin-top: 20px;">
                                <div class="code-header">
                                    <span class="code-lang">Python - Optimal Streaming Solution</span>
                                    <button class="copy-btn" onclick="copyCode(this)">Copy Code</button>
                                </div>
                                <div class="code-content">
<pre><code><span class="keyword">import</span> heapq

<span class="keyword">class</span> <span class="function">MedianFinder</span>:
    <span class="string">"""
    Maintain two heaps:
    - Max heap (small): smaller half of numbers
    - Min heap (large): larger half of numbers
    
    Invariants:
    - All numbers in small â‰¤ all numbers in large
    - |size(small) - size(large)| â‰¤ 1
    - Median is at top of heaps!
    """</span>
    
    <span class="keyword">def</span> <span class="function">__init__</span>(self):
        self.small = []  <span class="comment"># Max heap (negate for Python's min heap)</span>
        self.large = []  <span class="comment"># Min heap</span>
    
    <span class="keyword">def</span> <span class="function">add_num</span>(self, num):
        <span class="string">"""Add number: O(log n) - only maintain heaps"""</span>
        
        <span class="comment"># Step 1: Add to appropriate heap</span>
        <span class="keyword">if</span> <span class="keyword">not</span> self.small <span class="keyword">or</span> num <= -self.small[<span class="number">0</span>]:
            heapq.<span class="function">heappush</span>(self.small, -num)  <span class="comment"># Negate for max heap</span>
        <span class="keyword">else</span>:
            heapq.<span class="function">heappush</span>(self.large, num)
        
        <span class="comment"># Step 2: Rebalance if needed</span>
        <span class="keyword">if</span> len(self.small) > len(self.large) + <span class="number">1</span>:
            <span class="comment"># small has too many, move largest to large</span>
            val = -heapq.<span class="function">heappop</span>(self.small)
            heapq.<span class="function">heappush</span>(self.large, val)
        <span class="keyword">elif</span> len(self.large) > len(self.small):
            <span class="comment"># large has too many, move smallest to small</span>
            val = heapq.<span class="function">heappop</span>(self.large)
            heapq.<span class="function">heappush</span>(self.small, -val)
    
    <span class="keyword">def</span> <span class="function">find_median</span>(self):
        <span class="string">"""Get median: O(1) - just peek at heap tops!"""</span>
        <span class="keyword">if</span> len(self.small) > len(self.large):
            <span class="keyword">return</span> -self.small[<span class="number">0</span>]  <span class="comment"># Un-negate</span>
        <span class="keyword">else</span>:
            <span class="keyword">return</span> (-self.small[<span class="number">0</span>] + self.large[<span class="number">0</span>]) / <span class="number">2</span>

<span class="comment"># Example usage with 1 billion numbers:</span>
<span class="comment"># Memory: Still just stores all numbers (4 GB)</span>
<span class="comment"># But find_median is O(1) instead of O(n log n)!</span>
<span class="comment"># And heaps maintain partial order (cheaper than sorting)</span></code></pre>
                                </div>
                            </div>

                            <div class="visual-diagram" style="margin-top: 20px;">
                                <div class="diagram-title">Step-by-Step Trace: Adding [5, 15, 1, 3]</div>
                                <div class="diagram-content">Add 5:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
small: [5]  (stored as [-5])
large: []
median = 5 âœ“

Add 15:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
15 > 5, goes to large
small: [5]
large: [15]
median = (5 + 15) / 2 = 10 âœ“

Add 1:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
1 â‰¤ 5, goes to small
small: [5, 1] â†’ heapified to [5, 1]
large: [15]
âš ï¸ Unbalanced! len(small)=2, len(large)=1

Rebalance: Move 5 to large
small: [1]
large: [5, 15] â†’ heapified to [5, 15]
median = 5 âœ“

Add 3:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
3 > 1 and 3 < 5, goes to large
small: [1]
large: [3, 5, 15] â†’ heapified to [3, 5, 15]
âš ï¸ Unbalanced! len(large)=3, len(small)=1

Rebalance: Move 3 to small
small: [1, 3] â†’ heapified to [3, 1]
large: [5, 15]
median = (3 + 5) / 2 = 4 âœ“

Final State:
small: [3, 1]  (max heap, 3 on top)
large: [5, 15] (min heap, 5 on top)
Median = (3 + 5) / 2 = 4</div>
                            </div>

                            <div class="success-box" style="margin-top: 20px;">
                                <h4 class="info-box-title" style="color: var(--accent-success);">ğŸ¯ Performance Benefits</h4>
                                <div class="info-box-content">
                                    <table style="width: 100%; margin-top: 10px;">
                                        <tr style="border-bottom: 1px solid rgba(255,255,255,0.1);">
                                            <td style="padding: 8px;"><strong>Operation</strong></td>
                                            <td style="padding: 8px;"><strong>Naive</strong></td>
                                            <td style="padding: 8px;"><strong>Two Heaps</strong></td>
                                        </tr>
                                        <tr>
                                            <td style="padding: 8px;">Add number</td>
                                            <td style="padding: 8px; color: var(--accent-danger);">O(1)</td>
                                            <td style="padding: 8px; color: var(--accent-success);">O(log n)</td>
                                        </tr>
                                        <tr>
                                            <td style="padding: 8px;">Find median</td>
                                            <td style="padding: 8px; color: var(--accent-danger);">O(n log n)</td>
                                            <td style="padding: 8px; color: var(--accent-success);">O(1)</td>
                                        </tr>
                                        <tr>
                                            <td style="padding: 8px;">Space</td>
                                            <td style="padding: 8px;">O(n) + sorting temp</td>
                                            <td style="padding: 8px; color: var(--accent-success);">O(n) - no extra!</td>
                                        </tr>
                                    </table>
                                    <p style="margin-top: 15px; color: var(--accent-success); font-weight: 600;">
                                        ğŸ’¡ For 1 million queries on 1 million numbers:<br>
                                        Naive: ~20 minutes | Two Heaps: ~1 second (1200x faster!)
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

            <!-- Pattern 3: Space-Time Tradeoff -->
            <h3 class="section-subtitle" style="margin-top: 60px;">
                <span style="color: var(--accent-warning);">Pattern 3:</span> Space-Time Tradeoff (Memoization)
            </h3>

            <div class="warning-box">
                <h4 class="info-box-title">ğŸ’¡ Philosophy</h4>
                <div class="info-box-content">
                    <strong>Trade memory for speed by caching results</strong> - Sometimes spending memory to store computed values can dramatically reduce time complexity.
                </div>
            </div>

            <div style="margin-top: 30px;">
                <h4 style="color: var(--text-primary); margin-bottom: 20px;">Example Problem: Fibonacci Sequence</h4>

                <div class="toggle-section">
                    <div class="toggle-header" onclick="toggleContent(this)">
                        <span class="toggle-title">âŒ Naive Recursion (Exponential Time!)</span>
                        <span class="toggle-icon">â–¼</span>
                    </div>
                    <div class="toggle-content">
                        <div class="toggle-inner">
                            <div class="code-block">
                                <div class="code-header">
                                    <span class="code-lang">Python - Exponentially Slow!</span>
                                    <button class="copy-btn" onclick="copyCode(this)">Copy Code</button>
                                </div>
                                <div class="code-content">
<pre><code><span class="keyword">def</span> <span class="function">fib_naive</span>(n):
    <span class="keyword">if</span> n <= <span class="number">1</span>:
        <span class="keyword">return</span> n
    <span class="keyword">return</span> <span class="function">fib_naive</span>(n-<span class="number">1</span>) + <span class="function">fib_naive</span>(n-<span class="number">2</span>)

<span class="comment"># Performance breakdown:</span>
<span class="comment"># fib(30): ~1 second</span>
<span class="comment"># fib(40): ~30 seconds</span>
<span class="comment"># fib(50): ~20 MINUTES!</span>
<span class="comment"># fib(100): Would take MILLIONS of years!</span></code></pre>
                                </div>
                            </div>

                            <div class="visual-diagram" style="margin-top: 20px;">
                                <div class="diagram-title">Call Tree for fib(5) - Massive Redundancy!</div>
                                <div class="diagram-content">                    fib(5)
                   /      \
              fib(4)      fib(3)
             /     \      /    \
        fib(3)   fib(2) fib(2) fib(1)
        /   \    /   \  /   \
    fib(2) fib(1) fib(1) fib(0) fib(1) fib(0)
    /   \
fib(1) fib(0)

Problem: Redundant Calculations!
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
fib(3) calculated: 2 times
fib(2) calculated: 3 times
fib(1) calculated: 5 times
fib(0) calculated: 3 times

Total calls for fib(5): 15 function calls
Total calls for fib(50): 40 BILLION calls!

Time Complexity: O(2^n) - Exponential!
Space Complexity: O(n) - Max recursion depth</div>
                            </div>

                            <div class="warning-box" style="margin-top: 20px; border-color: var(--accent-danger);">
                                <h4 class="info-box-title" style="color: var(--accent-danger);">âš ï¸ Why It's Catastrophic</h4>
                                <div class="info-box-content">
                                    <ul style="list-style: none; padding-left: 0;">
                                        <li style="padding: 5px 0;">âŒ <strong>Exponential time:</strong> O(2^n) - doubles with each increment</li>
                                        <li style="padding: 5px 0;">âŒ <strong>Redundant work:</strong> Recalculates same values repeatedly</li>
                                        <li style="padding: 5px 0;">âŒ <strong>Unusable for large n:</strong> fib(50) takes 20 minutes!</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="toggle-section" style="margin-top: 20px;">
                    <div class="toggle-header" onclick="toggleContent(this)">
                        <span class="toggle-title">âš¡ Memoization (Trade Space for Speed)</span>
                        <span class="toggle-icon">â–¼</span>
                    </div>
                    <div class="toggle-content">
                        <div class="toggle-inner">
                            <div class="info-box" style="border-color: var(--accent-warning);">
                                <h4 class="info-box-title">ğŸ¯ Key Insight</h4>
                                <div class="info-box-content">
                                    <p><strong>Cache computed results to avoid recalculation!</strong></p>
                                    <p style="margin-top: 10px;">Each Fibonacci number is computed exactly once, then retrieved from cache in O(1).</p>
                                </div>
                            </div>

                            <div class="code-block" style="margin-top: 20px;">
                                <div class="code-header">
                                    <span class="code-lang">Python - With Memoization</span>
                                    <button class="copy-btn" onclick="copyCode(this)">Copy Code</button>
                                </div>
                                <div class="code-content">
<pre><code><span class="keyword">def</span> <span class="function">fib_memo</span>(n, cache=<span class="keyword">None</span>):
    <span class="keyword">if</span> cache <span class="keyword">is</span> <span class="keyword">None</span>:
        cache = {}
    
    <span class="comment"># Check cache first - O(1) lookup!</span>
    <span class="keyword">if</span> n <span class="keyword">in</span> cache:
        <span class="keyword">return</span> cache[n]
    
    <span class="comment"># Base case</span>
    <span class="keyword">if</span> n <= <span class="number">1</span>:
        <span class="keyword">return</span> n
    
    <span class="comment"># Calculate and cache</span>
    result = <span class="function">fib_memo</span>(n-<span class="number">1</span>, cache) + <span class="function">fib_memo</span>(n-<span class="number">2</span>, cache)
    cache[n] = result
    
    <span class="keyword">return</span> result

<span class="comment"># Performance transformed:</span>
<span class="comment"># fib(50):  Instant!</span>
<span class="comment"># fib(100): Instant!</span>
<span class="comment"># fib(1000): Still instant!</span>

<span class="comment"># Memory cost:</span>
<span class="comment"># fib(100): 100 entries Ã— 16 bytes = 1.6 KB</span>
<span class="comment"># Plus recursion stack: ~5 KB</span>
<span class="comment"># Total: ~7 KB for instant result!</span></code></pre>
                                </div>
                            </div>

                            <div class="visual-diagram" style="margin-top: 20px;">
                                <div class="diagram-title">Call Tree with Memoization - No Redundancy!</div>
                                <div class="diagram-content">fib(5): cache miss, compute
  fib(4): cache miss, compute
    fib(3): cache miss, compute
      fib(2): cache miss, compute
        fib(1): base case â†’ 1
        fib(0): base case â†’ 0
      cache[2] = 1 âœ“
      fib(1): base case â†’ 1
    cache[3] = 2 âœ“
    fib(2): CACHE HIT! â†’ 1 (no recursion!)
  cache[4] = 3 âœ“
  fib(3): CACHE HIT! â†’ 2 (no recursion!)
cache[5] = 5 âœ“

Each fib(n) computed EXACTLY ONCE!
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
fib(5): 9 calls â†’ 9 calls (same)
fib(50): 40 billion â†’ 50 calls (800 million x faster!)

Time Complexity: O(n) - Linear!
Space Complexity: O(n) - Cache + stack</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="toggle-section" style="margin-top: 20px;">
                    <div class="toggle-header" onclick="toggleContent(this)">
                        <span class="toggle-title">âœ… Iterative (Best of Both Worlds: O(n) time, O(1) space)</span>
                        <span class="toggle-icon">â–¼</span>
                    </div>
                    <div class="toggle-content">
                        <div class="toggle-inner">
                            <div class="info-box" style="border-color: var(--accent-success);">
                                <h4 class="info-box-title">ğŸ¯ Ultimate Optimization</h4>
                                <div class="info-box-content">
                                    <p><strong>We only need the last two values at any time!</strong></p>
                                    <p style="margin-top: 10px;">No cache needed - just two variables rolling forward.</p>
                                </div>
                            </div>

                            <div class="code-block" style="margin-top: 20px;">
                                <div class="code-header">
                                    <span class="code-lang">Python - Optimal Solution</span>
                                    <button class="copy-btn" onclick="copyCode(this)">Copy Code</button>
                                </div>
                                <div class="code-content">
<pre><code><span class="keyword">def</span> <span class="function">fib_optimal</span>(n):
    <span class="keyword">if</span> n <= <span class="number">1</span>:
        <span class="keyword">return</span> n
    
    prev, curr = <span class="number">0</span>, <span class="number">1</span>
    
    <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="function">range</span>(<span class="number">2</span>, n + <span class="number">1</span>):
        prev, curr = curr, prev + curr
    
    <span class="keyword">return</span> curr

<span class="comment"># Time: O(n) - single loop</span>
<span class="comment"># Space: O(1) - only two variables!</span>

<span class="comment"># Memory usage:</span>
<span class="comment"># fib(100): 16 bytes (two 8-byte integers)</span>
<span class="comment"># fib(1000): Still 16 bytes!</span></code></pre>
                                </div>
                            </div>

                            <div class="visual-diagram" style="margin-top: 20px;">
                                <div class="diagram-title">Iterative Process - Rolling Window</div>
                                <div class="diagram-content">Computing fib(7):

Initial: prev=0, curr=1

Loop iteration 1 (n=2):
prev=1, curr=1  (0+1)

Loop iteration 2 (n=3):
prev=1, curr=2  (1+1)

Loop iteration 3 (n=4):
prev=2, curr=3  (1+2)

Loop iteration 4 (n=5):
prev=3, curr=5  (2+3)

Loop iteration 5 (n=6):
prev=5, curr=8  (3+5)

Loop iteration 6 (n=7):
prev=8, curr=13 (5+8)

Result: 13 âœ“

Memory at any point: Just 2 integers = 16 bytes!
No cache, no recursion stack, no wasted memory!</div>
                            </div>
                        </div>
                    </div>
                </div>

                <h4 style="color: var(--text-primary); margin-top: 40px; margin-bottom: 20px;">ğŸ“Š Comprehensive Comparison</h4>

                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>Approach</th>
                            <th>Time</th>
                            <th>Space</th>
                            <th>fib(50)</th>
                            <th>When to Use</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Naive Recursion</strong></td>
                            <td style="color: var(--accent-danger);">O(2^n)</td>
                            <td style="color: var(--accent-success);">O(n)</td>
                            <td style="color: var(--accent-danger);">20 minutes</td>
                            <td>Never (unless n &lt; 20)</td>
                        </tr>
                        <tr>
                            <td><strong>Memoization</strong></td>
                            <td style="color: var(--accent-success);">O(n)</td>
                            <td style="color: var(--accent-warning);">O(n)</td>
                            <td style="color: var(--accent-success);">Instant (400 bytes)</td>
                            <td>Multiple related subproblems</td>
                        </tr>
                        <tr>
                            <td><strong>Iterative</strong></td>
                            <td style="color: var(--accent-success);">O(n)</td>
                            <td style="color: var(--accent-success);">O(1)</td>
                            <td style="color: var(--accent-success);">Instant (16 bytes)</td>
                            <td><strong>BEST:</strong> Just need final answer</td>
                        </tr>
                    </tbody>
                </table>

                <div class="success-box" style="margin-top: 30px;">
                    <h4 class="info-box-title" style="color: var(--accent-success);">ğŸ’¡ Decision Guidelines</h4>
                    <div class="info-box-content">
                        <ul style="list-style: none; padding-left: 0;">
                            <li style="padding: 8px 0;">
                                <strong style="color: var(--accent-danger);">âŒ Naive:</strong> Never use (unless n &lt; 20 and code simplicity is critical)
                            </li>
                            <li style="padding: 8px 0;">
                                <strong style="color: var(--accent-warning);">âš¡ Memoization:</strong> When you need to cache multiple related subproblems (dynamic programming)
                            </li>
                            <li style="padding: 8px 0;">
                                <strong style="color: var(--accent-success);">âœ“ Iterative:</strong> When you only need the final answer (most cases)
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

  

            <!-- Pattern 4: Lazy Evaluation -->
            <h3 class="section-subtitle" style="margin-top: 60px;">
                <span style="color: #ff6b6b;">Pattern 4:</span> Lazy Evaluation (Don't Compute Until Needed)
            </h3>

            <div class="warning-box">
                <h4 class="info-box-title">ğŸ’¡ Philosophy</h4>
                <div class="info-box-content">
                    <strong>Delay computation until results are actually needed</strong> - Generate values on-demand instead of computing everything upfront. This can save massive amounts of memory and avoid wasted computation.
                </div>
            </div>

            <div style="margin-top: 30px;">
                <h4 style="color: var(--text-primary); margin-bottom: 20px;">Example Problem: Generate All Permutations</h4>

                <div class="toggle-section">
                    <div class="toggle-header" onclick="toggleContent(this)">
                        <span class="toggle-title">âŒ Eager Approach (Generate All Upfront)</span>
                        <span class="toggle-icon">â–¼</span>
                    </div>
                    <div class="toggle-content">
                        <div class="toggle-inner">
                            <div class="code-block">
                                <div class="code-header">
                                    <span class="code-lang">Python - Eager Generation (Memory Explosive)</span>
                                    <button class="copy-btn" onclick="copyCode(this)">Copy Code</button>
                                </div>
                                <div class="code-content">
<pre><code><span class="keyword">def</span> <span class="function">permutations_eager</span>(arr):
    <span class="string">"""Generate all permutations upfront"""</span>
    <span class="keyword">if</span> len(arr) <= <span class="number">1</span>:
        <span class="keyword">return</span> [arr]
    
    result = []
    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="function">range</span>(len(arr)):
        rest = arr[:i] + arr[i+<span class="number">1</span>:]
        <span class="keyword">for</span> perm <span class="keyword">in</span> <span class="function">permutations_eager</span>(rest):
            result.append([arr[i]] + perm)
    
    <span class="keyword">return</span> result

<span class="comment"># Usage</span>
perms = <span class="function">permutations_eager</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>])
<span class="function">print</span>(<span class="string">f"Generated </span>{len(perms)}<span class="string"> permutations"</span>)  <span class="comment"># 120 permutations</span>

<span class="comment"># For array of length 10:</span>
<span class="comment"># 10! = 3,628,800 permutations</span>
<span class="comment"># Each permutation: 10 integers Ã— 4 bytes = 40 bytes</span>
<span class="comment"># Total memory: 3,628,800 Ã— 40 = 145 MB!</span>

<span class="comment"># For array of length 12:</span>
<span class="comment"># 12! = 479,001,600 permutations</span>
<span class="comment"># Total memory: 19 GB! (Won't fit in RAM)</span></code></pre>
                                </div>
                            </div>

                            <div class="visual-diagram" style="margin-top: 20px;">
                                <div class="diagram-title">Memory Explosion with Eager Generation</div>
                                <div class="diagram-content">Array length vs Memory Required:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
n=5:   5! = 120         â†’    5 KB
n=6:   6! = 720         â†’   29 KB
n=7:   7! = 5,040       â†’  201 KB
n=8:   8! = 40,320      â†’  1.6 MB
n=9:   9! = 362,880     â†’   14 MB
n=10: 10! = 3,628,800   â†’  145 MB âš ï¸
n=11: 11! = 39,916,800  â†’  1.6 GB âš ï¸âš ï¸
n=12: 12! = 479,001,600 â†’   19 GB âš ï¸âš ï¸âš ï¸ (RAM overflow!)

Problem: Memory grows FACTORIALLY!

All permutations stored in memory:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [[1,2,3], [1,3,2], [2,1,3], ...]  â”‚ â† 120 arrays in RAM
â”‚                                    â”‚   for n=5
â”‚ Total: 3.6 MILLION arrays for n=10â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Even if you only need the FIRST valid permutation,
you still generate ALL of them!</div>
                            </div>

                            <div class="warning-box" style="margin-top: 20px; border-color: var(--accent-danger);">
                                <h4 class="info-box-title" style="color: var(--accent-danger);">âš ï¸ Fatal Flaws</h4>
                                <div class="info-box-content">
                                    <ul style="list-style: none; padding-left: 0;">
                                        <li style="padding: 5px 0;">âŒ <strong>Factorial memory growth:</strong> n=12 requires 19 GB RAM</li>
                                        <li style="padding: 5px 0;">âŒ <strong>Wasted computation:</strong> Generates all even if you only need one</li>
                                        <li style="padding: 5px 0;">âŒ <strong>Startup delay:</strong> Must generate everything before use</li>
                                        <li style="padding: 5px 0;">âŒ <strong>Cannot process large inputs:</strong> n=15+ is impossible</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="toggle-section" style="margin-top: 20px;">
                    <div class="toggle-header" onclick="toggleContent(this)">
                        <span class="toggle-title">âœ… Lazy Approach (Generator - On-Demand)</span>
                        <span class="toggle-icon">â–¼</span>
                    </div>
                    <div class="toggle-content">
                        <div class="toggle-inner">
                            <div class="info-box" style="border-color: #ff6b6b;">
                                <h4 class="info-box-title" style="color: #ff6b6b;">ğŸ¯ Key Insight</h4>
                                <div class="info-box-content">
                                    Use Python generators (<code>yield</code>) to produce permutations one at a time. Each permutation exists only when needed, then is garbage collected. Memory stays constant!
                                </div>
                            </div>

                            <div class="code-block" style="margin-top: 20px;">
                                <div class="code-header">
                                    <span class="code-lang">Python - Lazy Generator (Constant Memory)</span>
                                    <button class="copy-btn" onclick="copyCode(this)">Copy Code</button>
                                </div>
                                <div class="code-content">
<pre><code><span class="keyword">def</span> <span class="function">permutations_lazy</span>(arr):
    <span class="string">"""Generate permutations one at a time"""</span>
    <span class="keyword">if</span> len(arr) <= <span class="number">1</span>:
        <span class="keyword">yield</span> arr
        <span class="keyword">return</span>
    
    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="function">range</span>(len(arr)):
        rest = arr[:i] + arr[i+<span class="number">1</span>:]
        <span class="keyword">for</span> perm <span class="keyword">in</span> <span class="function">permutations_lazy</span>(rest):
            <span class="keyword">yield</span> [arr[i]] + perm  <span class="comment"># Generate on-demand!</span>

<span class="comment"># Usage: Find first valid permutation</span>
<span class="keyword">for</span> perm <span class="keyword">in</span> <span class="function">permutations_lazy</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]):
    <span class="keyword">if</span> <span class="function">is_valid</span>(perm):  <span class="comment"># Check some condition</span>
        <span class="function">print</span>(<span class="string">f"Found: </span>{perm}<span class="string">"</span>)
        <span class="keyword">break</span>  <span class="comment"># Stop! Never generates remaining 119 permutations</span>

<span class="comment"># Memory analysis:</span>
<span class="comment"># For array of length 10:</span>
<span class="comment">#   Eager:  145 MB (all 3.6M permutations)</span>
<span class="comment">#   Lazy:   40 bytes (current permutation only!)</span>
<span class="comment">#   Savings: 3,625x less memory!</span>

<span class="comment"># Can now process n=12, n=15, even n=20!</span>
<span class="comment"># Memory stays constant at ~40 bytes</span></code></pre>
                                </div>
                            </div>

                            <div class="visual-diagram" style="margin-top: 20px;">
                                <div class="diagram-title">Generator Execution Flow</div>
                                <div class="diagram-content">Generator State Machine:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Call next():
  â”œâ”€ Generate [1,2,3] â”€â”€â”€â”€â”€â–º Yield to caller
  â”‚                          (caller processes)
  â”œâ”€ Resume here â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”œâ”€ Generate [1,3,2] â”€â”€â”€â”€â”€â–º Yield to caller
  â”‚                          (caller processes)
  â”œâ”€ Resume here â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”œâ”€ Generate [2,1,3] â”€â”€â”€â”€â”€â–º Yield to caller
  â””â”€ ...

Memory at any point:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Current: [1,2,3]  (40 bytes)  â”‚ â† Only ONE in memory
â”‚ Generator state: (small stack)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Total: ~100 bytes (vs 145 MB eager!)

When caller calls break:
  â†’ Generator stops
  â†’ Remaining 117 permutations NEVER generated
  â†’ Massive computation saved!</div>
                            </div>

                            <div class="success-box" style="margin-top: 20px;">
                                <h4 class="info-box-title" style="color: var(--accent-success);">ğŸ¯ Performance Impact</h4>
                                <div class="info-box-content">
                                    <table style="width: 100%; margin-top: 10px;">
                                        <tr style="border-bottom: 1px solid rgba(255,255,255,0.1);">
                                            <td style="padding: 8px;"><strong>Array Length</strong></td>
                                            <td style="padding: 8px;"><strong>Eager Memory</strong></td>
                                            <td style="padding: 8px;"><strong>Lazy Memory</strong></td>
                                            <td style="padding: 8px;"><strong>Savings</strong></td>
                                        </tr>
                                        <tr>
                                            <td style="padding: 8px;">n=10</td>
                                            <td style="padding: 8px; color: var(--accent-danger);">145 MB</td>
                                            <td style="padding: 8px; color: var(--accent-success);">40 bytes</td>
                                            <td style="padding: 8px; color: var(--accent-success);">3,625x</td>
                                        </tr>
                                        <tr>
                                            <td style="padding: 8px;">n=12</td>
                                            <td style="padding: 8px; color: var(--accent-danger);">19 GB (crash)</td>
                                            <td style="padding: 8px; color: var(--accent-success);">48 bytes</td>
                                            <td style="padding: 8px; color: var(--accent-success);">âˆ (impossible vs possible)</td>
                                        </tr>
                                        <tr>
                                            <td style="padding: 8px;">n=15</td>
                                            <td style="padding: 8px; color: var(--accent-danger);">Impossible</td>
                                            <td style="padding: 8px; color: var(--accent-success);">60 bytes</td>
                                            <td style="padding: 8px; color: var(--accent-success);">Enables solution!</td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <h4 style="color: var(--text-primary); margin-top: 40px; margin-bottom: 20px;">ğŸŒ Real-World Example: Reading Large Files</h4>

                <div class="toggle-section">
                    <div class="toggle-header" onclick="toggleContent(this)">
                        <span class="toggle-title">âŒ Eager File Reading (Memory Bomb)</span>
                        <span class="toggle-icon">â–¼</span>
                    </div>
                    <div class="toggle-content">
                        <div class="toggle-inner">
                            <div class="code-block">
                                <div class="code-header">
                                    <span class="code-lang">Python - Load Entire File</span>
                                    <button class="copy-btn" onclick="copyCode(this)">Copy Code</button>
                                </div>
                                <div class="code-content">
<pre><code><span class="keyword">def</span> <span class="function">process_file_eager</span>(filename):
    <span class="string">"""BAD: Loads entire file into memory"""</span>
    <span class="keyword">with</span> <span class="function">open</span>(filename, <span class="string">'r'</span>) <span class="keyword">as</span> f:
        lines = f.readlines()  <span class="comment"># âš ï¸ Loads ALL lines into memory!</span>
    
    <span class="keyword">for</span> line <span class="keyword">in</span> lines:
        <span class="function">process</span>(line)

<span class="comment"># If file is 10 GB: Need 10 GB RAM!</span>
<span class="comment"># If file is 100 GB: Crash!</span></code></pre>
                                </div>
                            </div>

                            <div class="visual-diagram" style="margin-top: 20px;">
                                <div class="diagram-title">Memory Usage for 10 GB Log File</div>
                                <div class="diagram-content">File: server.log (10 GB, 100 million lines)

Eager Loading:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Step 1: f.readlines() executes
  â”œâ”€ Reads ALL 100 million lines
  â”œâ”€ Stores in memory as list
  â””â”€ Time: ~60 seconds

Memory State:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ lines = [                          â”‚
â”‚   "Line 1...",    â† 100 bytes      â”‚
â”‚   "Line 2...",    â† 100 bytes      â”‚
â”‚   "Line 3...",    â† 100 bytes      â”‚
â”‚   ...                               â”‚
â”‚   "Line 100M..."  â† 100 bytes      â”‚
â”‚ ]                                   â”‚
â”‚ Total: 10 GB in RAM! âš ï¸âš ï¸âš ï¸         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Problems:
âŒ Requires 10 GB free RAM
âŒ 60 second startup delay
âŒ Cannot process files larger than RAM
âŒ Wastes memory if you stop early</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="toggle-section" style="margin-top: 20px;">
                    <div class="toggle-header" onclick="toggleContent(this)">
                        <span class="toggle-title">âœ… Lazy File Reading (Streaming)</span>
                        <span class="toggle-icon">â–¼</span>
                    </div>
                    <div class="toggle-content">
                        <div class="toggle-inner">
                            <div class="code-block">
                                <div class="code-header">
                                    <span class="code-lang">Python - Stream Line by Line</span>
                                    <button class="copy-btn" onclick="copyCode(this)">Copy Code</button>
                                </div>
                                <div class="code-content">
<pre><code><span class="keyword">def</span> <span class="function">process_file_lazy</span>(filename):
    <span class="string">"""GOOD: Reads line by line"""</span>
    <span class="keyword">with</span> <span class="function">open</span>(filename, <span class="string">'r'</span>) <span class="keyword">as</span> f:
        <span class="keyword">for</span> line <span class="keyword">in</span> f:  <span class="comment"># âœ“ Yields one line at a time!</span>
            <span class="function">process</span>(line)
            
            <span class="comment"># Can even stop early:</span>
            <span class="keyword">if</span> <span class="function">found_what_we_need</span>(line):
                <span class="keyword">break</span>  <span class="comment"># Rest of file never loaded!</span>

<span class="comment"># If file is 10 GB: Need only ~1 KB RAM (one line)</span>
<span class="comment"># If file is 100 GB: Still only ~1 KB RAM!</span>
<span class="comment"># Can process files larger than your total RAM!</span></code></pre>
                                </div>
                            </div>

                            <div class="visual-diagram" style="margin-top: 20px;">
                                <div class="diagram-title">Streaming Execution (Same 10 GB File)</div>
                                <div class="diagram-content">Lazy Loading with Generator:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Iteration 1:
  â”œâ”€ Read line 1 from disk (100 bytes)
  â”œâ”€ Process line 1
  â””â”€ Discard line 1 (garbage collected)

Iteration 2:
  â”œâ”€ Read line 2 from disk (100 bytes)
  â”œâ”€ Process line 2
  â””â”€ Discard line 2

...

Iteration N:
  â”œâ”€ Found target! Break loop
  â””â”€ Remaining 99,999,000 lines NEVER READ

Memory at any point:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Current line: "..." (100 bytes)   â”‚ â† Only ONE line
â”‚ File handle:  (small buffer)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
Total: ~1 KB (vs 10 GB eager!)

Performance:
âœ“ Starts processing immediately
âœ“ Constant memory (1 KB)
âœ“ Can handle infinite streams
âœ“ Stops early if target found</div>
                            </div>

                            <div class="success-box" style="margin-top: 20px;">
                                <h4 class="info-box-title" style="color: var(--accent-success);">ğŸ’¡ When Lazy Evaluation Shines</h4>
                                <div class="info-box-content">
                                    <ul style="list-style: none; padding-left: 0;">
                                        <li style="padding: 8px 0;">
                                            <strong style="color: var(--accent-success);">âœ“ Large datasets:</strong> Files, logs, database results larger than RAM
                                        </li>
                                        <li style="padding: 8px 0;">
                                            <strong style="color: var(--accent-success);">âœ“ Search problems:</strong> Stop when you find what you need
                                        </li>
                                        <li style="padding: 8px 0;">
                                            <strong style="color: var(--accent-success);">âœ“ Infinite sequences:</strong> Prime numbers, Fibonacci, continuous data streams
                                        </li>
                                        <li style="padding: 8px 0;">
                                            <strong style="color: var(--accent-success);">âœ“ Pipeline processing:</strong> Chain multiple transformations without materializing
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

            <!-- Pattern 5: Sliding Window -->
            <h3 class="section-subtitle" style="margin-top: 60px;">
                <span style="color: #f59e0b;">Pattern 5:</span> Sliding Window (Reuse Computation)
            </h3>

            <div class="warning-box">
                <h4 class="info-box-title">ğŸ’¡ Philosophy</h4>
                <div class="info-box-content">
                    <strong>Don't recalculate from scratch; update incrementally</strong> - When processing overlapping windows of data, reuse the computation from the previous window. This can reduce complexity from O(nÃ—k) to O(n).
                </div>
            </div>

            <div style="margin-top: 30px;">
                <h4 style="color: var(--text-primary); margin-bottom: 20px;">Example Problem: Maximum Sum Subarray of Size K</h4>

                <div class="toggle-section">
                    <div class="toggle-header" onclick="toggleContent(this)">
                        <span class="toggle-title">âŒ Naive Approach (Recalculate Each Window)</span>
                        <span class="toggle-icon">â–¼</span>
                    </div>
                    <div class="toggle-content">
                        <div class="toggle-inner">
                            <div class="code-block">
                                <div class="code-header">
                                    <span class="code-lang">Python - Recalculate Every Window</span>
                                    <button class="copy-btn" onclick="copyCode(this)">Copy Code</button>
                                </div>
                                <div class="code-content">
<pre><code><span class="keyword">def</span> <span class="function">max_sum_naive</span>(arr, k):
    <span class="string">"""Calculate sum of every window from scratch"""</span>
    max_sum = <span class="function">float</span>(<span class="string">'-inf'</span>)
    
    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="function">range</span>(len(arr) - k + <span class="number">1</span>):
        <span class="comment"># Calculate sum of window [i, i+k-1]</span>
        current_sum = <span class="number">0</span>
        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="function">range</span>(i, i + k):
            current_sum += arr[j]  <span class="comment"># âš ï¸ Redundant computation!</span>
        
        max_sum = <span class="function">max</span>(max_sum, current_sum)
    
    <span class="keyword">return</span> max_sum

<span class="comment"># Example: arr = [1, 2, 3, 4, 5], k = 3</span>
<span class="comment"># i=0: sum(1,2,3) = 6    (3 operations)</span>
<span class="comment"># i=1: sum(2,3,4) = 9    (3 operations) â† Recalculated 2+3!</span>
<span class="comment"># i=2: sum(3,4,5) = 12   (3 operations) â† Recalculated 3+4!</span>
<span class="comment"># Total: 9 operations</span>

<span class="comment"># Time Complexity: O(n Ã— k)</span>
<span class="comment"># For n=1,000,000, k=10,000:</span>
<span class="comment"># 1,000,000 Ã— 10,000 = 10 BILLION operations! âš ï¸</span></code></pre>
                                </div>
                            </div>

                            <div class="visual-diagram" style="margin-top: 20px;">
                                <div class="diagram-title">Redundant Computation Visualized</div>
                                <div class="diagram-content">Array: [1, 2, 3, 4, 5], k=3

Window 1 (i=0):
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ 1  2  3 â”‚ 4  5
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  Calculate: 1+2+3 = 6  (3 additions)

Window 2 (i=1):
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  1  â”‚ 2  3  4 â”‚ 5
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  Calculate: 2+3+4 = 9  (3 additions)
  âš ï¸ We already knew 2+3=5 from Window 1!
  âš ï¸ Only needed to subtract 1, add 4

Window 3 (i=2):
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  1  2  â”‚ 3  4  5 â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  Calculate: 3+4+5 = 12 (3 additions)
  âš ï¸ We already knew 3+4=7 from Window 2!
  âš ï¸ Only needed to subtract 2, add 5

Total Operations: 9 additions
Wasted Work: 6 additions (66% redundant!)

For large k, this becomes catastrophic!</div>
                            </div>

                            <div class="warning-box" style="margin-top: 20px; border-color: var(--accent-danger);">
                                <h4 class="info-box-title" style="color: var(--accent-danger);">âš ï¸ Performance Problem</h4>
                                <div class="info-box-content">
                                    For n=1,000,000 and k=10,000:
                                    <ul style="list-style: none; padding-left: 0; margin-top: 10px;">
                                        <li style="padding: 5px 0;">âŒ <strong>Operations:</strong> 10 billion additions</li>
                                        <li style="padding: 5px 0;">âŒ <strong>Time:</strong> ~30 seconds on modern CPU</li>
                                        <li style="padding: 5px 0;">âŒ <strong>Redundant work:</strong> 99.99% of computation is repeated!</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="toggle-section" style="margin-top: 20px;">
                    <div class="toggle-header" onclick="toggleContent(this)">
                        <span class="toggle-title">âœ… Sliding Window (Incremental Update)</span>
                        <span class="toggle-icon">â–¼</span>
                    </div>
                    <div class="toggle-content">
                        <div class="toggle-inner">
                            <div class="info-box" style="border-color: #f59e0b;">
                                <h4 class="info-box-title" style="color: #f59e0b;">ğŸ¯ Key Insight</h4>
                                <div class="info-box-content">
                                    Adjacent windows share k-1 elements! Instead of recalculating the entire sum, just subtract the element leaving the window and add the element entering. This reduces k operations to just 2 operations per window.
                                </div>
                            </div>

                            <div class="code-block" style="margin-top: 20px;">
                                <div class="code-header">
                                    <span class="code-lang">Python - Sliding Window Optimization</span>
                                    <button class="copy-btn" onclick="copyCode(this)">Copy Code</button>
                                </div>
                                <div class="code-content">
<pre><code><span class="keyword">def</span> <span class="function">max_sum_sliding</span>(arr, k):
    <span class="string">"""Update window sum incrementally"""</span>
    <span class="comment"># Calculate first window</span>
    window_sum = <span class="function">sum</span>(arr[:k])  <span class="comment"># k operations (one-time)</span>
    max_sum = window_sum
    
    <span class="comment"># Slide the window</span>
    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="function">range</span>(k, len(arr)):
        <span class="comment"># Remove left element, add right element</span>
        window_sum = window_sum - arr[i-k] + arr[i]  <span class="comment"># 2 operations!</span>
        max_sum = <span class="function">max</span>(max_sum, window_sum)
    
    <span class="keyword">return</span> max_sum

<span class="comment"># Example: arr = [1, 2, 3, 4, 5], k = 3</span>
<span class="comment"># Initial: window_sum = 1+2+3 = 6, max_sum = 6</span>
<span class="comment"># i=3: window_sum = 6 - 1 + 4 = 9, max_sum = 9</span>
<span class="comment"># i=4: window_sum = 9 - 2 + 5 = 12, max_sum = 12</span>
<span class="comment"># Total: 3 (initial) + 2Ã—2 (sliding) = 7 operations</span>

<span class="comment"># Time Complexity: O(n) - single pass!</span>
<span class="comment"># Space Complexity: O(1) - only two variables</span>

<span class="comment"># For n=1,000,000, k=10,000:</span>
<span class="comment"># Naive:   10 billion operations (~30 seconds)</span>
<span class="comment"># Sliding: 1 million operations (~3 milliseconds)</span>
<span class="comment"># Speedup: 10,000x faster! ğŸš€</span></code></pre>
                                </div>
                            </div>

                            <div class="visual-diagram" style="margin-top: 20px;">
                                <div class="diagram-title">Sliding Window in Action</div>
                                <div class="diagram-content">Array: [1, 2, 3, 4, 5], k=3

Initial Window:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ 1  2  3 â”‚ 4  5
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  window_sum = 1+2+3 = 6
  max_sum = 6

Slide to Window 2 (i=3):
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  1  â”‚ 2  3  4 â”‚ 5
  â””  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚      â†‘
 Remove  Add
  âœ“ Subtract arr[0]=1: 6-1=5
  âœ“ Add arr[3]=4:      5+4=9
  window_sum = 9, max_sum = 9
  Operations: 2 (vs 3 in naive)

Slide to Window 3 (i=4):
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  1  2  â”‚ 3  4  5 â”‚
     â””  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚      â†‘
   Remove  Add
  âœ“ Subtract arr[1]=2: 9-2=7
  âœ“ Add arr[4]=5:      7+5=12
  window_sum = 12, max_sum = 12
  Operations: 2 (vs 3 in naive)

Key Pattern:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Window 1: [a, b, c, d]      sum=Sâ‚
Window 2:    [b, c, d, e]   sum=Sâ‚‚
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           Shared: b+c+d

Formula: Sâ‚‚ = Sâ‚ - a + e
Only 2 operations instead of k!</div>
                            </div>

                            <div class="success-box" style="margin-top: 20px;">
                                <h4 class="info-box-title" style="color: var(--accent-success);">ğŸ¯ Performance Comparison</h4>
                                <div class="info-box-content">
                                    <table style="width: 100%; margin-top: 10px;">
                                        <tr style="border-bottom: 1px solid rgba(255,255,255,0.1);">
                                            <td style="padding: 8px;"><strong>Metric</strong></td>
                                            <td style="padding: 8px;"><strong>Naive</strong></td>
                                            <td style="padding: 8px;"><strong>Sliding Window</strong></td>
                                            <td style="padding: 8px;"><strong>Improvement</strong></td>
                                        </tr>
                                        <tr>
                                            <td style="padding: 8px;">Time Complexity</td>
                                            <td style="padding: 8px; color: var(--accent-danger);">O(nÃ—k)</td>
                                            <td style="padding: 8px; color: var(--accent-success);">O(n)</td>
                                            <td style="padding: 8px; color: var(--accent-success);">k times faster</td>
                                        </tr>
                                        <tr>
                                            <td style="padding: 8px;">Space Complexity</td>
                                            <td style="padding: 8px; color: var(--accent-success);">O(1)</td>
                                            <td style="padding: 8px; color: var(--accent-success);">O(1)</td>
                                            <td style="padding: 8px;">Same</td>
                                        </tr>
                                        <tr>
                                            <td style="padding: 8px;">n=1M, k=10K</td>
                                            <td style="padding: 8px; color: var(--accent-danger);">30 seconds</td>
                                            <td style="padding: 8px; color: var(--accent-success);">3 milliseconds</td>
                                            <td style="padding: 8px; color: var(--accent-success);">10,000x faster!</td>
                                        </tr>
                                    </table>
                                    <p style="margin-top: 15px; color: var(--accent-success); font-weight: 600;">
                                        ğŸ’¡ Sliding window transforms infeasible solutions into instant results!
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

  

        <!-- Cache-Conscious Programming -->
        <div class="section" id="cache-programming">
            <div class="section-header">
                <h2 class="section-title">âš¡ Cache-Conscious Programming</h2>
                <p class="section-description">Optimize memory access patterns for CPU cache hierarchy</p>
            </div>

            <div class="info-box" style="border-color: #8b5cf6;">
                <h4 class="info-box-title" style="color: #8b5cf6;">ğŸ§  Understanding Cache Performance</h4>
                <div class="info-box-content">
                    Modern CPUs have a <strong>memory hierarchy</strong>: L1 cache (32 KB, 1 cycle), L2 cache (256 KB, 4 cycles), L3 cache (8 MB, 40 cycles), RAM (GBs, 200+ cycles). Cache-conscious programming arranges data and access patterns to minimize cache misses, dramatically improving performance.
                </div>
            </div>

            <!-- Technique 1: Loop Reordering -->
            <h3 class="section-subtitle" style="margin-top: 40px;">
                <span style="color: #8b5cf6;">Technique 1:</span> Loop Reordering for Cache Locality
            </h3>

            <div style="margin-top: 30px;">
                <h4 style="color: var(--text-primary); margin-bottom: 20px;">Example: Matrix Multiplication</h4>

                <div class="toggle-section">
                    <div class="toggle-header" onclick="toggleContent(this)">
                        <span class="toggle-title">âŒ Cache-Unfriendly (Column Access)</span>
                        <span class="toggle-icon">â–¼</span>
                    </div>
                    <div class="toggle-content">
                        <div class="toggle-inner">
                            <div class="code-block">
                                <div class="code-header">
                                    <span class="code-lang">Python - Poor Cache Utilization</span>
                                    <button class="copy-btn" onclick="copyCode(this)">Copy Code</button>
                                </div>
                                <div class="code-content">
<pre><code><span class="keyword">def</span> <span class="function">matrix_mult_bad</span>(A, B, n):
    <span class="string">"""BAD: Accesses B column-wise (cache misses!)"""</span>
    C = [[<span class="number">0</span>]*n <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="function">range</span>(n)]
    
    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="function">range</span>(n):
        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="function">range</span>(n):
            <span class="keyword">for</span> k <span class="keyword">in</span> <span class="function">range</span>(n):
                C[i][j] += A[i][k] * B[k][j]  <span class="comment"># âš ï¸ B[k][j] is column access!</span>

<span class="comment"># Memory access pattern for B:</span>
<span class="comment"># B[0][j], B[1][j], B[2][j], ... (jumping by n elements)</span>

<span class="comment"># For n=1000, each element is 4 bytes:</span>
<span class="comment"># B[0][j] at address 0x1000</span>
<span class="comment"># B[1][j] at address 0x2FA0 (4000 bytes away!)</span>

<span class="comment"># Performance for 1000Ã—1000 matrices: ~30 seconds</span></code></pre>
                                </div>
                            </div>

                            <div class="visual-diagram" style="margin-top: 20px;">
                                <div class="diagram-title">Memory Layout & Cache Line Misses</div>
                                <div class="diagram-content">Matrix B in memory (row-major order):
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
[B[0][0], B[0][1], ..., B[0][999], B[1][0], B[1][1], ...]
 â†‘                                   â†‘
 Row 0 (contiguous)                  Row 1 (1000 elements away)

Cache Line (64 bytes = 16 integers):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ B[0][j] B[0][j+1] ... B[0][j+15]      â”‚ â† Loaded into cache
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Column Access Pattern (k loop):
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Access B[0][j]  â† Cache MISS (loads cache line)
Access B[1][j]  â† Cache MISS (different cache line!)
Access B[2][j]  â† Cache MISS
Access B[3][j]  â† Cache MISS
...
Access B[15][j] â† Cache MISS
Access B[16][j] â† Cache MISS

Cache Hit Rate: 0% âŒ

Each access is 4000 bytes away (1000 elements Ã— 4 bytes)
Cache line only holds 64 bytes worth of data
Result: Every single B access is a cache miss!</div>
                            </div>

                            <div class="warning-box" style="margin-top: 20px; border-color: var(--accent-danger);">
                                <h4 class="info-box-title" style="color: var(--accent-danger);">âš ï¸ Performance Impact</h4>
                                <div class="info-box-content">
                                    <ul style="list-style: none; padding-left: 0;">
                                        <li style="padding: 5px 0;">âŒ <strong>100% cache miss rate</strong> on B matrix</li>
                                        <li style="padding: 5px 0;">âŒ <strong>200+ cycle latency</strong> per B access (RAM fetch)</li>
                                        <li style="padding: 5px 0;">âŒ <strong>1000Ã—1000 matrix: ~30 seconds</strong> on modern CPU</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="toggle-section" style="margin-top: 20px;">
                    <div class="toggle-header" onclick="toggleContent(this)">
                        <span class="toggle-title">âœ… Cache-Friendly (Loop Reordering)</span>
                        <span class="toggle-icon">â–¼</span>
                    </div>
                    <div class="toggle-content">
                        <div class="toggle-inner">
                            <div class="info-box" style="border-color: #8b5cf6;">
                                <h4 class="info-box-title" style="color: #8b5cf6;">ğŸ¯ Key Insight</h4>
                                <div class="info-box-content">
                                    Reorder loops so the innermost loop accesses B <strong>row-wise</strong> instead of column-wise. This ensures consecutive memory accesses, maximizing cache line utilization!
                                </div>
                            </div>

                            <div class="code-block" style="margin-top: 20px;">
                                <div class="code-header">
                                    <span class="code-lang">Python - Optimized Cache Access</span>
                                    <button class="copy-btn" onclick="copyCode(this)">Copy Code</button>
                                </div>
                                <div class="code-content">
<pre><code><span class="keyword">def</span> <span class="function">matrix_mult_good</span>(A, B, n):
    <span class="string">"""GOOD: Accesses B row-wise (cache hits!)"""</span>
    C = [[<span class="number">0</span>]*n <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="function">range</span>(n)]
    
    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="function">range</span>(n):
        <span class="keyword">for</span> k <span class="keyword">in</span> <span class="function">range</span>(n):  <span class="comment"># âœ“ Swapped k and j loops</span>
            <span class="keyword">for</span> j <span class="keyword">in</span> <span class="function">range</span>(n):  <span class="comment"># âœ“ j is now innermost</span>
                C[i][j] += A[i][k] * B[k][j]  <span class="comment"># âœ“ B[k][j] now accesses row k sequentially!</span>

<span class="comment"># Memory access pattern for B:</span>
<span class="comment"># B[k][0], B[k][1], B[k][2], ... (contiguous!)</span>

<span class="comment"># When B[k][0] loads, cache line contains:</span>
<span class="comment"># B[k][0], B[k][1], ..., B[k][15] (16 consecutive elements)</span>
<span class="comment"># Next 15 accesses are cache HITS!</span>

<span class="comment"># Performance for 1000Ã—1000 matrices: ~5 seconds (6x faster!)</span></code></pre>
                                </div>
                            </div>

                            <div class="visual-diagram" style="margin-top: 20px;">
                                <div class="diagram-title">Optimized Row Access Pattern</div>
                                <div class="diagram-content">Row Access Pattern (j loop innermost):
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Cache Line Loaded:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ B[k][0] B[k][1] B[k][2] ... B[k][15]  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Access B[k][0]  â† Cache MISS (load cache line)
Access B[k][1]  â† Cache HIT! âœ“ (already in cache)
Access B[k][2]  â† Cache HIT! âœ“
Access B[k][3]  â† Cache HIT! âœ“
...
Access B[k][15] â† Cache HIT! âœ“
Access B[k][16] â† Cache MISS (load next cache line)
Access B[k][17] â† Cache HIT! âœ“
...

Cache Hit Rate: 94% âœ“

Performance Comparison (1000Ã—1000 matrix):
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Column access: 30 seconds (0% hits)
Row access:     5 seconds (94% hits)
Speedup:        6x faster!

Why it works:
- Sequential access matches memory layout
- Each cache line fetch serves 16 accesses
- CPU can also prefetch next cache line</div>
                            </div>

                            <div class="success-box" style="margin-top: 20px;">
                                <h4 class="info-box-title" style="color: var(--accent-success);">ğŸ’¡ General Principle</h4>
                                <div class="info-box-content">
                                    <strong>Access memory in the order it's laid out</strong> - For row-major arrays, innermost loops should iterate over columns (rightmost index). This simple loop reordering can provide 5-10x speedups on large datasets!
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Technique 2: AoS vs SoA -->
            <h3 class="section-subtitle" style="margin-top: 60px;">
                <span style="color: #8b5cf6;">Technique 2:</span> Data Layout Optimization (AoS vs SoA)
            </h3>

            <div style="margin-top: 30px;">
                <h4 style="color: var(--text-primary); margin-bottom: 20px;">Scenario: Physics Simulation (10,000 Particles)</h4>

                <div class="info-box" style="border-color: #f59e0b;">
                    <h4 class="info-box-title" style="color: #f59e0b;">ğŸ® Problem Context</h4>
                    <div class="info-box-content">
                        Each particle has <strong>position (x, y, z)</strong> and <strong>velocity (vx, vy, vz)</strong>. Update loop only modifies X coordinates: <code>x += vx * dt</code>. Which data layout is more cache-efficient?
                    </div>
                </div>

                <div class="toggle-section" style="margin-top: 20px;">
                    <div class="toggle-header" onclick="toggleContent(this)">
                        <span class="toggle-title">âŒ Array of Structures (AoS) - Cache Inefficient</span>
                        <span class="toggle-icon">â–¼</span>
                    </div>
                    <div class="toggle-content">
                        <div class="toggle-inner">
                            <div class="code-block">
                                <div class="code-header">
                                    <span class="code-lang">Python - AoS Layout</span>
                                    <button class="copy-btn" onclick="copyCode(this)">Copy Code</button>
                                </div>
                                <div class="code-content">
<pre><code><span class="keyword">class</span> <span class="function">Particle</span>:
    <span class="keyword">def</span> <span class="function">__init__</span>(self):
        self.x = <span class="number">0.0</span>   <span class="comment"># 8 bytes</span>
        self.y = <span class="number">0.0</span>   <span class="comment"># 8 bytes</span>
        self.z = <span class="number">0.0</span>   <span class="comment"># 8 bytes</span>
        self.vx = <span class="number">0.0</span>  <span class="comment"># 8 bytes</span>
        self.vy = <span class="number">0.0</span>  <span class="comment"># 8 bytes</span>
        self.vz = <span class="number">0.0</span>  <span class="comment"># 8 bytes</span>
        <span class="comment"># Total: 48 bytes per particle</span>

particles_aos = [<span class="function">Particle</span>() <span class="keyword">for</span> _ <span class="keyword">in</span> <span class="function">range</span>(<span class="number">10000</span>)]

<span class="keyword">def</span> <span class="function">update_x_aos</span>(dt):
    <span class="string">"""Update only X positions"""</span>
    <span class="keyword">for</span> particle <span class="keyword">in</span> particles_aos:
        particle.x += particle.vx * dt  <span class="comment"># Need x and vx from each particle</span>

<span class="comment"># Performance: ~100ms per frame</span></code></pre>
                                </div>
                            </div>

                            <div class="visual-diagram" style="margin-top: 20px;">
                                <div class="diagram-title">AoS Memory Layout</div>
                                <div class="diagram-content">Particles in memory (interleaved):
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Particle 0         Particle 1         Particle 2
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚x  y  z       â”‚  â”‚x  y  z       â”‚  â”‚x  y  z       â”‚
â”‚vx vy vz (48B)â”‚  â”‚vx vy vz (48B)â”‚  â”‚vx vy vz (48B)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Cache Line (64 bytes):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ x  y  z  vx  vy  vz â”‚ x  (part of P1) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†‘              â†‘
 Used         Unused (wasted!)

When processing particle 0:
âœ“ Load x  (need this)
âœ— Load y  (don't need)
âœ— Load z  (don't need)
âœ“ Load vx (need this)
âœ— Load vy (don't need)
âœ— Load vz (don't need)

Useful data: 16 bytes (x, vx)
Wasted data: 32 bytes (y, z, vy, vz)
Efficiency: 33% (66% wasted!) âš ï¸</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="toggle-section" style="margin-top: 20px;">
                    <div class="toggle-header" onclick="toggleContent(this)">
                        <span class="toggle-title">âœ… Structure of Arrays (SoA) - Cache Optimal</span>
                        <span class="toggle-icon">â–¼</span>
                    </div>
                    <div class="toggle-content">
                        <div class="toggle-inner">
                            <div class="code-block">
                                <div class="code-header">
                                    <span class="code-lang">Python - SoA Layout</span>
                                    <button class="copy-btn" onclick="copyCode(this)">Copy Code</button>
                                </div>
                                <div class="code-content">
<pre><code><span class="keyword">class</span> <span class="function">Particles</span>:
    <span class="keyword">def</span> <span class="function">__init__</span>(self, n):
        self.x = [<span class="number">0.0</span>] * n   <span class="comment"># All X positions together</span>
        self.y = [<span class="number">0.0</span>] * n   <span class="comment"># All Y positions together</span>
        self.z = [<span class="number">0.0</span>] * n   <span class="comment"># All Z positions together</span>
        self.vx = [<span class="number">0.0</span>] * n  <span class="comment"># All X velocities together</span>
        self.vy = [<span class="number">0.0</span>] * n
        self.vz = [<span class="number">0.0</span>] * n

particles_soa = <span class="function">Particles</span>(<span class="number">10000</span>)

<span class="keyword">def</span> <span class="function">update_x_soa</span>(dt):
    <span class="string">"""Update only X positions - perfect cache utilization!"""</span>
    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="function">range</span>(len(particles_soa.x)):
        particles_soa.x[i] += particles_soa.vx[i] * dt

<span class="comment"># Performance: ~30ms per frame (3.3x faster!)</span></code></pre>
                                </div>
                            </div>

                            <div class="visual-diagram" style="margin-top: 20px;">
                                <div class="diagram-title">SoA Memory Layout</div>
                                <div class="diagram-content">Separate arrays for each field:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

X Array:  [x0, x1, x2, x3, x4, x5, x6, x7, x8, ...]
VX Array: [vx0, vx1, vx2, vx3, vx4, vx5, vx6, vx7, vx8, ...]

Cache Line for X Array (64 bytes):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ x0  x1  x2  x3  x4  x5  x6  x7        â”‚ â† 8 doubles
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â†‘   â†‘   â†‘   â†‘   â†‘   â†‘   â†‘   â†‘
 All will be used! 100% efficiency âœ“

When processing:
âœ“ Load x0  â†’ use immediately
âœ“ Load x1  â†’ use next iteration
âœ“ Load x2  â†’ use next iteration
âœ“ Load x3  â†’ use next iteration
...
âœ“ Load x7  â†’ all 8 values used!

Useful data: 64 bytes (all x values)
Wasted data: 0 bytes
Efficiency: 100% âœ“

Same for VX array - perfect cache utilization!

Performance Comparison:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
AoS: 100ms per frame (33% cache efficiency)
SoA:  30ms per frame (100% cache efficiency)
Speedup: 3.3x faster!</div>
                            </div>

                            <div class="success-box" style="margin-top: 20px;">
                                <h4 class="info-box-title" style="color: var(--accent-success);">ğŸ“Š When to Use Each</h4>
                                <div class="info-box-content">
                                    <table style="width: 100%; margin-top: 10px;">
                                        <tr style="border-bottom: 1px solid rgba(255,255,255,0.1);">
                                            <td style="padding: 8px; width: 30%;"><strong>Use AoS when:</strong></td>
                                            <td style="padding: 8px;"><strong>Use SoA when:</strong></td>
                                        </tr>
                                        <tr>
                                            <td style="padding: 8px; vertical-align: top;">
                                                â€¢ Access all fields together<br>
                                                â€¢ OOP design important<br>
                                                â€¢ Code readability > performance<br>
                                                â€¢ Small datasets
                                            </td>
                                            <td style="padding: 8px; vertical-align: top; color: var(--accent-success);">
                                                <strong>â€¢ Access specific fields only âœ“</strong><br>
                                                <strong>â€¢ Performance is critical âœ“</strong><br>
                                                <strong>â€¢ Parallel processing (SIMD) âœ“</strong><br>
                                                <strong>â€¢ Large datasets (>10K elements) âœ“</strong>
                                            </td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Technique 3: Cache Blocking -->
            <h3 class="section-subtitle" style="margin-top: 60px;">
                <span style="color: #8b5cf6;">Technique 3:</span> Cache Blocking/Tiling
            </h3>

            <div class="warning-box">
                <h4 class="info-box-title">ğŸ’¡ Problem</h4>
                <div class="info-box-content">
                    When data structures exceed cache size, repeated access causes <strong>cache thrashing</strong> - constantly evicting and reloading data. Solution: Process data in cache-sized blocks.
                </div>
            </div>

            <div style="margin-top: 30px;">
                <h4 style="color: var(--text-primary); margin-bottom: 20px;">Example: Matrix Transpose (4096Ã—4096 = 67 MB > 8 MB L3 cache)</h4>

                <div class="toggle-section">
                    <div class="toggle-header" onclick="toggleContent(this)">
                        <span class="toggle-title">âŒ Naive Approach (Cache Thrashing)</span>
                        <span class="toggle-icon">â–¼</span>
                    </div>
                    <div class="toggle-content">
                        <div class="toggle-inner">
                            <div class="code-block">
                                <div class="code-header">
                                    <span class="code-lang">Python - Process Entire Rows</span>
                                    <button class="copy-btn" onclick="copyCode(this)">Copy Code</button>
                                </div>
                                <div class="code-content">
<pre><code><span class="keyword">def</span> <span class="function">matrix_transpose_naive</span>(A, B, n):
    <span class="string">"""Process entire matrix row by row"""</span>
    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="function">range</span>(n):
        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="function">range</span>(n):
            B[j][i] = A[i][j]

<span class="comment"># Reading A: row-wise âœ“ (good, sequential)</span>
<span class="comment"># Writing B: column-wise âœ— (bad, scattered)</span>

<span class="comment"># Problem:</span>
<span class="comment"># After processing row i, B's columns may be evicted from cache</span>
<span class="comment"># When processing row i+1, need to reload B columns</span>
<span class="comment"># Result: Constant cache misses (thrashing)</span>

<span class="comment"># Performance: ~500ms for 4096Ã—4096</span></code></pre>
                                </div>
                            </div>

                            <div class="visual-diagram" style="margin-top: 20px;">
                                <div class="diagram-title">Cache Thrashing Visualization</div>
                                <div class="diagram-content">4096Ã—4096 Matrix (67 MB) vs L3 Cache (8 MB):
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Processing row by row:

Row 0: Write to all columns of B
  â”œâ”€ B[0][0], B[1][0], B[2][0], ..., B[4095][0]
  â””â”€ Touches 4096 different cache lines!

Row 1: Write to all columns of B again
  â”œâ”€ B[0][1], B[1][1], B[2][1], ..., B[4095][1]
  â””â”€ Most of B[*][0] already evicted from cache!

Row 2: Repeat...
  â””â”€ B[*][1] already evicted!

Problem: Matrix >> Cache Size
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Matrix:  67 MB
L3 Cache: 8 MB
Ratio:   8.4x too large!

Each row touches the entire B matrix
By the time we finish one row, earlier
data has been evicted
Result: Cache miss on nearly every write!</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="toggle-section" style="margin-top: 20px;">
                    <div class="toggle-header" onclick="toggleContent(this)">
                        <span class="toggle-title">âœ… Blocked/Tiled Approach (Cache-Friendly)</span>
                        <span class="toggle-icon">â–¼</span>
                    </div>
                    <div class="toggle-content">
                        <div class="toggle-inner">
                            <div class="info-box" style="border-color: #8b5cf6;">
                                <h4 class="info-box-title" style="color: #8b5cf6;">ğŸ¯ Key Insight</h4>
                                <div class="info-box-content">
                                    Process data in <strong>cache-sized tiles</strong>. Complete each block before moving to the next. This keeps working data in cache throughout block processing.
                                </div>
                            </div>

                            <div class="code-block" style="margin-top: 20px;">
                                <div class="code-header">
                                    <span class="code-lang">Python - Block Processing</span>
                                    <button class="copy-btn" onclick="copyCode(this)">Copy Code</button>
                                </div>
                                <div class="code-content">
<pre><code><span class="keyword">def</span> <span class="function">matrix_transpose_blocked</span>(A, B, n, block_size=<span class="number">64</span>):
    <span class="string">"""Process in cache-friendly blocks"""</span>
    <span class="keyword">for</span> ii <span class="keyword">in</span> <span class="function">range</span>(<span class="number">0</span>, n, block_size):
        <span class="keyword">for</span> jj <span class="keyword">in</span> <span class="function">range</span>(<span class="number">0</span>, n, block_size):
            <span class="comment"># Process block [ii:ii+block, jj:jj+block]</span>
            <span class="keyword">for</span> i <span class="keyword">in</span> <span class="function">range</span>(ii, <span class="function">min</span>(ii+block_size, n)):
                <span class="keyword">for</span> j <span class="keyword">in</span> <span class="function">range</span>(jj, <span class="function">min</span>(jj+block_size, n)):
                    B[j][i] = A[i][j]

<span class="comment"># Each 64Ã—64 block:</span>
<span class="comment"># 64Ã—64 doubles = 32 KB (fits in L1 cache!)</span>
<span class="comment"># Process entire block before moving to next</span>
<span class="comment"># B columns stay in cache for entire block</span>

<span class="comment"># Performance: ~100ms (5x faster!)</span></code></pre>
                                </div>
                            </div>

                            <div class="visual-diagram" style="margin-top: 20px;">
                                <div class="diagram-title">Block Processing Strategy</div>
                                <div class="diagram-content">Divide 4096Ã—4096 matrix into 64Ã—64 blocks:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

Full Matrix:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â”Œâ”€â”€â”                           â”‚  Each block: 64Ã—64
â”‚ â”‚B1â”‚â† Process completely       â”‚  Size: 32 KB
â”‚ â””â”€â”€â”˜   before moving            â”‚  Fits in: L1 cache (32 KB)
â”‚    â”Œâ”€â”€â”                         â”‚
â”‚    â”‚B2â”‚â† Next block             â”‚
â”‚    â””â”€â”€â”˜                         â”‚
â”‚       â”Œâ”€â”€â”                      â”‚
â”‚       â”‚B3â”‚â† And so on...        â”‚
â”‚       â””â”€â”€â”˜                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Processing Block 1:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
1. Load block of A into cache
2. Load corresponding block of B
3. Process ALL 4096 elements in block
4. B data stays cached throughout!
5. Move to next block

Block Size: 64Ã—64 Ã— 8 bytes = 32 KB
L1 Cache: 32 KB
Perfect fit! Block never evicted while processing!

Performance:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Naive:   500ms (constant thrashing)
Blocked: 100ms (data stays cached)
Speedup: 5x faster!</div>
                            </div>

                            <div class="success-box" style="margin-top: 20px;">
                                <h4 class="info-box-title" style="color: var(--accent-success);">ğŸ’¡ Choosing Block Size</h4>
                                <div class="info-box-content">
                                    <ul style="list-style: none; padding-left: 0;">
                                        <li style="padding: 5px 0;">âœ“ <strong>L1 cache (32-64 KB):</strong> Use 32-64 element blocks for hot inner loops</li>
                                        <li style="padding: 5px 0;">âœ“ <strong>L2 cache (256-512 KB):</strong> Use 128-256 element blocks for medium data</li>
                                        <li style="padding: 5px 0;">âœ“ <strong>L3 cache (4-16 MB):</strong> Use 512-1024 element blocks for large matrices</li>
                                        <li style="padding: 5px 0;">âœ“ <strong>Rule of thumb:</strong> Block sizeÂ² Ã— element_size â‰ˆ cache_size</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Memory Tradeoffs & Decision Framework -->
        <div class="section" id="decision-framework">
            <div class="section-header">
                <h2 class="section-title">âš–ï¸ Memory Tradeoffs & Decision Framework</h2>
                <p class="section-description">Making informed decisions when multiple solutions exist</p>
            </div>

            <div class="info-box" style="border-color: #06b6d4;">
                <h4 class="info-box-title" style="color: #06b6d4;">ğŸ¯ The Tradeoff Matrix</h4>
                <div class="info-box-content">
                    Every algorithm decision involves <strong>four key dimensions</strong>:
                    <ul style="list-style: none; padding-left: 0; margin-top: 10px;">
                        <li style="padding: 5px 0;">â±ï¸ <strong>Time Complexity</strong> - How fast does it run?</li>
                        <li style="padding: 5px 0;">ğŸ’¾ <strong>Space Complexity</strong> - How much memory does it use?</li>
                        <li style="padding: 5px 0;">ğŸ“ <strong>Code Complexity</strong> - How hard is it to implement/maintain?</li>
                        <li style="padding: 5px 0;">âš¡ <strong>Cache Performance</strong> - How cache-friendly are memory accesses?</li>
                    </ul>
                </div>
            </div>

            <h3 class="section-subtitle" style="margin-top: 40px;">
                Case Study: Sorting 1 Million Integers
            </h3>

            <div style="margin-top: 30px;">
                <!-- Option 1: Quicksort -->
                <div class="toggle-section">
                    <div class="toggle-header" onclick="toggleContent(this)">
                        <span class="toggle-title">Option 1: Simple Quicksort (Easy but Wasteful)</span>
                        <span class="toggle-icon">â–¼</span>
                    </div>
                    <div class="toggle-content">
                        <div class="toggle-inner">
                            <div class="code-block">
                                <div class="code-header">
                                    <span class="code-lang">Python - Simple Quicksort</span>
                                    <button class="copy-btn" onclick="copyCode(this)">Copy Code</button>
                                </div>
                                <div class="code-content">
<pre><code><span class="keyword">def</span> <span class="function">quicksort</span>(arr):
    <span class="keyword">if</span> len(arr) <= <span class="number">1</span>:
        <span class="keyword">return</span> arr
    
    pivot = arr[len(arr)//<span class="number">2</span>]
    left = [x <span class="keyword">for</span> x <span class="keyword">in</span> arr <span class="keyword">if</span> x < pivot]
    middle = [x <span class="keyword">for</span> x <span class="keyword">in</span> arr <span class="keyword">if</span> x == pivot]
    right = [x <span class="keyword">for</span> x <span class="keyword">in</span> arr <span class="keyword">if</span> x > pivot]
    
    <span class="keyword">return</span> <span class="function">quicksort</span>(left) + middle + <span class="function">quicksort</span>(right)</code></pre>
                                </div>
                            </div>

                            <div class="visual-diagram" style="margin-top: 20px;">
                                <div class="diagram-title">Analysis</div>
                                <div class="diagram-content">â±ï¸ Time Complexity: O(n log n) average, O(nÂ²) worst
ğŸ’¾ Space Complexity: O(n) - creates new arrays
ğŸ“ Code Complexity: Simple (10 lines)
âš¡ Cache Performance: Poor - scattered allocations

Memory Behavior:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
For 1M integers:
- Original array: 4 MB
- Left partition:  ~2 MB (new allocation)
- Right partition: ~2 MB (new allocation)
- Peak memory:     ~8 MB (2x overhead!)

Cache Issues:
- Creates new arrays at each level
- Memory scattered across heap
- Poor spatial locality</div>
                            </div>

                            <div class="info-box" style="margin-top: 20px; border-color: #f59e0b;">
                                <h4 class="info-box-title" style="color: #f59e0b;">âš–ï¸ Verdict</h4>
                                <div class="info-box-content">
                                    <strong>When to use:</strong> Small to medium datasets where code simplicity matters more than performance. Good for prototyping and educational purposes.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Option 2: In-place Quicksort -->
                <div class="toggle-section" style="margin-top: 20px;">
                    <div class="toggle-header" onclick="toggleContent(this)">
                        <span class="toggle-title">Option 2: In-Place Quicksort (Memory Efficient)</span>
                        <span class="toggle-icon">â–¼</span>
                    </div>
                    <div class="toggle-content">
                        <div class="toggle-inner">
                            <div class="code-block">
                                <div class="code-header">
                                    <span class="code-lang">Python - In-Place Quicksort</span>
                                    <button class="copy-btn" onclick="copyCode(this)">Copy Code</button>
                                </div>
                                <div class="code-content">
<pre><code><span class="keyword">def</span> <span class="function">quicksort_inplace</span>(arr, low, high):
    <span class="keyword">if</span> low < high:
        pi = <span class="function">partition</span>(arr, low, high)
        <span class="function">quicksort_inplace</span>(arr, low, pi-<span class="number">1</span>)
        <span class="function">quicksort_inplace</span>(arr, pi+<span class="number">1</span>, high)

<span class="keyword">def</span> <span class="function">partition</span>(arr, low, high):
    pivot = arr[high]
    i = low - <span class="number">1</span>
    
    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="function">range</span>(low, high):
        <span class="keyword">if</span> arr[j] <= pivot:
            i += <span class="number">1</span>
            arr[i], arr[j] = arr[j], arr[i]
    
    arr[i+<span class="number">1</span>], arr[high] = arr[high], arr[i+<span class="number">1</span>]
    <span class="keyword">return</span> i + <span class="number">1</span></code></pre>
                                </div>
                            </div>

                            <div class="visual-diagram" style="margin-top: 20px;">
                                <div class="diagram-title">Analysis</div>
                                <div class="diagram-content">â±ï¸ Time Complexity: O(n log n) average, O(nÂ²) worst
ğŸ’¾ Space Complexity: O(log n) - recursion stack only
ğŸ“ Code Complexity: Moderate (20 lines)
âš¡ Cache Performance: Good - modifies in-place

Memory Behavior:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
For 1M integers:
- Original array:  4 MB (only data)
- Recursion stack: ~80 KB (log n depth)
- Total memory:    ~4 MB (no overhead!)

Cache Benefits:
- All operations on original array
- Good spatial locality
- Minimal memory traffic

Partition operation:
[3, 1, 4, 2, 5] pivot=5
 â†“  â†“        â†“
Swap elements in-place
[3, 1, 4, 2] | [5]
 â†‘           â†‘
â‰¤pivot      pivot</div>
                            </div>

                            <div class="success-box" style="margin-top: 20px;">
                                <h4 class="info-box-title" style="color: var(--accent-success);">âš–ï¸ Verdict</h4>
                                <div class="info-box-content">
                                    <strong>When to use:</strong> Memory-constrained environments. Best general-purpose choice when memory is limited but average-case performance is acceptable.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Option 3: Merge Sort -->
                <div class="toggle-section" style="margin-top: 20px;">
                    <div class="toggle-header" onclick="toggleContent(this)">
                        <span class="toggle-title">Option 3: Merge Sort (Guaranteed Performance)</span>
                        <span class="toggle-icon">â–¼</span>
                    </div>
                    <div class="toggle-content">
                        <div class="toggle-inner">
                            <div class="code-block">
                                <div class="code-header">
                                    <span class="code-lang">Python - Merge Sort</span>
                                    <button class="copy-btn" onclick="copyCode(this)">Copy Code</button>
                                </div>
                                <div class="code-content">
<pre><code><span class="keyword">def</span> <span class="function">mergesort</span>(arr):
    <span class="keyword">if</span> len(arr) <= <span class="number">1</span>:
        <span class="keyword">return</span> arr
    
    mid = len(arr) // <span class="number">2</span>
    left = <span class="function">mergesort</span>(arr[:mid])
    right = <span class="function">mergesort</span>(arr[mid:])
    
    <span class="keyword">return</span> <span class="function">merge</span>(left, right)

<span class="keyword">def</span> <span class="function">merge</span>(left, right):
    result = []
    i = j = <span class="number">0</span>
    
    <span class="keyword">while</span> i < len(left) <span class="keyword">and</span> j < len(right):
        <span class="keyword">if</span> left[i] <= right[j]:
            result.append(left[i])
            i += <span class="number">1</span>
        <span class="keyword">else</span>:
            result.append(right[j])
            j += <span class="number">1</span>
    
    result.extend(left[i:])
    result.extend(right[j:])
    <span class="keyword">return</span> result</code></pre>
                                </div>
                            </div>

                            <div class="visual-diagram" style="margin-top: 20px;">
                                <div class="diagram-title">Analysis</div>
                                <div class="diagram-content">â±ï¸ Time Complexity: O(n log n) guaranteed (no worst case!)
ğŸ’¾ Space Complexity: O(n) - temporary arrays
ğŸ“ Code Complexity: Simple (15 lines)
âš¡ Cache Performance: Excellent - sequential merging

Memory Behavior:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
For 1M integers:
- Original array: 4 MB
- Temporary arrays: 4 MB (for merging)
- Total: 8 MB

Cache Benefits:
- Merge operation is sequential
- Excellent spatial locality
- Predictable memory access pattern

Merge operation:
[1, 3, 5] + [2, 4, 6]
 â†“            â†“
Sequential reads â†’ [1, 2, 3, 4, 5, 6]
                    Sequential writes
Perfect for cache!</div>
                            </div>

                            <div class="success-box" style="margin-top: 20px;">
                                <h4 class="info-box-title" style="color: var(--accent-success);">âš–ï¸ Verdict</h4>
                                <div class="info-box-content">
                                    <strong>When to use:</strong> Real-time systems where worst-case performance matters. Excellent for large datasets with available memory. Used in production systems (e.g., Python's Timsort is based on merge sort).
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Option 4: Heap Sort -->
                <div class="toggle-section" style="margin-top: 20px;">
                    <div class="toggle-header" onclick="toggleContent(this)">
                        <span class="toggle-title">Option 4: Heap Sort (Space Critical)</span>
                        <span class="toggle-icon">â–¼</span>
                    </div>
                    <div class="toggle-content">
                        <div class="toggle-inner">
                            <div class="code-block">
                                <div class="code-header">
                                    <span class="code-lang">Python - Heap Sort</span>
                                    <button class="copy-btn" onclick="copyCode(this)">Copy Code</button>
                                </div>
                                <div class="code-content">
<pre><code><span class="keyword">def</span> <span class="function">heapsort</span>(arr):
    n = len(arr)
    
    <span class="comment"># Build max heap</span>
    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="function">range</span>(n//<span class="number">2</span> - <span class="number">1</span>, -<span class="number">1</span>, -<span class="number">1</span>):
        <span class="function">heapify</span>(arr, n, i)
    
    <span class="comment"># Extract elements</span>
    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="function">range</span>(n-<span class="number">1</span>, <span class="number">0</span>, -<span class="number">1</span>):
        arr[<span class="number">0</span>], arr[i] = arr[i], arr[<span class="number">0</span>]
        <span class="function">heapify</span>(arr, i, <span class="number">0</span>)

<span class="keyword">def</span> <span class="function">heapify</span>(arr, n, i):
    largest = i
    left = <span class="number">2</span>*i + <span class="number">1</span>
    right = <span class="number">2</span>*i + <span class="number">2</span>
    
    <span class="keyword">if</span> left < n <span class="keyword">and</span> arr[left] > arr[largest]:
        largest = left
    <span class="keyword">if</span> right < n <span class="keyword">and</span> arr[right] > arr[largest]:
        largest = right
    
    <span class="keyword">if</span> largest != i:
        arr[i], arr[largest] = arr[largest], arr[i]
        <span class="function">heapify</span>(arr, n, largest)</code></pre>
                                </div>
                            </div>

                            <div class="visual-diagram" style="margin-top: 20px;">
                                <div class="diagram-title">Analysis</div>
                                <div class="diagram-content">â±ï¸ Time Complexity: O(n log n) guaranteed
ğŸ’¾ Space Complexity: O(1) - truly in-place!
ğŸ“ Code Complexity: Moderate (25 lines)
âš¡ Cache Performance: Poor - random access pattern

Memory Behavior:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
For 1M integers:
- Original array: 4 MB
- Extra space: 0 bytes!
- Total: 4 MB (absolute minimum!)

Cache Issues:
- Heap operations jump around array
- Parent at i, children at 2i+1, 2i+2
- Poor spatial locality

Access pattern for heap:
       [0]
      /   \
    [1]   [2]
   /  \   /  \
  [3][4][5][6]

Accessing [0] then [1] or [2]:
Not adjacent in memory!</div>
                            </div>

                            <div class="success-box" style="margin-top: 20px;">
                                <h4 class="info-box-title" style="color: var(--accent-success);">âš–ï¸ Verdict</h4>
                                <div class="info-box-content">
                                    <strong>When to use:</strong> Embedded systems, memory-critical applications where O(1) space is required. Trade cache performance for minimal memory footprint.
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Comparison Table -->
                <h4 style="color: var(--text-primary); margin-top: 40px; margin-bottom: 20px;">ğŸ“Š Side-by-Side Comparison</h4>

                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>Algorithm</th>
                            <th>Time</th>
                            <th>Space</th>
                            <th>Cache</th>
                            <th>Code</th>
                            <th>Best Use Case</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Simple Quicksort</strong></td>
                            <td style="color: var(--accent-warning);">O(n log n)*</td>
                            <td style="color: var(--accent-danger);">O(n)</td>
                            <td style="color: var(--accent-danger);">Poor</td>
                            <td style="color: var(--accent-success);">Easy</td>
                            <td>Prototyping, small data</td>
                        </tr>
                        <tr>
                            <td><strong>In-place Quicksort</strong></td>
                            <td style="color: var(--accent-warning);">O(n log n)*</td>
                            <td style="color: var(--accent-success);">O(log n)</td>
                            <td style="color: var(--accent-success);">Good</td>
                            <td style="color: var(--accent-warning);">Medium</td>
                            <td>General purpose, limited memory</td>
                        </tr>
                        <tr>
                            <td><strong>Merge Sort</strong></td>
                            <td style="color: var(--accent-success);">O(n log n)</td>
                            <td style="color: var(--accent-danger);">O(n)</td>
                            <td style="color: var(--accent-success);">Best</td>
                            <td style="color: var(--accent-success);">Easy</td>
                            <td>Real-time, guaranteed performance</td>
                        </tr>
                        <tr>
                            <td><strong>Heap Sort</strong></td>
                            <td style="color: var(--accent-success);">O(n log n)</td>
                            <td style="color: var(--accent-success);">O(1)</td>
                            <td style="color: var(--accent-danger);">Poor</td>
                            <td style="color: var(--accent-warning);">Medium</td>
                            <td>Embedded systems, space-critical</td>
                        </tr>
                    </tbody>
                </table>

                <p style="margin-top: 10px; font-size: 0.9em; color: rgba(255,255,255,0.7);">
                    * Quicksort has O(nÂ²) worst case, but typically O(n log n) with good pivot selection
                </p>

                <!-- Decision Tree -->
                <h4 style="color: var(--text-primary); margin-top: 40px; margin-bottom: 20px;">ğŸŒ³ Decision Tree</h4>

                <div class="visual-diagram">
                    <div class="diagram-title">Choosing the Right Sorting Algorithm</div>
                    <div class="diagram-content">Question 1: Is memory extremely limited?
           (e.g., embedded system, < 1 KB extra RAM)
â”œâ”€ âœ“ YES â†’ <strong style="color: var(--accent-success);">Heap Sort</strong> (O(1) space)
â””â”€ âœ— NO  â†’ Continue to Question 2

Question 2: Is worst-case performance critical?
           (e.g., real-time system, hard deadlines)
â”œâ”€ âœ“ YES â†’ <strong style="color: var(--accent-success);">Merge Sort</strong> (guaranteed O(n log n))
â””â”€ âœ— NO  â†’ Continue to Question 3

Question 3: Is data already partially sorted?
           (e.g., adding new items to sorted list)
â”œâ”€ âœ“ YES â†’ <strong style="color: var(--accent-success);">Insertion Sort</strong> or <strong>Timsort</strong>
â”‚          (O(n) best case, adaptive)
â””â”€ âœ— NO  â†’ Continue to Question 4

Question 4: Is dataset very small (< 10-20 elements)?
â”œâ”€ âœ“ YES â†’ <strong style="color: var(--accent-success);">Insertion Sort</strong>
â”‚          (simple, low overhead, fast for small n)
â””â”€ âœ— NO  â†’ <strong style="color: var(--accent-success);">In-place Quicksort</strong>
           (fastest on average, good cache performance)</div>
                </div>

                <div class="success-box" style="margin-top: 30px;">
                    <h4 class="info-box-title" style="color: var(--accent-success);">ğŸ’¡ Key Takeaways</h4>
                    <div class="info-box-content">
                        <ul style="list-style: none; padding-left: 0;">
                            <li style="padding: 5px 0;">âœ“ <strong>No single "best" algorithm</strong> - it depends on constraints</li>
                            <li style="padding: 5px 0;">âœ“ <strong>Space-time tradeoff is real</strong> - Merge sort trades 2x memory for guaranteed performance</li>
                            <li style="padding: 5px 0;">âœ“ <strong>Cache matters</strong> - In-place algorithms often outperform despite same Big-O</li>
                            <li style="padding: 5px 0;">âœ“ <strong>Context is king</strong> - embedded systems need different solutions than servers</li>
                            <li style="padding: 5px 0;">âœ“ <strong>Production systems use hybrids</strong> - Python's Timsort combines merge sort and insertion sort</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Real-World LRU Cache Implementation -->
        <div class="section" id="lru-cache" style="margin-top: 60px;">
            <h3 class="section-subtitle">
                <span style="color: #06b6d4;">Real-World Decision Example:</span> LRU Cache Implementation
            </h3>

            <div class="info-box" style="border-color: #06b6d4; margin-top: 30px;">
                <h4 class="info-box-title" style="color: #06b6d4;">ğŸ“‹ Requirements</h4>
                <div class="info-box-content">
                    <ul style="list-style: none; padding-left: 0;">
                        <li><strong>Get(key):</strong> O(1)</li>
                        <li><strong>Put(key, value):</strong> O(1)</li>
                        <li><strong>Eviction:</strong> Least recently used when full</li>
                        <li><strong>Capacity:</strong> 10,000 entries</li>
                    </ul>
                </div>
            </div>

            <div style="margin-top: 30px;">
                <!-- Option 1: Array + Timestamps -->
                <div class="toggle-section">
                    <div class="toggle-header" onclick="toggleContent(this)">
                        <span class="toggle-title">âŒ Option 1: Array + Timestamps (REJECTED)</span>
                        <span class="toggle-icon">â–¼</span>
                    </div>
                    <div class="toggle-content">
                        <div class="toggle-inner">
                            <div class="code-block">
                                <div class="code-header">
                                    <span>Python - Array Based LRU</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <div class="code-content">
<pre><code><span class="keyword">class</span> <span class="function">LRUArray</span>:
    <span class="keyword">def</span> <span class="function">__init__</span>(self, capacity):
        self.capacity = capacity
        self.cache = []  <span class="comment"># [(key, value, timestamp), ...]</span>
        self.time = <span class="number">0</span>
    
    <span class="keyword">def</span> <span class="function">get</span>(self, key):
        <span class="comment"># âŒ Find key: O(n) - VIOLATES REQUIREMENT</span>
        <span class="keyword">for</span> i, (k, v, t) <span class="keyword">in</span> <span class="function">enumerate</span>(self.cache):
            <span class="keyword">if</span> k == key:
                self.cache[i] = (k, v, self.time)
                self.time += <span class="number">1</span>
                <span class="keyword">return</span> v
        <span class="keyword">return</span> <span class="keyword">None</span>
    
    <span class="keyword">def</span> <span class="function">put</span>(self, key, value):
        <span class="comment"># âŒ Find if exists: O(n)</span>
        <span class="comment"># âŒ Find LRU: O(n)</span>
        <span class="comment"># âŒ Total: O(n) - VIOLATES REQUIREMENT</span>
        <span class="keyword">pass</span>

<span class="comment"># âŒ Rejected: Can't achieve O(1) operations</span></code></pre>
                                </div>
                            </div>

                            <div class="warning-box" style="margin-top: 20px; border-color: var(--accent-danger);">
                                <h4 class="info-box-title" style="color: var(--accent-danger);">âŒ Why This Fails</h4>
                                <div class="info-box-content">
                                    <ul style="list-style: none; padding-left: 0;">
                                        <li>âŒ <strong>Get operation:</strong> Must scan entire array to find key â†’ O(n)</li>
                                        <li>âŒ <strong>Put operation:</strong> Must find LRU by scanning timestamps â†’ O(n)</li>
                                        <li>âŒ <strong>For 10,000 entries:</strong> Average 5,000 comparisons per operation</li>
                                        <li>âŒ <strong>Result:</strong> Cannot meet O(1) requirement</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Option 2: Hash Map Only -->
                <div class="toggle-section" style="margin-top: 20px;">
                    <div class="toggle-header" onclick="toggleContent(this)">
                        <span class="toggle-title">âš ï¸ Option 2: Hash Map Only (PARTIAL)</span>
                        <span class="toggle-icon">â–¼</span>
                    </div>
                    <div class="toggle-content">
                        <div class="toggle-inner">
                            <div class="code-block">
                                <div class="code-header">
                                    <span>Python - Hash Map Based LRU</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <div class="code-content">
<pre><code><span class="keyword">class</span> <span class="function">LRUHashMap</span>:
    <span class="keyword">def</span> <span class="function">__init__</span>(self, capacity):
        self.capacity = capacity
        self.cache = {}  <span class="comment"># {key: (value, timestamp)}</span>
        self.time = <span class="number">0</span>
    
    <span class="keyword">def</span> <span class="function">get</span>(self, key):
        <span class="keyword">if</span> key <span class="keyword">in</span> self.cache:  <span class="comment"># âœ“ O(1)</span>
            value, _ = self.cache[key]
            self.cache[key] = (value, self.time)
            self.time += <span class="number">1</span>
            <span class="keyword">return</span> value
        <span class="keyword">return</span> <span class="keyword">None</span>
    
    <span class="keyword">def</span> <span class="function">put</span>(self, key, value):
        <span class="keyword">if</span> <span class="function">len</span>(self.cache) >= self.capacity <span class="keyword">and</span> key <span class="keyword">not in</span> self.cache:
            <span class="comment"># âŒ Find LRU: O(n) - VIOLATES REQUIREMENT</span>
            lru_key = <span class="function">min</span>(self.cache, key=<span class="keyword">lambda</span> k: self.cache[k][<span class="number">1</span>])
            <span class="keyword">del</span> self.cache[lru_key]
        
        self.cache[key] = (value, self.time)
        self.time += <span class="number">1</span>

<span class="comment"># âš ï¸ Rejected: Eviction is O(n)</span></code></pre>
                                </div>
                            </div>

                            <div class="warning-box" style="margin-top: 20px; border-color: #f59e0b;">
                                <h4 class="info-box-title" style="color: #f59e0b;">âš ï¸ Partial Solution</h4>
                                <div class="info-box-content">
                                    <ul style="list-style: none; padding-left: 0;">
                                        <li>âœ“ <strong>Get operation:</strong> O(1) lookup and update</li>
                                        <li>âŒ <strong>Eviction:</strong> Must scan all entries to find minimum timestamp â†’ O(n)</li>
                                        <li>âš ï¸ <strong>Problem:</strong> Hash map doesn't maintain order</li>
                                        <li>âš ï¸ <strong>Result:</strong> Good for reads, poor for capacity-limited caches</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Option 3: Hash Map + Doubly Linked List -->
                <div class="toggle-section" style="margin-top: 20px;">
                    <div class="toggle-header" onclick="toggleContent(this)">
                        <span class="toggle-title">âœ… Option 3: Hash Map + Doubly Linked List (OPTIMAL)</span>
                        <span class="toggle-icon">â–¼</span>
                    </div>
                    <div class="toggle-content">
                        <div class="toggle-inner">
                            <div class="code-block">
                                <div class="code-header">
                                    <span>Python - Optimal LRU Cache</span>
                                    <button class="copy-button" onclick="copyCode(this)">Copy</button>
                                </div>
                                <div class="code-content">
<pre><code><span class="keyword">class</span> <span class="function">Node</span>:
    <span class="keyword">def</span> <span class="function">__init__</span>(self, key, value):
        self.key = key
        self.value = value
        self.prev = <span class="keyword">None</span>
        self.next = <span class="keyword">None</span>

<span class="keyword">class</span> <span class="function">LRUOptimal</span>:
    <span class="keyword">def</span> <span class="function">__init__</span>(self, capacity):
        self.capacity = capacity
        self.cache = {}  <span class="comment"># {key: Node}</span>
        
        <span class="comment"># Dummy head and tail for easy insertion/deletion</span>
        self.head = <span class="function">Node</span>(<span class="number">0</span>, <span class="number">0</span>)
        self.tail = <span class="function">Node</span>(<span class="number">0</span>, <span class="number">0</span>)
        self.head.next = self.tail
        self.tail.prev = self.head
    
    <span class="keyword">def</span> <span class="function">_remove</span>(self, node):
        <span class="string">"""Remove node from linked list: O(1)"""</span>
        prev_node = node.prev
        next_node = node.next
        prev_node.next = next_node
        next_node.prev = prev_node
    
    <span class="keyword">def</span> <span class="function">_add_to_head</span>(self, node):
        <span class="string">"""Add node right after head: O(1)"""</span>
        node.next = self.head.next
        node.prev = self.head
        self.head.next.prev = node
        self.head.next = node
    
    <span class="keyword">def</span> <span class="function">get</span>(self, key):
        <span class="string">"""O(1) operation"""</span>
        <span class="keyword">if</span> key <span class="keyword">in</span> self.cache:
            node = self.cache[key]
            <span class="comment"># Move to front (most recently used)</span>
            self._remove(node)
            self._add_to_head(node)
            <span class="keyword">return</span> node.value
        <span class="keyword">return</span> <span class="keyword">None</span>
    
    <span class="keyword">def</span> <span class="function">put</span>(self, key, value):
        <span class="string">"""O(1) operation"""</span>
        <span class="keyword">if</span> key <span class="keyword">in</span> self.cache:
            <span class="comment"># Update existing</span>
            node = self.cache[key]
            node.value = value
            self._remove(node)
            self._add_to_head(node)
        <span class="keyword">else</span>:
            <span class="comment"># Add new</span>
            <span class="keyword">if</span> <span class="function">len</span>(self.cache) >= self.capacity:
                <span class="comment"># Evict LRU (tail.prev)</span>
                lru = self.tail.prev
                self._remove(lru)
                <span class="keyword">del</span> self.cache[lru.key]
            
            new_node = <span class="function">Node</span>(key, value)
            self._add_to_head(new_node)
            self.cache[key] = new_node

<span class="comment"># âœ… All operations O(1)</span></code></pre>
                                </div>
                            </div>

                            <div class="visual-diagram" style="margin-top: 20px;">
                                <div class="diagram-title">Hybrid Data Structure Visualization</div>
                                <div class="diagram-content">Hash Map:                    Linked List (recency order):
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
{                            Head â‡„ [Node C] â‡„ [Node A] â‡„ [Node B] â‡„ Tail
  'A': Node A  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
  'B': Node B  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  'C': Node C  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
}

Operations:

1. get('A'):
   â”œâ”€ Hash map lookup: O(1) âœ“
   â”œâ”€ Remove Node A from middle: O(1) âœ“
   â””â”€ Add Node A to head: O(1) âœ“
   
   Result: Head â‡„ [Node A] â‡„ [Node C] â‡„ [Node B] â‡„ Tail

2. put('D', value) when full:
   â”œâ”€ Identify LRU (tail.prev = Node B): O(1) âœ“
   â”œâ”€ Remove Node B: O(1) âœ“
   â”œâ”€ Delete from hash map: O(1) âœ“
   â”œâ”€ Create Node D: O(1) âœ“
   â””â”€ Add to head: O(1) âœ“
   
   Result: Head â‡„ [Node D] â‡„ [Node A] â‡„ [Node C] â‡„ Tail

Memory Layout:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
Per entry: key (8B) + value (8B) + prev (8B) + next (8B)
Total per entry: 32 bytes
Hash map overhead: Ã—1.5
Total: 10,000 Ã— 32 Ã— 1.5 = 480 KB

Tradeoff: Used more memory (pointers) to achieve O(1) time</div>
                            </div>

                            <div class="success-box" style="margin-top: 20px;">
                                <h4 class="info-box-title" style="color: var(--accent-success);">ğŸ’¡ Why This Design Works</h4>
                                <div class="info-box-content">
                                    <p style="margin-bottom: 15px;"><strong>Hash Map Contribution:</strong></p>
                                    <ul style="list-style: none; padding-left: 20px; margin-bottom: 15px;">
                                        <li>âœ“ Provides O(1) lookup by key</li>
                                        <li>âœ— But doesn't maintain order</li>
                                    </ul>
                                    
                                    <p style="margin-bottom: 15px;"><strong>Doubly Linked List Contribution:</strong></p>
                                    <ul style="list-style: none; padding-left: 20px; margin-bottom: 15px;">
                                        <li>âœ“ Maintains order (head = most recent, tail = least recent)</li>
                                        <li>âœ“ O(1) insertion/deletion with node reference</li>
                                        <li>âœ— But O(n) search</li>
                                    </ul>
                                    
                                    <p style="margin-bottom: 15px;"><strong>Combined:</strong></p>
                                    <ul style="list-style: none; padding-left: 20px;">
                                        <li>ğŸ¯ Hash map stores key â†’ node reference</li>
                                        <li>ğŸ¯ Linked list maintains recency order</li>
                                        <li>ğŸ¯ Together: O(1) for ALL operations!</li>
                                        <li>ğŸ¯ Classic example of hybrid data structures</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Final Framework: Memory Decision Checklist -->
        <div class="section" id="checklist" style="margin-top: 60px;">
            <h3 class="section-subtitle">
                <span style="color: #10b981;">ğŸ“‹ Final Framework:</span> The Memory Decision Checklist
            </h3>

            <div class="info-box" style="border-color: #10b981; margin-top: 30px;">
                <h4 class="info-box-title" style="color: #10b981;">When designing any algorithm, systematically evaluate:</h4>
            </div>

            <div style="margin-top: 30px;">
                <!-- Checklist Category 1 -->
                <div class="toggle-section">
                    <div class="toggle-header" onclick="toggleContent(this)">
                        <span class="toggle-title">1ï¸âƒ£ Space Complexity Assessment</span>
                        <span class="toggle-icon">â–¼</span>
                    </div>
                    <div class="toggle-content">
                        <div class="toggle-inner">
                            <div class="info-box" style="border-color: #06b6d4;">
                                <div class="info-box-content">
                                    <ul style="list-style: none; padding-left: 0;">
                                        <li style="padding: 10px 0; border-bottom: 1px solid rgba(255,255,255,0.1);">
                                            <input type="checkbox" style="margin-right: 10px; transform: scale(1.2);">
                                            <strong>Can I solve this in-place?</strong> (O(1) space)
                                        </li>
                                        <li style="padding: 10px 0; border-bottom: 1px solid rgba(255,255,255,0.1);">
                                            <input type="checkbox" style="margin-right: 10px; transform: scale(1.2);">
                                            <strong>Do I need O(n) auxiliary space?</strong> (Hash map, array, stack, queue)
                                        </li>
                                        <li style="padding: 10px 0; border-bottom: 1px solid rgba(255,255,255,0.1);">
                                            <input type="checkbox" style="margin-right: 10px; transform: scale(1.2);">
                                            <strong>Will I need O(nÂ²) or more?</strong> (Matrix, recursion tree, dynamic programming table)
                                        </li>
                                        <li style="padding: 10px 0; border-bottom: 1px solid rgba(255,255,255,0.1);">
                                            <input type="checkbox" style="margin-right: 10px; transform: scale(1.2);">
                                            <strong>Can I use output space as working space?</strong> (Reuse result array)
                                        </li>
                                        <li style="padding: 10px 0;">
                                            <input type="checkbox" style="margin-right: 10px; transform: scale(1.2);">
                                            <strong>Can I modify input to save space?</strong> (If allowed, can eliminate extra structures)
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Checklist Category 2 -->
                <div class="toggle-section" style="margin-top: 20px;">
                    <div class="toggle-header" onclick="toggleContent(this)">
                        <span class="toggle-title">2ï¸âƒ£ Cache Consciousness</span>
                        <span class="toggle-icon">â–¼</span>
                    </div>
                    <div class="toggle-content">
                        <div class="toggle-inner">
                            <div class="info-box" style="border-color: #8b5cf6;">
                                <div class="info-box-content">
                                    <ul style="list-style: none; padding-left: 0;">
                                        <li style="padding: 10px 0; border-bottom: 1px solid rgba(255,255,255,0.1);">
                                            <input type="checkbox" style="margin-right: 10px; transform: scale(1.2);">
                                            <strong>Am I accessing data sequentially?</strong> (Row-major order, linear scan)
                                        </li>
                                        <li style="padding: 10px 0; border-bottom: 1px solid rgba(255,255,255,0.1);">
                                            <input type="checkbox" style="margin-right: 10px; transform: scale(1.2);">
                                            <strong>Am I reusing recently accessed data?</strong> (Temporal locality)
                                        </li>
                                        <li style="padding: 10px 0; border-bottom: 1px solid rgba(255,255,255,0.1);">
                                            <input type="checkbox" style="margin-right: 10px; transform: scale(1.2);">
                                            <strong>Are my data structures contiguous?</strong> (Arrays vs linked structures)
                                        </li>
                                        <li style="padding: 10px 0; border-bottom: 1px solid rgba(255,255,255,0.1);">
                                            <input type="checkbox" style="margin-right: 10px; transform: scale(1.2);">
                                            <strong>Can I restructure for better locality?</strong> (Loop reordering, AoS vs SoA)
                                        </li>
                                        <li style="padding: 10px 0;">
                                            <input type="checkbox" style="margin-right: 10px; transform: scale(1.2);">
                                            <strong>Should I use blocking/tiling?</strong> (For large datasets that don't fit in cache)
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Checklist Category 3 -->
                <div class="toggle-section" style="margin-top: 20px;">
                    <div class="toggle-header" onclick="toggleContent(this)">
                        <span class="toggle-title">3ï¸âƒ£ Memory vs Time Tradeoff</span>
                        <span class="toggle-icon">â–¼</span>
                    </div>
                    <div class="toggle-content">
                        <div class="toggle-inner">
                            <div class="info-box" style="border-color: #f59e0b;">
                                <div class="info-box-content">
                                    <ul style="list-style: none; padding-left: 0;">
                                        <li style="padding: 10px 0; border-bottom: 1px solid rgba(255,255,255,0.1);">
                                            <input type="checkbox" style="margin-right: 10px; transform: scale(1.2);">
                                            <strong>Can I precompute to save time?</strong> (Prefix sums, lookup tables)
                                        </li>
                                        <li style="padding: 10px 0; border-bottom: 1px solid rgba(255,255,255,0.1);">
                                            <input type="checkbox" style="margin-right: 10px; transform: scale(1.2);">
                                            <strong>Can I use memoization?</strong> (Cache results of expensive computations)
                                        </li>
                                        <li style="padding: 10px 0; border-bottom: 1px solid rgba(255,255,255,0.1);">
                                            <input type="checkbox" style="margin-right: 10px; transform: scale(1.2);">
                                            <strong>Is the speedup worth the memory cost?</strong> (Quantify both dimensions)
                                        </li>
                                        <li style="padding: 10px 0; border-bottom: 1px solid rgba(255,255,255,0.1);">
                                            <input type="checkbox" style="margin-right: 10px; transform: scale(1.2);">
                                            <strong>What's my memory budget?</strong> (Embedded system vs cloud server)
                                        </li>
                                        <li style="padding: 10px 0;">
                                            <input type="checkbox" style="margin-right: 10px; transform: scale(1.2);">
                                            <strong>How many queries vs one-time computation?</strong> (Amortized analysis)
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Checklist Category 4 -->
                <div class="toggle-section" style="margin-top: 20px;">
                    <div class="toggle-header" onclick="toggleContent(this)">
                        <span class="toggle-title">4ï¸âƒ£ Data Structure Choice</span>
                        <span class="toggle-icon">â–¼</span>
                    </div>
                    <div class="toggle-content">
                        <div class="toggle-inner">
                            <div class="info-box" style="border-color: #10b981;">
                                <div class="info-box-content">
                                    <ul style="list-style: none; padding-left: 0;">
                                        <li style="padding: 10px 0; border-bottom: 1px solid rgba(255,255,255,0.1);">
                                            <input type="checkbox" style="margin-right: 10px; transform: scale(1.2);">
                                            <strong>What operations are most frequent?</strong> (Optimize the hot path)
                                        </li>
                                        <li style="padding: 10px 0; border-bottom: 1px solid rgba(255,255,255,0.1);">
                                            <input type="checkbox" style="margin-right: 10px; transform: scale(1.2);">
                                            <strong>What's the access pattern?</strong> (FIFO, LIFO, Random, Sequential)
                                        </li>
                                        <li style="padding: 10px 0; border-bottom: 1px solid rgba(255,255,255,0.1);">
                                            <input type="checkbox" style="margin-right: 10px; transform: scale(1.2);">
                                            <strong>How much data?</strong> (Small dataset vs big data)
                                        </li>
                                        <li style="padding: 10px 0; border-bottom: 1px solid rgba(255,255,255,0.1);">
                                            <input type="checkbox" style="margin-right: 10px; transform: scale(1.2);">
                                            <strong>What are time requirements?</strong> (Real-time, batch processing, interactive)
                                        </li>
                                        <li style="padding: 10px 0;">
                                            <input type="checkbox" style="margin-right: 10px; transform: scale(1.2);">
                                            <strong>What are space constraints?</strong> (Embedded, mobile, server, cloud)
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Conclusion -->
        <div class="section" id="conclusion" style="margin-top: 60px;">
            <div class="section-header">
                <h2 class="section-title">âœ… HOUR 2 COMPLETE - LOGIC MASTERY ACHIEVED</h2>
                <p class="section-description" style="font-size: 1.1em;">You now have the memory optimization instincts of a senior engineer</p>
            </div>

            <div style="margin-top: 40px;">
                <h3 class="section-subtitle" style="margin-bottom: 30px;">
                    <span style="color: #10b981;">ğŸ¯ Key Principles Internalized</span>
                </h3>

                <div class="toggle-section">
                    <div class="toggle-header" onclick="toggleContent(this)">
                        <span class="toggle-title">1. Data Structure Selection</span>
                        <span class="toggle-icon">â–¼</span>
                    </div>
                    <div class="toggle-content">
                        <div class="toggle-inner">
                            <div class="success-box">
                                <div class="info-box-content">
                                    <ul style="margin: 0; padding-left: 20px;">
                                        <li>Choose based on <strong>operation frequency</strong></li>
                                        <li>Consider both <strong>time AND space</strong></li>
                                        <li>Understand <strong>memory layout implications</strong></li>
                                        <li>Match structure to <strong>access pattern</strong></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="toggle-section" style="margin-top: 20px;">
                    <div class="toggle-header" onclick="toggleContent(this)">
                        <span class="toggle-title">2. Algorithm Design</span>
                        <span class="toggle-icon">â–¼</span>
                    </div>
                    <div class="toggle-content">
                        <div class="toggle-inner">
                            <div class="success-box">
                                <div class="info-box-content">
                                    <ul style="margin: 0; padding-left: 20px;">
                                        <li>Prefer <strong>in-place</strong> when possible</li>
                                        <li>Use <strong>streaming</strong> for large data</li>
                                        <li>Apply <strong>lazy evaluation</strong> when appropriate</li>
                                        <li>Employ <strong>sliding window</strong> to reuse computation</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="toggle-section" style="margin-top: 20px;">
                    <div class="toggle-header" onclick="toggleContent(this)">
                        <span class="toggle-title">3. Cache Optimization</span>
                        <span class="toggle-icon">â–¼</span>
                    </div>
                    <div class="toggle-content">
                        <div class="toggle-inner">
                            <div class="success-box">
                                <div class="info-box-content">
                                    <ul style="margin: 0; padding-left: 20px;">
                                        <li>Access data <strong>sequentially</strong> when possible</li>
                                        <li>Use <strong>SoA</strong> for parallel field access</li>
                                        <li>Apply <strong>blocking</strong> for large datasets</li>
                                        <li>Maintain <strong>temporal locality</strong></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="toggle-section" style="margin-top: 20px;">
                    <div class="toggle-header" onclick="toggleContent(this)">
                        <span class="toggle-title">4. Tradeoff Evaluation</span>
                        <span class="toggle-icon">â–¼</span>
                    </div>
                    <div class="toggle-content">
                        <div class="toggle-inner">
                            <div class="success-box">
                                <div class="info-box-content">
                                    <ul style="margin: 0; padding-left: 20px;">
                                        <li>Quantify <strong>time vs space costs</strong></li>
                                        <li>Consider <strong>cache effects</strong></li>
                                        <li>Account for <strong>code complexity</strong></li>
                                        <li>Choose based on <strong>requirements, not assumptions</strong></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Mental Models -->
            <div style="margin-top: 50px;">
                <h3 class="section-subtitle" style="margin-bottom: 30px;">
                    <span style="color: #06b6d4;">ğŸ’­ Mental Models to Carry Forward</span>
                </h3>

                <div class="info-box" style="border-color: #06b6d4;">
                    <div class="info-box-content">
                        <div style="padding: 20px 0; border-bottom: 1px solid rgba(255,255,255,0.1);">
                            <p style="font-size: 1.1em; font-style: italic; color: var(--accent-primary);">
                                "The fastest data structure is the one that fits in cache."
                            </p>
                        </div>
                        <div style="padding: 20px 0; border-bottom: 1px solid rgba(255,255,255,0.1);">
                            <p style="font-size: 1.1em; font-style: italic; color: var(--accent-secondary);">
                                "O(1) space doesn't mean fast if cache misses make it O(n) time."
                            </p>
                        </div>
                        <div style="padding: 20px 0; border-bottom: 1px solid rgba(255,255,255,0.1);">
                            <p style="font-size: 1.1em; font-style: italic; color: var(--accent-success);">
                                "Memory layout matters as much as algorithm choice."
                            </p>
                        </div>
                        <div style="padding: 20px 0; border-bottom: 1px solid rgba(255,255,255,0.1);">
                            <p style="font-size: 1.1em; font-style: italic; color: var(--accent-warning);">
                                "Always ask: What's being accessed? How often? In what pattern?"
                            </p>
                        </div>
                        <div style="padding: 20px 0;">
                            <p style="font-size: 1.1em; font-style: italic; color: var(--accent-danger);">
                                "Premature optimization is evil, but ignorance of memory is worse."
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Final Message -->
            <div class="success-box" style="margin-top: 50px; text-align: center; padding: 40px;">
                <h3 style="color: var(--accent-success); font-size: 1.5em; margin-bottom: 20px;">
                    ğŸ‰ Congratulations! You've Built Powerful Memory Optimization Instincts
                </h3>
                <p style="font-size: 1.1em; margin-bottom: 30px;">
                    Take a 10-minute break. You've internalized the memory patterns that separate good engineers from great ones.
                </p>
                <div style="padding: 30px; background: linear-gradient(135deg, rgba(16, 185, 129, 0.1), rgba(6, 182, 212, 0.1)); border-radius: 8px; margin-top: 20px;">
                    <p style="font-size: 1em; color: rgba(255,255,255,0.9); margin-bottom: 15px;">
                        <strong>When ready, continue to Hour 3 for hands-on problem solving where you'll apply everything:</strong>
                    </p>
                    <ul style="list-style: none; padding: 0; margin: 0;">
                        <li style="padding: 8px 0;">âœ… Real problems requiring memory-aware thinking</li>
                        <li style="padding: 8px 0;">âœ… Optimization challenges</li>
                        <li style="padding: 8px 0;">âœ… Tradeoff analysis</li>
                        <li style="padding: 8px 0;">âœ… Decision-making under constraints</li>
                    </ul>
                </div>
                <p style="margin-top: 30px; font-size: 1.2em; color: var(--accent-primary);">
                    Hour 3 will cement this knowledge through practice. ğŸš€
                </p>
            </div>
        </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Smooth scroll to section
        function scrollToSection(sectionId) {
            const element = document.getElementById(sectionId);
            if (element) {
                element.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }

        // Toggle collapsible content
        function toggleContent(header) {
            const content = header.nextElementSibling;
            const icon = header.querySelector('.toggle-icon');
            
            if (content.classList.contains('active')) {
                content.classList.remove('active');
                content.style.maxHeight = '0';
                icon.style.transform = 'rotate(0deg)';
            } else {
                content.classList.add('active');
                content.style.maxHeight = content.scrollHeight + 'px';
                icon.style.transform = 'rotate(180deg)';
                
                // Recalculate on window resize
                window.addEventListener('resize', () => {
                    if (content.classList.contains('active')) {
                        content.style.maxHeight = content.scrollHeight + 'px';
                    }
                });
            }
        }

        // Copy code to clipboard
        function copyCode(button) {
            const codeBlock = button.closest('.code-block');
            const codeContent = codeBlock.querySelector('.code-content');
            const text = codeContent.innerText;
            
            navigator.clipboard.writeText(text).then(() => {
                const originalText = button.textContent;
                button.textContent = 'Copied!';
                button.style.background = 'var(--accent-success)';
                
                setTimeout(() => {
                    button.textContent = originalText;
                    button.style.background = 'var(--accent-primary)';
                }, 2000);
            }).catch(err => {
                console.error('Failed to copy:', err);
            });
        }

        // Intersection Observer for scroll animations
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -100px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                }
            });
        }, observerOptions);

        // Observe all sections
        document.addEventListener('DOMContentLoaded', () => {
            const sections = document.querySelectorAll('.section');
            sections.forEach(section => {
                observer.observe(section);
            });

            // Add interactive hover effects to question cards
            const questionCards = document.querySelectorAll('.question-card');
            questionCards.forEach(card => {
                card.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateX(10px)';
                });
                card.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateX(0)';
                });
            });

            // Add pulse animation to checkpoints
            const checkpoints = document.querySelectorAll('.checkpoint');
            checkpoints.forEach((checkpoint, index) => {
                checkpoint.style.animationDelay = `${index * 0.1}s`;
            });

            // Syntax highlighting for code blocks
            highlightCode();
        });

        // Simple syntax highlighting
        function highlightCode() {
            const codeBlocks = document.querySelectorAll('.code-content code');
            codeBlocks.forEach(block => {
                let html = block.innerHTML;
                
                // Keywords
                html = html.replace(/\b(def|class|if|else|elif|for|while|return|import|from|try|except|with|as|in|not|and|or|None|True|False|self|raise|yield|async|await)\b/g, 
                    '<span class="keyword">$1</span>');
                
                // Strings
                html = html.replace(/(".*?"|'.*?')/g, '<span class="string">$1</span>');
                
                // Numbers
                html = html.replace(/\b(\d+)\b/g, '<span class="number">$1</span>');
                
                // Comments
                html = html.replace(/(#.*$)/gm, '<span class="comment">$1</span>');
                
                // Functions
                html = html.replace(/\b([a-z_][a-z0-9_]*)\s*\(/gi, '<span class="function">$1</span>(');
                
                block.innerHTML = html;
            });
        }

        // Add interactive code execution visualization (simulated)
        function visualizeExecution(codeElement) {
            const lines = codeElement.querySelectorAll('.code-line');
            let currentLine = 0;
            
            const interval = setInterval(() => {
                if (currentLine > 0) {
                    lines[currentLine - 1].style.background = 'transparent';
                }
                
                if (currentLine < lines.length) {
                    lines[currentLine].style.background = 'rgba(0, 217, 255, 0.2)';
                    lines[currentLine].style.transition = 'background 0.3s ease';
                    currentLine++;
                } else {
                    clearInterval(interval);
                    // Reset after completion
                    setTimeout(() => {
                        lines.forEach(line => line.style.background = 'transparent');
                    }, 1000);
                }
            }, 500);
        }

        // Progress tracking
        let progressData = {
            sectionsViewed: new Set(),
            examplesCompleted: new Set(),
            totalTime: 0
        };

        function trackProgress(sectionId) {
            progressData.sectionsViewed.add(sectionId);
            updateProgressDisplay();
        }

        function updateProgressDisplay() {
            const totalSections = 4;
            const viewed = progressData.sectionsViewed.size;
            const percentage = (viewed / totalSections) * 100;
            
            console.log(`Progress: ${percentage}% (${viewed}/${totalSections} sections viewed)`);
        }

        // Add keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            // Press 'c' to collapse/expand all toggles
            if (e.key === 'c' && e.ctrlKey) {
                e.preventDefault();
                const allToggles = document.querySelectorAll('.toggle-header');
                allToggles.forEach(toggle => toggleContent(toggle));
            }
            
            // Press '?' to show keyboard shortcuts
            if (e.key === '?') {
                alert('Keyboard Shortcuts:\n\n' +
                      'Ctrl+C: Toggle all sections\n' +
                      '?: Show this help');
            }
        });

        // Dark mode preference detection
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches) {
            console.log('User prefers light mode, but using dark theme for better code visibility');
        }

        // Performance monitoring
        window.addEventListener('load', () => {
            const loadTime = performance.now();
            console.log(`Page loaded in ${loadTime.toFixed(2)}ms`);
        });

        // Add tooltips to complex terms
        function addTooltips() {
            const terms = {
                'O(1)': 'Constant time - operation takes same time regardless of input size',
                'O(n)': 'Linear time - operation time grows proportionally with input size',
                'O(log n)': 'Logarithmic time - operation time grows slowly as input size doubles',
                'cache': 'Fast memory close to CPU that stores frequently accessed data',
                'heap': 'Tree-based data structure where parent is always greater (or lesser) than children'
            };
            
            Object.keys(terms).forEach(term => {
                const regex = new RegExp(`\\b${term}\\b`, 'gi');
                // Add tooltip implementation here
            });
        }

        // Initialize tooltips
        addTooltips();

        // Add smooth reveal animation on scroll
        const revealElements = document.querySelectorAll('.question-card, .code-block, .info-box');
        const revealObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.animation = 'fadeInUp 0.6s ease forwards';
                }
            });
        }, { threshold: 0.1 });

        revealElements.forEach(el => revealObserver.observe(el));
    </script>
</body>
</html>
