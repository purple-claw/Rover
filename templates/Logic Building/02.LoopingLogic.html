<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-2RQWYRT51K"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-2RQWYRT51K');
    </script>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rover - Looping Logic</title>
    <style>
        /* ==================== FONT IMPORT ==================== */
        @import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;500;600;700&display=swap');

        /* ==================== GLASSMORPHISM THEME ==================== */
        :root {
            /* Pure Black Base */
            --bg-primary: #000000;
            --bg-secondary: #0a0a0a;
            
            /* Glass Effect Colors */
            --glass-white: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
            --glass-highlight: rgba(255, 255, 255, 0.15);
            
            /* McLaren Orange */
            --mclaren-orange: #FF8000;
            --mclaren-glow: rgba(255, 128, 0, 0.3);
            --mclaren-light: #FFA040;
            --mclaren-dark: #CC6600;
            
            /* RedBull Red */
            --redbull-red: #DC0000;
            --redbull-blue: #1E41FF;
            --redbull-glow: rgba(220, 0, 0, 0.3);
            --redbull-light: #FF3333;
            
            /* Meta Blue */
            --meta-blue: #0081FB;
            --meta-glow: rgba(0, 129, 251, 0.3);
            --meta-light: #33A3FF;
            --meta-dark: #0066CC;
            
            /* Text Colors - Ultra White */
            --text-primary: #FFFFFF;
            --text-secondary: #FFFFFF;
            --text-muted: rgba(255, 255, 255, 0.9);
            --text-dim: rgba(255, 255, 255, 0.7);
            
            /* Code Syntax */
            --code-bg: rgba(20, 20, 20, 0.6);
            --code-keyword: #FF8000;
            --code-function: #0081FB;
            --code-string: #3fb950;
            --code-comment: rgba(255, 255, 255, 0.4);
            --code-number: #DC0000;
            --code-variable: #FFA040;
            
            /* Layout */
            --container-width: 1100px;
            --spacing-xs: 0.5rem;
            --spacing-sm: 1rem;
            --spacing-md: 1.5rem;
            --spacing-lg: 2rem;
            --spacing-xl: 2.5rem;
            --spacing-2xl: 3rem;
            
            /* Border Radius */
            --radius-sm: 8px;
            --radius-md: 12px;
            --radius-lg: 16px;
            --radius-xl: 24px;
            
            /* Animations */
            --transition-fast: 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-normal: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-slow: 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            overflow-x: hidden;
            width: 100%;
        }

        body {
            font-family: 'Quicksand', -apple-system, BlinkMacSystemFont, sans-serif;
            background: #000000;
            color: #FFFFFF;
            line-height: 1.7;
            overflow-x: hidden;
            position: relative;
            font-size: 16px;
            font-weight: 400;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            width: 100%;
            max-width: 100vw;
        }

        h1, h2, h3, h4 {
            font-family: 'Quicksand', sans-serif;
            font-weight: 600;
            letter-spacing: -0.03em;
        }

        code, pre {
            font-family: 'Courier New', monospace;
            font-weight: 400;
        }

        /* Progress Bar */
        #reading-progress {
            position: fixed;
            top: 0;
            left: 0;
            width: 0%;
            height: 3px;
            background: linear-gradient(90deg, var(--mclaren-orange), var(--mclaren-light));
            box-shadow: 0 0 10px var(--mclaren-glow);
            z-index: 9999;
            transition: width 0.1s ease;
        }

        /* Glass Container */
        .container {
            max-width: var(--container-width);
            margin: 0 auto;
            padding: 0 var(--spacing-lg);
            position: relative;
            z-index: 1;
        }

        /* Navigation */
        nav {
            position: sticky;
            top: 0;
            z-index: 1000;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(24px) saturate(180%);
            -webkit-backdrop-filter: blur(24px) saturate(180%);
            border-bottom: 1px solid rgba(255, 255, 255, 0.12);
            padding: 0.75rem 0;
            box-shadow: 
                0 1px 3px rgba(0, 0, 0, 0.5),
                0 1px 20px rgba(255, 128, 0, 0.1),
                inset 0 -1px 0 rgba(255, 255, 255, 0.05);
        }

        nav::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, 
                transparent,
                rgba(255, 128, 0, 0.3) 20%,
                rgba(255, 128, 0, 0.5) 50%,
                rgba(255, 128, 0, 0.3) 80%,
                transparent
            );
            opacity: 0.8;
        }

        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 2rem;
            padding: 0 var(--spacing-lg);
            max-width: var(--container-width);
            margin: 0 auto;
        }

        .nav-logo {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--mclaren-orange);
            text-decoration: none;
            letter-spacing: 0.1em;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
        }

        .nav-link {
            color: rgba(255, 255, 255, 0.8);
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
            transition: all var(--transition-fast);
            position: relative;
            padding: 0.5rem 0;
        }

        .nav-link:hover {
            color: var(--mclaren-orange);
            text-shadow: 0 0 20px var(--mclaren-glow);
        }

        .nav-link.active::after {
            content: '';
            position: absolute;
            bottom: -3px;
            left: 0;
            right: 0;
            height: 2px;
            background: var(--mclaren-orange);
            box-shadow: 0 0 10px var(--mclaren-glow);
        }

        /* Hamburger Menu */
        .hamburger {
            display: none;
            flex-direction: column;
            gap: 5px;
            background: none;
            border: none;
            cursor: pointer;
            padding: 8px;
            z-index: 1001;
        }

        .hamburger span {
            display: block;
            width: 25px;
            height: 2px;
            background: var(--mclaren-orange);
            transition: all 0.3s ease;
            border-radius: 2px;
        }

        .hamburger.active span:nth-child(1) {
            transform: rotate(45deg) translate(7px, 7px);
        }

        .hamburger.active span:nth-child(2) {
            opacity: 0;
        }

        .hamburger.active span:nth-child(3) {
            transform: rotate(-45deg) translate(7px, -7px);
        }

        .mobile-overlay {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(5px);
            z-index: 999;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .mobile-overlay.active {
            display: block;
            opacity: 1;
        }

        /* Hero Section */
        .hero {
            padding: var(--spacing-2xl) 0;
            text-align: center;
            position: relative;
            margin-bottom: var(--spacing-xl);
            z-index: 1;
        }

        .hero h1 {
            font-size: 3.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: var(--mclaren-orange);
            background: linear-gradient(135deg, 
                var(--mclaren-orange) 0%, 
                var(--mclaren-light) 50%, 
                var(--mclaren-orange) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: glow 3s ease-in-out infinite;
        }

        @supports not (background-clip: text) {
            .hero h1 {
                color: var(--mclaren-orange) !important;
                -webkit-text-fill-color: var(--mclaren-orange) !important;
            }
        }

        @keyframes glow {
            0%, 100% { filter: brightness(1); }
            50% { filter: brightness(1.2); }
        }

        .hero p {
            font-size: 1.3rem;
            color: var(--text-muted);
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.6;
        }

        /* Table of Contents */
        .toc {
            background: var(--glass-white);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-md);
            padding: var(--spacing-lg);
            margin: var(--spacing-xl) 0;
        }

        .toc h2 {
            font-size: 1.5rem;
            margin-bottom: var(--spacing-md);
            color: var(--mclaren-orange);
        }

        .toc ul {
            list-style: none;
        }

        .toc li {
            margin: var(--spacing-sm) 0;
            padding-left: var(--spacing-md);
            border-left: 2px solid transparent;
            transition: all var(--transition-fast);
        }

        .toc li:hover {
            border-left-color: var(--mclaren-orange);
            padding-left: calc(var(--spacing-md) + 5px);
        }

        .toc a {
            color: var(--text-muted);
            text-decoration: none;
            transition: color var(--transition-fast);
        }

        .toc a:hover {
            color: var(--mclaren-orange);
        }

        /* Section Styling */
        .section {
            margin-bottom: var(--spacing-2xl);
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.8s ease;
        }

        .section.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .section-header {
            margin-bottom: var(--spacing-lg);
            padding-bottom: var(--spacing-sm);
            border-bottom: 1px solid var(--glass-border);
        }

        .section-title {
            font-size: 2.2rem;
            color: var(--text-primary);
            margin-bottom: 0.75rem;
            font-weight: 700;
        }

        .section-subtitle {
            color: var(--text-muted);
            font-size: 1.1rem;
        }

        /* Explanatory Blocks */
        .practical-approach {
            background: linear-gradient(135deg, 
                rgba(0, 129, 251, 0.1), 
                rgba(0, 129, 251, 0.05));
            border: 1px solid var(--meta-blue);
            border-left: 4px solid var(--meta-blue);
            border-radius: var(--radius-sm);
            padding: var(--spacing-md);
            margin: var(--spacing-lg) 0;
        }

        .practical-approach h3 {
            color: var(--meta-blue);
            font-size: 1.2rem;
            margin-bottom: var(--spacing-sm);
        }

        .practical-approach ul {
            margin-left: var(--spacing-lg);
            margin-top: var(--spacing-sm);
        }

        .practical-approach li {
            margin: var(--spacing-xs) 0;
            line-height: 1.8;
        }

        .theoretical-dive {
            background: linear-gradient(135deg, 
                rgba(255, 128, 0, 0.1), 
                rgba(255, 128, 0, 0.05));
            border: 1px solid var(--mclaren-orange);
            border-left: 4px solid var(--mclaren-orange);
            border-radius: var(--radius-sm);
            padding: var(--spacing-md);
            margin: var(--spacing-lg) 0;
        }

        .theoretical-dive h3 {
            color: var(--mclaren-orange);
            font-size: 1.2rem;
            margin-bottom: var(--spacing-md);
        }

        .theoretical-dive h4 {
            color: var(--mclaren-light);
            font-size: 1.05rem;
            margin-top: var(--spacing-md);
            margin-bottom: var(--spacing-xs);
            font-weight: 600;
        }

        .theoretical-dive p {
            margin: var(--spacing-sm) 0;
            line-height: 1.8;
        }

        .theory-section {
            background: rgba(0, 0, 0, 0.3);
            padding: var(--spacing-md);
            border-radius: var(--radius-sm);
            margin: var(--spacing-sm) 0;
            border-left: 3px solid rgba(255, 128, 0, 0.5);
        }

        /* Content Blocks */
        .content-block {
            background: var(--glass-white);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-md);
            padding: var(--spacing-lg);
            margin: var(--spacing-md) 0;
        }

        /* Module Structure Cards - Sleek */
        .module-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: var(--spacing-md);
            margin: var(--spacing-lg) 0;
        }

        .module-card {
            background: var(--glass-white);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-md);
            padding: var(--spacing-md);
            transition: all var(--transition-normal);
        }

        .module-card:hover {
            border-color: rgba(255, 128, 0, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 4px 16px rgba(255, 128, 0, 0.1);
        }

        .module-card h3 {
            font-size: 1.125rem;
            margin-bottom: var(--spacing-sm);
            color: var(--mclaren-orange);
            font-weight: 600;
        }

        .module-card ul {
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .module-card li {
            padding: 0.375rem 0;
            color: var(--text-muted);
            font-size: 0.9375rem;
            line-height: 1.6;
            border-bottom: 1px solid rgba(255, 255, 255, 0.03);
        }

        .module-card li:last-child {
            border-bottom: none;
        }

        .content-block h3 {
            font-size: 1.7rem;
            margin-bottom: var(--spacing-md);
            color: var(--text-primary);
            font-weight: 600;
        }

        .content-block h4 {
            font-size: 1.35rem;
            margin: var(--spacing-md) 0 var(--spacing-sm) 0;
            color: var(--mclaren-light);
            font-weight: 600;
        }

        .content-block p {
            margin: var(--spacing-sm) 0;
            line-height: 1.8;
            font-size: 1.05rem;
        }

        .content-block ul, .content-block ol {
            margin-left: var(--spacing-lg);
            margin-top: var(--spacing-sm);
        }

        .content-block li {
            margin: var(--spacing-xs) 0;
            line-height: 1.8;
        }

        /* Code Block Styling - Enhanced */
        .code-block {
            background: linear-gradient(135deg, rgba(20, 20, 20, 0.8), rgba(10, 10, 10, 0.9));
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-md);
            padding: var(--spacing-md);
            margin: var(--spacing-md) 0;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.6;
            position: relative;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            transition: all var(--transition-normal);
        }

        .code-block:hover {
            border-color: rgba(255, 128, 0, 0.3);
            box-shadow: 0 6px 20px rgba(255, 128, 0, 0.15);
        }

        .code-block pre {
            margin: 0;
            white-space: pre;
        }

        .code-block code {
            color: var(--text-primary);
        }

        /* Syntax Highlighting */
        .keyword { color: var(--code-keyword); font-weight: 600; }
        .function { color: var(--code-function); font-weight: 600; }
        .string { color: var(--code-string); }
        .comment { color: var(--code-comment); font-style: italic; }
        .number { color: var(--code-number); font-weight: 600; }
        .variable { color: var(--code-variable); }
        .operator { color: var(--text-primary); }
        .output { color: #3fb950; }

        .copy-btn {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            background: transparent;
            border: 1px solid rgba(255, 128, 0, 0.4);
            border-radius: 6px;
            padding: 0.4rem 0.9rem;
            font-size: 11px;
            font-weight: 600;
            color: var(--mclaren-orange);
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-family: 'Quicksand', sans-serif;
        }

        .copy-btn:hover {
            background: rgba(255, 128, 0, 0.1);
            border-color: var(--mclaren-orange);
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(255, 128, 0, 0.2);
        }

        .copy-btn:active {
            transform: translateY(0);
        }

        /* Feynman-Style Deep Dive */
        .feynman-dive {
            background: linear-gradient(135deg, 
                rgba(255, 128, 0, 0.03), 
                rgba(220, 0, 0, 0.03));
            border: 1px solid rgba(255, 128, 0, 0.3);
            border-radius: var(--radius-md);
            padding: var(--spacing-lg);
            margin: var(--spacing-lg) 0;
            position: relative;
            overflow: hidden;
        }

        .feynman-dive h3 {
            color: var(--mclaren-orange);
            font-size: 1.8rem;
            margin-bottom: var(--spacing-lg);
            text-shadow: 0 0 20px var(--mclaren-glow);
        }

        .feynman-dive h4 {
            color: var(--mclaren-light);
            font-size: 1.3rem;
            margin-top: var(--spacing-lg);
            margin-bottom: var(--spacing-sm);
        }

        .feynman-intro {
            font-size: 1.1rem;
            font-style: italic;
            color: var(--text-muted);
            margin-bottom: var(--spacing-lg);
            padding: var(--spacing-md);
            background: rgba(0, 0, 0, 0.3);
            border-left: 4px solid var(--mclaren-orange);
            border-radius: var(--radius-sm);
        }

        /* Interactive Demo */
        .interactive-demo {
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1.5rem 0;
            position: relative;
            transition: all 0.3s ease;
        }

        .interactive-demo:hover {
            border-color: rgba(255, 128, 0, 0.2);
            box-shadow: 0 4px 20px rgba(255, 128, 0, 0.05);
        }

        .interactive-demo h3 {
            font-size: 1.25rem;
            margin-bottom: 0.5rem;
            color: var(--mclaren-orange);
            font-weight: 600;
        }

        .demo-desc {
            color: var(--text-dim);
            margin-bottom: 1rem;
            font-size: 0.95rem;
        }

        .demo-controls {
            display: flex;
            gap: 0.75rem;
            flex-wrap: wrap;
            align-items: center;
            margin-bottom: var(--spacing-md);
            padding: 1rem;
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 10px;
        }

        .btn {
            padding: 0.6rem 1.2rem;
            font-size: 13px;
            font-weight: 600;
            background: transparent;
            border: 1px solid rgba(255, 128, 0, 0.3);
            color: var(--mclaren-orange);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            font-family: 'Quicksand', sans-serif;
        }

        .btn:hover {
            background: rgba(255, 128, 0, 0.1);
            border-color: var(--mclaren-orange);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(255, 128, 0, 0.15);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .playground-canvas {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.06);
            border-radius: 10px;
            padding: 1.25rem;
            min-height: 300px;
        }

        /* Loop Visualization */
        .loop-visual {
            display: flex;
            gap: 8px;
            padding: var(--spacing-md);
            flex-wrap: wrap;
            justify-content: center;
        }

        .iteration-box {
            min-width: 80px;
            height: 80px;
            background: linear-gradient(135deg, var(--meta-blue), var(--meta-dark));
            border: 2px solid var(--glass-border);
            border-radius: var(--radius-sm);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            transition: all var(--transition-normal);
            cursor: pointer;
        }

        .iteration-box.active {
            background: linear-gradient(135deg, var(--mclaren-orange), var(--mclaren-dark));
            transform: scale(1.15);
            box-shadow: 0 10px 30px var(--mclaren-glow);
            z-index: 10;
        }

        .iteration-box.completed {
            background: linear-gradient(135deg, #3fb950, #2ea043);
            opacity: 0.6;
        }

        .iteration-label {
            font-size: 0.75rem;
            opacity: 0.8;
        }

        .iteration-value {
            font-size: 1.25rem;
        }

        /* Info Box */
        .info-box {
            background: linear-gradient(135deg, 
                rgba(0, 129, 251, 0.1), 
                rgba(0, 129, 251, 0.05));
            border: 1px solid var(--meta-blue);
            border-radius: var(--radius-sm);
            padding: var(--spacing-md);
            margin: var(--spacing-md) 0;
            position: relative;
            padding-left: 50px;
        }

        .info-box::before {
            content: '';
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            width: 6px;
            height: 60%;
            background: var(--meta-blue);
            border-radius: 3px;
        }

        .warning-box {
            background: linear-gradient(135deg, 
                rgba(220, 0, 0, 0.1), 
                rgba(220, 0, 0, 0.05));
            border: 1px solid var(--redbull-red);
            border-radius: var(--radius-sm);
            padding: var(--spacing-md);
            margin: var(--spacing-md) 0;
            position: relative;
            padding-left: 50px;
        }

        .warning-box::before {
            content: '';
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            width: 6px;
            height: 60%;
            background: var(--redbull-red);
            border-radius: 3px;
        }

        /* Collapsible Sections */
        .collapsible-section {
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 10px;
            margin: 1rem 0;
            overflow: hidden;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .collapsible-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 1.5rem;
            cursor: pointer;
            user-select: none;
            transition: all 0.3s ease;
        }

        .collapsible-header:hover {
            background: rgba(255, 128, 0, 0.05);
        }

        .collapsible-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .collapsible-arrow {
            transition: transform 0.3s ease;
            color: var(--mclaren-orange);
        }

        .collapsible-section.open .collapsible-arrow {
            transform: rotate(180deg);
        }

        .collapsible-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .collapsible-section.open .collapsible-content {
            max-height: 5000px;
        }

        .collapsible-inner {
            padding: 0 1.5rem 1.5rem;
        }

        /* Tracer Grid */
        .tracer-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            width: 100%;
        }

        /* Scalability Grid */
        .scalability-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            width: 100%;
        }

        /* Animated List */
        .animated-list {
            list-style: none;
            padding: 0;
        }

        .animated-list-item {
            padding: 0.75rem 1rem;
            margin: 0.5rem 0;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
        }

        .animated-list-item::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 2px;
            background: var(--mclaren-orange);
            transform: scaleY(0);
            transition: transform 0.3s ease;
        }

        .animated-list-item:hover {
            background: rgba(255, 128, 0, 0.08);
            border-color: rgba(255, 128, 0, 0.2);
            transform: translateX(8px);
        }

        .animated-list-item:hover::before {
            transform: scaleY(1);
        }

        /* Cheat Sheet */
        .cheat-sheet {
            background: var(--glass-white);
            border: 2px solid var(--mclaren-orange);
            border-radius: var(--radius-md);
            padding: var(--spacing-lg);
            margin: var(--spacing-xl) 0;
        }

        .cheat-sheet h2 {
            color: var(--mclaren-orange);
            margin-bottom: var(--spacing-md);
            text-align: center;
        }

        .cheat-sheet-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--spacing-md);
            margin-top: var(--spacing-md);
        }

        .cheat-item {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid var(--glass-border);
            border-radius: var(--radius-sm);
            padding: var(--spacing-sm);
        }

        .cheat-item strong {
            color: var(--mclaren-orange);
            display: block;
            margin-bottom: 0.3rem;
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .container {
                padding: 0 1.5rem;
            }

            .hero h1 {
                font-size: 2.5rem;
            }

            .module-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            body {
                overflow-x: hidden;
                width: 100%;
                max-width: 100vw;
            }

            nav {
                padding: 0.75rem 0;
                width: 100%;
            }

            .nav-container {
                position: relative;
                justify-content: center;
                padding: 0 var(--spacing-md);
                width: 100%;
            }

            .nav-logo {
                font-size: 1.25rem;
                z-index: 1002;
            }

            .hamburger {
                display: flex;
                position: absolute;
                right: var(--spacing-md);
                top: 50%;
                transform: translateY(-50%);
                z-index: 1002;
            }

            .nav-links {
                position: fixed;
                top: 0;
                right: -100%;
                height: 100vh;
                width: 85%;
                max-width: 320px;
                background: rgba(0, 0, 0, 0.98);
                backdrop-filter: blur(24px);
                -webkit-backdrop-filter: blur(24px);
                flex-direction: column;
                padding: 5rem 2rem 2rem;
                gap: 0;
                transition: right 0.4s cubic-bezier(0.4, 0, 0.2, 1),
                            opacity 0.4s cubic-bezier(0.4, 0, 0.2, 1),
                            visibility 0s linear 0.4s;
                border-left: 1px solid var(--glass-border);
                z-index: 1001;
                box-shadow: -4px 0 24px rgba(0, 0, 0, 0.5);
                overflow-y: auto;
                visibility: hidden;
                opacity: 0;
                pointer-events: none;
            }

            .nav-links.active {
                right: 0;
                visibility: visible;
                opacity: 1;
                pointer-events: all;
                transition: right 0.4s cubic-bezier(0.4, 0, 0.2, 1),
                            opacity 0.4s cubic-bezier(0.4, 0, 0.2, 1),
                            visibility 0s linear 0s;
            }

            .nav-link {
                font-size: 15px;
                padding: 1rem 1.25rem;
                border-bottom: 1px solid rgba(255, 255, 255, 0.05);
                width: 100%;
                border-radius: 0;
            }

            .nav-link:hover {
                background: rgba(255, 128, 0, 0.1);
                padding-left: 1.5rem;
            }

            .nav-link.active {
                background: rgba(255, 128, 0, 0.15);
                border-left: 3px solid var(--mclaren-orange);
            }

            .nav-link.active::after {
                display: none;
            }

            .hero {
                padding: var(--spacing-xl) 0;
                width: 100%;
                max-width: 100%;
            }

            .hero h1 {
                font-size: 2rem;
                line-height: 1.2;
            }

            .hero p {
                font-size: 1rem;
                padding: 0 var(--spacing-sm);
            }

            .container {
                padding: 0 var(--spacing-md);
                width: 100%;
                max-width: 100%;
                overflow-x: hidden;
            }

            .section {
                width: 100%;
                max-width: 100%;
                overflow-x: hidden;
            }

            .section-title {
                font-size: 1.5rem;
                word-wrap: break-word;
            }

            .content-block {
                padding: var(--spacing-md);
                width: 100%;
                max-width: 100%;
                overflow-x: hidden;
            }

            .interactive-demo {
                padding: var(--spacing-md);
                width: 100%;
                max-width: 100%;
                overflow-x: hidden;
            }

            .demo-controls {
                flex-direction: column;
                align-items: stretch;
                width: 100%;
            }

            .btn {
                width: 100%;
            }

            .code-block {
                max-width: 100%;
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
                font-size: 12px;
                padding: var(--spacing-sm);
            }

            .code-block pre {
                max-width: 100%;
                overflow-x: auto;
            }

            .playground-canvas {
                width: 100%;
                max-width: 100%;
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
            }

            .loop-visual {
                width: 100%;
                max-width: 100%;
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
            }

            .module-grid {
                grid-template-columns: 1fr;
                width: 100%;
            }

            .module-card {
                width: 100%;
                max-width: 100%;
            }

            .cheat-sheet-grid {
                grid-template-columns: 1fr;
                width: 100%;
            }

            .practical-approach,
            .theoretical-dive,
            .feynman-dive {
                width: 100%;
                max-width: 100%;
                overflow-x: hidden;
            }

            .theory-section {
                width: 100%;
                max-width: 100%;
            }

            /* Fix grid layouts on mobile */
            .playground-canvas > div[style*="grid"] {
                width: 100%;
                overflow-x: auto;
            }

            /* Fix inline grid styles */
            #nested-grid,
            #triangle-grid {
                width: 100% !important;
                max-width: 100% !important;
                overflow-x: auto;
                display: flex !important;
                flex-wrap: wrap !important;
                justify-content: center;
            }

            /* Fix two-column grids in demos */
            .tracer-grid,
            .scalability-grid {
                grid-template-columns: 1fr !important;
                gap: 15px;
            }

            .playground-canvas > div[style*="grid-template-columns: 1fr 1fr"] {
                grid-template-columns: 1fr !important;
                width: 100%;
            }

            /* Ensure all inline styles respect mobile */
            [style*="display: grid"] {
                max-width: 100%;
            }

            /* Fix long text in code blocks */
            pre {
                word-wrap: normal;
                white-space: pre;
                overflow-x: auto;
            }
        }

        @media (max-width: 480px) {
            .container {
                padding: 0 var(--spacing-sm);
            }

            .hero h1 {
                font-size: 1.75rem;
            }

            .hero p {
                font-size: 0.9375rem;
            }

            .section-title {
                font-size: 1.25rem;
            }

            .code-block {
                font-size: 11px;
                padding: 0.625rem;
            }

            .copy-btn {
                padding: 0.3rem 0.625rem;
                font-size: 9px;
            }

            .interactive-demo h3 {
                font-size: 1.125rem;
            }

            .demo-controls {
                padding: 0.75rem;
            }

            .iteration-box {
                min-width: 60px;
                height: 60px;
                font-size: 0.875rem;
            }
        }
    </style>
</head>
<body>
    <!-- Reading Progress Bar -->
    <div id="reading-progress"></div>

    <!-- Mobile Overlay -->
    <div class="mobile-overlay" id="mobileOverlay"></div>

    <!-- Navigation -->
    <nav>
        <div class="nav-container">
            <a href="/" class="nav-logo">ROVER</a>
            
            <div class="nav-links" id="navLinks">
                <a href="#what-is-loop" class="nav-link">What is a Loop?</a>
                <a href="#single-loop" class="nav-link">Single Loop Mastery</a>
                <a href="#nested-loops" class="nav-link">Nested Loops</a>
                <a href="#patterns" class="nav-link">Loop Patterns</a>
            </div>

            <button class="hamburger" id="hamburger" aria-label="Toggle menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
                    <button class="hamburger-menu" id="hamburgerMenu" aria-label="Toggle navigation menu">
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
            </button>
        </div>
    </nav>

    <!-- Hero Section -->
    <header class="hero">
        <div class="container">
            <h1>LOOPING LOGIC</h1>
            <p>COMPREHENSIVE SESSION - 90+ MINUTES</p>
            <p style="margin-top: 1rem;">Excellent focus. <strong>Loops are the HEART of algorithm design</strong>. Most programmers write loops, but few truly <em>understand</em> them. You're about to join the top 1% who think in loops, design with loops, and optimize through loops.</p>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container">

        <!-- Table of Contents -->
        <div class="collapsible-section open" id="toc-section">
            <div class="collapsible-header" onclick="toggleCollapsible('toc-section')">
                <div class="collapsible-title">
                    <span>Table of Contents</span>
                </div>
                <div class="collapsible-arrow">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="6 9 12 15 18 9"></polyline>
                    </svg>
                </div>
            </div>
            <div class="collapsible-content">
                <div class="collapsible-inner">
                    <ul class="animated-list">
                        <li class="animated-list-item"><a href="#module-structure" style="color: inherit; text-decoration: none;">Module Structure</a></li>
                        <li class="animated-list-item"><a href="#what-is-loop" style="color: inherit; text-decoration: none;">Part 1: What is a Loop?</a></li>
                        <li class="animated-list-item"><a href="#loop-execution" style="color: inherit; text-decoration: none;">How a Loop Actually Executes</a></li>
                        <li class="animated-list-item"><a href="#mental-model" style="color: inherit; text-decoration: none;">Mental Model: Loop as Time Machine</a></li>
                        <li class="animated-list-item"><a href="#why-loops" style="color: inherit; text-decoration: none;">Why Loops Exist</a></li>
                        <li class="animated-list-item"><a href="#single-loop" style="color: inherit; text-decoration: none;">Part 2: Single Loop Mastery</a></li>
                        <li class="animated-list-item"><a href="#loop-anatomy" style="color: inherit; text-decoration: none;">Anatomy of a Loop</a></li>
                        <li class="animated-list-item"><a href="#range-selection" style="color: inherit; text-decoration: none;">Range Selection Logic</a></li>
                        <li class="animated-list-item"><a href="#single-patterns" style="color: inherit; text-decoration: none;">10 Fundamental Single-Loop Patterns</a></li>
                        <li class="animated-list-item"><a href="#nested-loops" style="color: inherit; text-decoration: none;">Part 3: Nested Loops Mastery</a></li>
                        <li class="animated-list-item"><a href="#nesting-concept" style="color: inherit; text-decoration: none;">What IS Nesting?</a></li>
                        <li class="animated-list-item"><a href="#grid-model" style="color: inherit; text-decoration: none;">The Grid Mental Model</a></li>
                        <li class="animated-list-item"><a href="#nested-patterns" style="color: inherit; text-decoration: none;">10 Essential Nested Loop Patterns</a></li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Module Structure -->
        <article id="module-structure" class="section">
            <div class="section-header">
                <h2 class="section-title">MODULE STRUCTURE</h2>
            </div>

            <div class="module-grid">
                <div class="module-card">
                    <h3>PART 1: WHAT IS A LOOP? [0-20 min]</h3>
                    <ul>
                        <li>The fundamental concept (5-year-old → computer scientist)</li>
                        <li>How loops execute at machine level</li>
                        <li>Mental model of iteration</li>
                        <li>Why loops exist</li>
                    </ul>
                </div>

                <div class="module-card">
                    <h3>PART 2: SINGLE LOOP MASTERY [20-40 min]</h3>
                    <ul>
                        <li>Anatomy of a loop</li>
                        <li>Range selection logic</li>
                        <li>Iteration patterns (10+ patterns)</li>
                        <li>Loop variables and their meaning</li>
                    </ul>
                </div>

                <div class="module-card">
                    <h3>PART 3: NESTED LOOPS [40-60 min]</h3>
                    <ul>
                        <li>What nesting REALLY means</li>
                        <li>2D thinking patterns</li>
                        <li>Common nested loop patterns</li>
                        <li>Dependency analysis</li>
                    </ul>
                </div>
            </div>
        </article>

        <!-- PART 1: WHAT IS A LOOP? -->
        <article id="what-is-loop" class="section">
            <div class="section-header">
                <h2 class="section-title">[MINUTE 0-20] PART 1: WHAT IS A LOOP?</h2>
            </div>

            <!-- Step-by-step practical approach -->
            <div class="practical-approach">
                <h3>Step-by-step practical approach</h3>
                <ul>
                    <li><strong>Start simple:</strong> Read the 5-year-old explanation first to build intuition without jargon</li>
                    <li><strong>Code along:</strong> Type out each example in your Python interpreter or IDE to see immediate results</li>
                    <li><strong>Trace by hand:</strong> For the first few loops, write down the value of `i` on each iteration on paper</li>
                    <li><strong>Experiment:</strong> Change the range values and predict what will print before running the code</li>
                    <li><strong>Connect concepts:</strong> Notice how the 5-year-old, programmer, and computer scientist explanations describe the same thing at different abstraction levels</li>
                    <li><strong>Test understanding:</strong> Try to explain each level to someone else (or a rubber duck) without looking at the notes</li>
                </ul>
            </div>

            <!-- Deep theoretical dive -->
            <div class="theoretical-dive">
                <h3>Deep theoretical dive</h3>
                
                <div class="theory-section">
                    <h4>Hardware Implementation: Conditional Jumps & Registers</h4>
                    <p>
                        At the hardware level, loops are implemented using conditional jump instructions that manipulate the instruction pointer register (RIP/EIP). When the CPU executes a loop, it maintains a counter in a register (often ECX for x86 architectures due to historical optimization of the LOOP instruction), tests a condition using a CMP (compare) instruction, and performs a conditional jump (JGE, JLE, JNE, etc.) based on the CPU's flags register. This creates a cycle in the instruction flow where the program counter repeatedly jumps back to the loop's start address until the exit condition is met.
                    </p>
                </div>

                <div class="theory-section">
                    <h4>Branch Prediction & CPU Pipelining</h4>
                    <p>
                        The efficiency of loops relies on branch prediction and instruction pipelining in modern CPUs. Branch predictors maintain a history of loop outcomes and predict whether the loop will continue or exit, allowing the CPU to speculatively execute instructions before the condition is evaluated. For tight loops with predictable patterns, this achieves near-zero overhead for the branching logic itself. However, loops with data-dependent branching (where the condition depends on runtime values) can suffer from pipeline stalls and branch mispredictions, costing 10-20 CPU cycles per misprediction.
                    </p>
                </div>

                <div class="theory-section">
                    <h4>Compiler Optimization: Loop Unrolling</h4>
                    <p>
                        Loop unrolling is a compiler optimization technique where the loop body is duplicated multiple times to reduce the overhead of loop control (fewer iterations, fewer jumps, fewer comparisons). For example, instead of iterating 1000 times with one operation each, the compiler might generate 250 iterations with four operations each. This improves performance by reducing branch mispredictions, enabling better instruction-level parallelism, and improving cache utilization. Modern compilers (GCC, Clang, MSVC) automatically apply loop unrolling when beneficial, typically for loops with known iteration counts and small bodies.
                    </p>
                </div>

                <div class="theory-section">
                    <h4>Computational Complexity Analysis</h4>
                    <p>
                        From a computational complexity perspective, loops are the primary source of algorithmic time complexity. A single loop iterating n times contributes O(n) complexity, nested loops contribute O(n²) or O(n·m), and logarithmic loops (where the counter doubles or halves each iteration) contribute O(log n). Understanding loop structure is essential for complexity analysis: the depth of nesting determines the exponent, while the iteration step size determines the base of logarithmic complexity.
                    </p>
                </div>
            </div>

            <!-- Level 1: 5-Year-Old Explanation -->
            <div class="content-block">
                <h3>Level 1: The 5-Year-Old Explanation</h3>
                <p><strong>Imagine you're eating 5 candies:</strong></p>
                
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code>Step 1: Pick up candy #1, eat it
Step 2: Pick up candy #2, eat it
Step 3: Pick up candy #3, eat it
Step 4: Pick up candy #4, eat it
Step 5: Pick up candy #5, eat it
Done!</code></pre>
                </div>

                <p><strong>That's tedious to write! Instead:</strong></p>

                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code>"For each of my 5 candies, pick it up and eat it"

This is a LOOP!</code></pre>
                </div>

                <p><strong>A loop is:</strong> Doing the same action multiple times, with slight variations.</p>
            </div>

            <!-- Interactive Demo: Candy Eating Loop -->
            <div class="interactive-demo">
                <h3>Interactive: Candy Eating Loop</h3>
                <p class="demo-desc">Watch how a loop processes each candy one by one. Click "Start Loop" to see the iteration!</p>
                
                <div class="demo-controls">
                    <button class="btn" onclick="candyLoop.start()">Start Loop</button>
                    <button class="btn" onclick="candyLoop.reset()">Reset</button>
                </div>
                
                <div class="playground-canvas">
                    <div class="loop-visual" id="candy-visual">
                        <!-- Will be populated by JavaScript -->
                    </div>
                    <div id="candy-output" style="margin-top: 20px; padding: 15px; background: rgba(0,0,0,0.3); border-radius: 8px; color: var(--text-muted); min-height: 60px;">
                        Click "Start Loop" to see the candy eating process!
                    </div>
                </div>
            </div>

            <!-- Level 2: Programmer's Explanation -->
            <div class="content-block">
                <h3>Level 2: The Programmer's Explanation</h3>
                
                <p><strong>Without loops:</strong></p>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code>print(1)
print(2)
print(3)
print(4)
print(5)
# Imagine doing this for 1000 numbers! Impossible!</code></pre>
                </div>

                <p><strong>With loops:</strong></p>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code>for i in range(1, 6):
    print(i)
# Same result, but scalable!</code></pre>
                </div>

                <p><strong>A loop is:</strong> A programming construct that repeats a block of code multiple times based on a condition.</p>
            </div>

            <!-- Interactive Demo: With vs Without Loops -->
            <div class="interactive-demo">
                <h3>Interactive: Scalability Comparison</h3>
                <p class="demo-desc">See how loops make code scalable. Try different sizes and watch the difference!</p>
                
                <div class="demo-controls">
                    <label style="color: var(--text-muted);">Number of iterations:</label>
                    <input type="number" id="scalability-input" value="5" min="1" max="20" 
                           style="padding: 0.5rem; background: var(--code-bg); border: 1px solid var(--glass-border); color: white; border-radius: 6px; width: 100px;">
                    <button class="btn" onclick="scalabilityDemo.compare()">Compare Approaches</button>
                </div>
                
                <div class="playground-canvas">
                    <div class="scalability-grid">
                        <div>
                            <h4 style="color: var(--redbull-red); margin-bottom: 10px;">Without Loop (Repetitive Code)</h4>
                            <div id="without-loop-code" style="background: rgba(0,0,0,0.5); padding: 15px; border-radius: 6px; height: 250px; overflow-y: auto; font-family: 'Courier New', monospace; font-size: 13px;">
                            </div>
                            <div style="margin-top: 10px; color: var(--redbull-red);">
                                Lines of code: <span id="without-loop-lines">0</span>
                            </div>
                        </div>
                        <div>
                            <h4 style="color: #3fb950; margin-bottom: 10px;">With Loop (Efficient)</h4>
                            <div id="with-loop-code" style="background: rgba(0,0,0,0.5); padding: 15px; border-radius: 6px; height: 250px; overflow-y: auto; font-family: 'Courier New', monospace; font-size: 13px;">
                            </div>
                            <div style="margin-top: 10px; color: #3fb950;">
                                Lines of code: <span id="with-loop-lines">0</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Level 3: Computer Scientist's Explanation -->
            <div class="content-block">
                <h3>Level 3: The Computer Scientist's Explanation</h3>
                
                <p><strong>A loop is a control flow structure that:</strong></p>
                <ol>
                    <li><strong>Initializes</strong> a control variable</li>
                    <li><strong>Tests</strong> a condition</li>
                    <li><strong>Executes</strong> a code block</li>
                    <li><strong>Updates</strong> the control variable</li>
                    <li><strong>Repeats</strong> steps 2-4 until condition fails</li>
                </ol>

                <p><strong>At the machine level:</strong></p>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code>; for(int i = 0; i < 5; i++)
    MOV ECX, 0          ; i = 0 (initialize)
loop_start:
    CMP ECX, 5          ; Compare i with 5 (test)
    JGE loop_end        ; If i >= 5, jump to end
    ; [loop body here]
    INC ECX             ; i++ (update)
    JMP loop_start      ; Go back to start (repeat)
loop_end:</code></pre>
                </div>
            </div>

        </article>

        <!-- How Loop Executes -->
        <article id="loop-execution" class="section">
            <div class="section-header">
                <h2 class="section-title">How a Loop ACTUALLY Executes (Deep Dive)</h2>
            </div>

            <!-- Practical approach -->
            <div class="practical-approach">
                <h3>Step-by-step practical approach</h3>
                <ul>
                    <li><strong>Manual trace:</strong> Write down a table with columns for "Step", "i value", and "Action" - fill it in for the first example</li>
                    <li><strong>Use a debugger:</strong> Set a breakpoint inside the loop and step through each iteration to watch `i` change</li>
                    <li><strong>Add print statements:</strong> Print the value of `i` at the start of each iteration to visualize the sequence</li>
                    <li><strong>Count iterations:</strong> Verify that the loop runs exactly as many times as you expect</li>
                    <li><strong>Understand the jump:</strong> Recognize that after the body executes, control flow "jumps back" to the condition check</li>
                </ul>
            </div>

            <!-- Theoretical dive -->
            <div class="theoretical-dive">
                <h3>Deep theoretical dive</h3>
                
                <div class="theory-section">
                    <h4>Python's Iterator Protocol & Range Object</h4>
                    <p>
                        Python's `for` loop over a `range` object is implemented using the iterator protocol. When you write `for i in range(3)`, Python's bytecode compiler generates SETUP_LOOP, GET_ITER, and FOR_ITER instructions. The range object doesn't actually create a list of [0,1,2] in memory (unlike Python 2's `range`); instead, it's a lazy generator that computes each value on-demand using a simple counter and step arithmetic. This makes `range(1000000)` just as memory-efficient as `range(3)` – both use O(1) space.
                    </p>
                </div>

                <div class="theory-section">
                    <h4>FOR_ITER Bytecode Mechanics</h4>
                    <p>
                        The FOR_ITER bytecode instruction checks if the iterator is exhausted. If not, it pushes the next value onto the stack and jumps to the loop body. If exhausted, it pops the iterator and continues to the next instruction after the loop. This mechanism is why Python's for loops are slightly slower than equivalent while loops for simple counting – there's overhead in the iterator protocol. However, for iterating over actual collections (lists, tuples), for loops are faster because they use optimized C-level iteration rather than index-based access.
                    </p>
                </div>

                <div class="theory-section">
                    <h4>JUMP_ABSOLUTE & Loop Stream Optimization</h4>
                    <p>
                        The JUMP_ABSOLUTE instruction at the end of each iteration is the key to loop mechanics. It sets the program counter (instruction pointer) back to the FOR_ITER instruction, creating a cycle in the control flow graph. Modern CPUs optimize this pattern using loop stream detectors in the instruction fetch unit, which recognize backwards jumps and buffer loop bodies in special loop caches to avoid repeated instruction fetches from L1 cache.
                    </p>
                </div>
            </div>

            <div class="content-block">
                <p>Let's trace this loop <strong>instruction by instruction:</strong></p>

                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code>for i in range(3):
    print(i)</code></pre>
                </div>

                <p><strong>What Python does behind the scenes:</strong></p>

                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code>Step 1: SETUP_LOOP
  - Allocate space for loop counter
  - Set iteration count to 3

Step 2: Create iterator object
  - range(3) creates iterator: [0, 1, 2]

Step 3: GET_ITER
  - Point to first element (0)

========== ITERATION 1 ==========
Step 4: FOR_ITER
  - Check if more elements? YES
  - Get current element: 0
  - Store in variable 'i'

Step 5: EXECUTE BODY
  - Call print(0)

Step 6: JUMP_ABSOLUTE
  - Go back to Step 4

========== ITERATION 2 ==========
Step 7: FOR_ITER
  - Check if more elements? YES
  - Get next element: 1
  - Store in variable 'i'

Step 8: EXECUTE BODY
  - Call print(1)

Step 9: JUMP_ABSOLUTE
  - Go back to Step 4

========== ITERATION 3 ==========
Step 10: FOR_ITER
  - Check if more elements? YES
  - Get next element: 2
  - Store in variable 'i'

Step 11: EXECUTE BODY
  - Call print(2)

Step 12: JUMP_ABSOLUTE
  - Go back to Step 4

========== END ==========
Step 13: FOR_ITER
  - Check if more elements? NO
  - Exit loop</code></pre>
                </div>

                <p><strong>Key Insights:</strong></p>
                <ol>
                    <li>Loop condition is checked BEFORE each iteration</li>
                    <li>Body executes ONLY if condition is true</li>
                    <li>Update happens AFTER body execution</li>
                    <li>Jump back to condition check creates the "loop"</li>
                </ol>
            </div>

            <!-- Interactive Loop Execution Visualizer -->
            <div class="interactive-demo">
                <h3>Interactive: Loop Execution Tracer</h3>
                <p class="demo-desc">Step through loop execution one instruction at a time. See how the program counter jumps!</p>
                
                <div class="demo-controls">
                    <button class="btn" onclick="loopTracer.start()">Start Execution</button>
                    <button class="btn" onclick="loopTracer.step()">Next Step</button>
                    <button class="btn" onclick="loopTracer.reset()">Reset</button>
                    <div style="margin-left: auto; color: var(--text-muted); font-size: 13px;">
                        Step: <span id="tracer-step">0</span> | Iteration: <span id="tracer-iteration">0</span>
                    </div>
                </div>
                
                <div class="playground-canvas">
                    <div class="tracer-grid">
                        <div>
                            <h4 style="color: var(--meta-blue); margin-bottom: 10px;">Bytecode Instructions</h4>
                            <div id="bytecode-view" style="background: rgba(0,0,0,0.5); padding: 15px; border-radius: 6px; height: 300px; overflow-y: auto; font-family: 'Courier New', monospace; font-size: 12px;">
                            </div>
                        </div>
                        <div>
                            <h4 style="color: var(--mclaren-orange); margin-bottom: 10px;">Variables & State</h4>
                            <div id="state-view" style="background: rgba(0,0,0,0.5); padding: 15px; border-radius: 6px; height: 300px; overflow-y: auto;">
                            </div>
                        </div>
                    </div>
                    <div style="margin-top: 20px;">
                        <h4 style="color: #3fb950; margin-bottom: 10px;">Output</h4>
                        <div id="execution-output" style="background: rgba(0,0,0,0.5); padding: 15px; border-radius: 6px; font-family: 'Courier New', monospace; min-height: 60px; color: #3fb950;">
                        </div>
                    </div>
                </div>
            </div>

        </article>

        <!-- Mental Model -->
        <article id="mental-model" class="section">
            <div class="section-header">
                <h2 class="section-title">The Mental Model: Loop as Time Machine</h2>
            </div>

            <!-- Practical approach -->
            <div class="practical-approach">
                <h3>Step-by-step practical approach</h3>
                <ul>
                    <li><strong>Visualize separately:</strong> Think of each iteration as a separate execution in its own "universe" with its own value of `i`</li>
                    <li><strong>Draw the timeline:</strong> Sketch out the visualization on paper with boxes for each iteration</li>
                    <li><strong>Isolate iterations:</strong> For complex loops, analyze what happens in iteration 0, then iteration 1, then find the pattern</li>
                    <li><strong>Track state changes:</strong> Note which variables change between iterations and which stay the same</li>
                    <li><strong>Understand independence:</strong> Each iteration is independent except for shared variables outside the loop</li>
                </ul>
            </div>

            <!-- Theoretical dive -->
            <div class="theoretical-dive">
                <h3>Deep theoretical dive</h3>
                
                <div class="theory-section">
                    <h4>Loop Unrolling & SIMD Vectorization</h4>
                    <p>
                        The "parallel universes" mental model maps directly to loop unrolling and vectorization optimizations. When a compiler unrolls a loop, it's essentially creating multiple "universes" (iterations) that execute in sequence without the branching overhead. SIMD (Single Instruction Multiple Data) vectorization takes this further by actually executing multiple iterations in parallel using vector registers – for example, processing 8 array elements simultaneously in a single AVX instruction.
                    </p>
                </div>

                <div class="theory-section">
                    <h4>Variable Scope & Iteration Bindings</h4>
                    <p>
                        From a formal semantics perspective, each iteration establishes a new scope binding for the loop variable. In languages with block-scoped variables (JavaScript's `let`, not `var`), each iteration creates a fresh binding of `i`, which is crucial for closures and async operations. This is why `for (let i=0; i<3; i++) { setTimeout(() => console.log(i), 100); }` prints 0,1,2 while using `var` would print 3,3,3 – `var` creates a single binding shared across iterations, while `let` creates per-iteration bindings.
                    </p>
                </div>

                <div class="theory-section">
                    <h4>Parallel Execution & Loop Dependencies</h4>
                    <p>
                        The independence of iterations is what enables loop parallelization. OpenMP's `#pragma omp parallel for` directive can distribute iterations across multiple CPU cores because each iteration operates on independent data. However, if iterations have dependencies (iteration N depends on iteration N-1's result), parallelization is impossible – this is why dynamic programming problems with sequential dependencies can't be trivially parallelized, while map operations can be.
                    </p>
                </div>
            </div>

            <div class="content-block">
                <p>Think of a loop as a <strong>time machine</strong> that creates parallel universes:</p>

                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code>for i in range(3):
    print(f"Universe {i}")</code></pre>
                </div>

                <p><strong>Visualization:</strong></p>

                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code>┌─────────────────────────────────────┐
│ MAIN TIMELINE                       │
│                                     │
│  ┌───────────────┐                 │
│  │ i = 0         │ Universe 0      │
│  │ print("Universe 0")              │
│  └───────────────┘                 │
│         ↓                           │
│  ┌───────────────┐                 │
│  │ i = 1         │ Universe 1      │
│  │ print("Universe 1")              │
│  └───────────────┘                 │
│         ↓                           │
│  ┌───────────────┐                 │
│  │ i = 2         │ Universe 2      │
│  │ print("Universe 2")              │
│  └───────────────┘                 │
│         ↓                           │
│    [EXIT LOOP]                      │
└─────────────────────────────────────┘</code></pre>
                </div>

                <p><strong>Each iteration is an independent execution</strong> with its own value of `i`.</p>
            </div>

            <!-- Interactive Time Machine Demo -->
            <div class="interactive-demo">
                <h3>Interactive: Loop Time Machine</h3>
                <p class="demo-desc">Watch each "universe" (iteration) execute independently with its own variable state!</p>
                
                <div class="demo-controls">
                    <button class="btn" onclick="timeMachine.animate()">Animate Universes</button>
                    <button class="btn" onclick="timeMachine.reset()">Reset</button>
                    <label style="margin-left: 20px; color: var(--text-muted);">Speed:</label>
                    <input type="range" min="100" max="2000" value="1000" id="time-speed" 
                           oninput="timeMachine.setSpeed(this.value)"
                           style="width: 150px;">
                    <span id="speed-display" style="color: var(--mclaren-orange);">1000ms</span>
                </div>
                
                <div class="playground-canvas">
                    <div id="timeline-visual" style="display: flex; flex-direction: column; gap: 15px; padding: 20px;">
                        <!-- Populated by JS -->
                    </div>
                </div>
            </div>

        </article>

        <!-- Why Loops Exist -->
        <article id="why-loops" class="section">
            <div class="section-header">
                <h2 class="section-title">Why Loops Exist: The Fundamental Problem</h2>
            </div>

            <div class="content-block">
                <p><strong>Problem:</strong> Computers are fast but dumb. They can only execute one instruction at a time.</p>
                <p><strong>Challenge:</strong> How do we process 1 million items without writing 1 million lines of code?</p>
                <p><strong>Solution:</strong> Loops!</p>

                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code>Without loops: O(n) lines of code
With loops: O(1) lines of code (constant)

Maintainability: Change one loop vs change 1 million lines
Scalability: Works for n=10 or n=1,000,000
Abstraction: Express pattern, not individual cases</code></pre>
                </div>
            </div>

            <div class="feynman-dive">
                <h3>The "Why Loops Are Actually Genius" Realization</h3>
                <p class="feynman-intro">
                    Look, loops are basically humanity's way of telling computers: "I'm too lazy to write this 1000 times, so you figure it out." And the beautiful irony? The computer doesn't care. It'll happily do the same thing a billion times without complaint, coffee breaks, or existential dread about the monotony of it all.
                </p>
                
                <h4>The Abstraction Superpower</h4>
                <p>
                    Loops are pure <strong>pattern abstraction</strong>. Instead of saying "do A, then B, then C, then D..." you say "do X for all elements in [A,B,C,D]". This is the fundamental shift from <em>imperative</em> (tell me every step) to <em>declarative</em> (tell me the pattern). It's why functional programming nerds love map/filter/reduce – they're just loops with fancy names and better PR.
                </p>
                
                <h4>Why Not Just Write Everything Out?</h4>
                <p>
                    Because you'd go insane, that's why. But more seriously: <strong>you can't</strong>. When the loop count is determined at runtime (user input, file size, network response), you literally don't know how many times to repeat the code at compile time. Loops are the only way to handle dynamic repetition. Without loops, every program would be a fixed script – no adaptability, no real computation.
                </p>
                
                <h4>The Hidden Cost Nobody Tells You</h4>
                <p>
                    Loops aren't free. Each iteration pays a small tax: check the condition (CMP instruction), update the counter (INC/ADD instruction), and jump back (JMP instruction). For tight loops executed billions of times, this overhead becomes measurable. That's why loop unrolling exists – trade code size for speed by reducing iterations. A loop running 1000 times might be unrolled to run 250 times with 4x the work per iteration, cutting the branching overhead by 75%.
                </p>
            </div>

        </article>

        <!-- PART 2: SINGLE LOOP MASTERY -->
        <article id="single-loop" class="section">
            <div class="section-header">
                <h2 class="section-title">[MINUTE 20-40] PART 2: SINGLE LOOP MASTERY</h2>
            </div>

            <!-- Practical approach -->
            <div class="practical-approach">
                <h3>Step-by-step practical approach</h3>
                <ul>
                    <li><strong>Memorize the anatomy:</strong> Every loop has 4 parts: initialization, condition, body, update – identify them in every loop you see</li>
                    <li><strong>Practice range selection:</strong> Write loops with different range parameters until you can predict the output instantly</li>
                    <li><strong>Off-by-one testing:</strong> For each range, verify what the first and last values of `i` will be</li>
                    <li><strong>Pattern recognition:</strong> Look at working code and identify which of the 10 patterns it uses</li>
                    <li><strong>Build muscle memory:</strong> Type out each pattern template at least 3 times to internalize the syntax</li>
                    <li><strong>Test boundary cases:</strong> What happens with empty ranges? Single-element arrays? Maximum indices?</li>
                </ul>
            </div>

            <!-- Theoretical dive -->
            <div class="theoretical-dive">
                <h3>Deep theoretical dive</h3>
                
                <div class="theory-section">
                    <h4>Iteration Space & Discrete Intervals</h4>
                    <p>
                        Range selection is fundamentally about defining the iteration space – the set of indices or values the loop variable will take. In formal terms, `range(start, stop, step)` defines a discrete interval [start, stop) with stride `step`, generating the arithmetic sequence: start, start+step, start+2*step, ..., start+k*step where k is the largest integer such that start+k*step < stop (for positive step). This maps directly to array index arithmetic: to access n elements starting at index 0, you need indices [0, n), which is exactly `range(n)`.
                    </p>
                </div>

                <div class="theory-section">
                    <h4>Off-By-One Errors & Half-Open Intervals</h4>
                    <p>
                        The off-by-one error (OBOE) is the most common loop bug, stemming from the half-open interval convention [start, stop). Humans naturally think in closed intervals [start, stop], but computers use half-open intervals for mathematical consistency: the number of elements in [a, b) is simply b-a, while [a, b] requires b-a+1. This choice also makes interval concatenation cleaner: [0, 5) + [5, 10) = [0, 10) with no gaps or overlaps.
                    </p>
                </div>

                <div class="theory-section">
                    <h4>Loop Variable Naming & Self-Documenting Code</h4>
                    <p>
                        Loop variable naming is more than convention – it communicates intent and aids correctness. Using `i` for generic counting, `row`/`col` for matrix indices, `left`/`right` for two-pointer algorithms creates self-documenting code. The variable name becomes part of the algorithm's explanation. This is why code reviews often flag generic names like `x` or `temp` in loops – they hide the semantic meaning of the index.
                    </p>
                </div>

                <div class="theory-section">
                    <h4>Step Parameter & Directional Consistency</h4>
                    <p>
                        The step parameter enables skip patterns and reverse iteration, but beware: negative steps with incorrect stop values create infinite loops (e.g., `range(0, 10, -1)` generates nothing because you can't reach 10 by counting down from 0). Always ensure the step direction aligns with the start→stop relationship: positive step requires start < stop, negative step requires start > stop.
                    </p>
                </div>
            </div>

            <!-- Anatomy of a Loop -->
            <div id="loop-anatomy" class="content-block">
                <h3>Anatomy of a Loop - Every Component Explained</h3>
                
                <p><strong>The `for` loop structure:</strong></p>

                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code>for variable in sequence:
    # body</code></pre>
                </div>

                <p><strong>Let's break down each part:</strong></p>
            </div>

            <!-- Component 1: Loop Variable -->
            <div class="content-block">
                <h4>Component 1: The Loop Variable</h4>

                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code>for i in range(5):
    print(i)</code></pre>
                </div>

                <p><strong>`i` is the loop variable (also called iterator, counter, index)</strong></p>

                <p><strong>What is `i`?</strong></p>
                <ul>
                    <li>A regular variable that changes each iteration</li>
                    <li>Represents "current position" in the sequence</li>
                    <li>Scope: Exists only during loop (in many languages)</li>
                </ul>

                <p><strong>Naming conventions:</strong></p>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code>for i in range(n):      # Generic counter, single loop
for j in range(m):      # Second counter, nested loops
for k in range(p):      # Third counter, triple nested

for index in range(n):  # When treating as array index
for row in range(n):    # Matrix row
for col in range(m):    # Matrix column

for num in numbers:     # When iterating values
for char in string:     # When iterating characters</code></pre>
                </div>

                <p><strong>What value does `i` have?</strong></p>

                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code>for i in range(5):
    print(f"i = {i}")

Output:
i = 0
i = 1
i = 2
i = 3
i = 4</code></pre>
                </div>

                <p><strong>Key insight:</strong> `i` takes EACH value from the sequence, one per iteration.</p>
            </div>

        </article>

        <!-- Range Selection Logic -->
        <article id="range-selection" class="section">
            <div class="section-header">
                <h2 class="section-title">Component 2: The Sequence (Range Selection)</h2>
                <p class="section-subtitle">This is WHERE loop design happens!</p>
            </div>

            <!-- Practical approach for Range Selection -->
            <div class="practical-approach">
                <h3>Step-by-step practical approach</h3>
                <ul>
                    <li><strong>Write it out:</strong> For unfamiliar ranges, manually write the first 5 values to see the pattern</li>
                    <li><strong>Use Python REPL:</strong> Type `list(range(your_range))` to see all values the loop will take</li>
                    <li><strong>Test edge cases:</strong> Try range(0), range(1), range(n-1, -1, -1) to understand boundary behavior</li>
                    <li><strong>Common mistake check:</strong> Remember range(n) stops at n-1, not n. Test with range(5) to verify</li>
                    <li><strong>Backward ranges:</strong> Practice range(10, 0, -1) until you can predict the output instantly</li>
                    <li><strong>Decision tree:</strong> Create a flowchart: "Do I need 0 to n-1? → range(n). Do I need 1 to n? → range(1, n+1)"</li>
                </ul>
            </div>

            <!-- Theoretical dive for Range Selection -->
            <div class="theoretical-dive">
                <h3>Deep theoretical dive</h3>
                
                <div class="theory-section">
                    <h4>Sequence Protocol & Lazy Computation</h4>
                    <p>
                        Python's range object implements the Sequence protocol, providing `__iter__`, `__len__`, and `__getitem__` methods. Unlike lists, range computes values lazily using the formula: value = start + (step * index). This makes `range(0, 1000000000)` use constant O(1) memory regardless of size, storing only start, stop, and step values. When you iterate, Python computes each value on-demand rather than pre-generating an array.
                    </p>
                </div>

                <div class="theory-section">
                    <h4>Half-Open Interval Mathematics</h4>
                    <p>
                        The half-open interval [start, stop) is a mathematical convention from set theory and discrete mathematics. It ensures that concatenating consecutive ranges has no gaps: [0, 5) concatenated with [5, 10) equals [0, 10) with no overlap or gap at 5. This property makes range splitting and merging algebraically clean. Additionally, the size of [start, stop) is always (stop - start), which is computationally simpler than closed intervals where size is (stop - start + 1).
                    </p>
                </div>

                <div class="theory-section">
                    <h4>Negative Steps & Termination Conditions</h4>
                    <p>
                        Negative step values enable reverse iteration but introduce subtle bugs. The range iterator checks if (step > 0 and value >= stop) or (step < 0 and value <= stop) to determine termination. A common error is `range(5, 0, -1)` expecting [5,4,3,2,1] but getting [5,4,3,2,1] correctly. However, `range(5, 0, 1)` returns empty because you can't reach 0 from 5 with positive steps – the direction check fails immediately.
                    </p>
                </div>
            </div>

            <!-- Pattern 1: range(n) -->
            <div class="content-block">
                <h3>Pattern 1: `range(n)` - Start from 0, go to n-1</h3>

                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code>for i in range(5):
    print(i)
# Output: 0, 1, 2, 3, 4

# Why not 5? 
# Because range(n) generates: 0, 1, 2, ..., n-1 (n values total)</code></pre>
                </div>

                <p><strong>When to use:</strong></p>
                <ul>
                    <li>Iterating array indices (arrays start at 0!)</li>
                    <li>Need exactly n iterations</li>
                    <li>Don't care about starting point</li>
                </ul>

                <p><strong>Mental model:</strong></p>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code>range(5) is like: "Give me 5 numbers starting from 0"
Result: [0, 1, 2, 3, 4]</code></pre>
                </div>
            </div>

            <!-- Interactive Range Explorer -->
            <div class="interactive-demo">
                <h3>Interactive: Range Explorer</h3>
                <p class="demo-desc">Experiment with different range parameters and see exactly what values are generated!</p>
                
                <div class="demo-controls">
                    <label style="color: var(--text-muted);">range(</label>
                    <input type="number" id="range-start" value="0" 
                           style="width: 70px; padding: 0.5rem; background: var(--code-bg); border: 1px solid var(--glass-border); color: white; border-radius: 6px;">
                    <label style="color: var(--text-muted);">,</label>
                    <input type="number" id="range-stop" value="5" 
                           style="width: 70px; padding: 0.5rem; background: var(--code-bg); border: 1px solid var(--glass-border); color: white; border-radius: 6px;">
                    <label style="color: var(--text-muted);">,</label>
                    <input type="number" id="range-step" value="1" 
                           style="width: 70px; padding: 0.5rem; background: var(--code-bg); border: 1px solid var(--glass-border); color: white; border-radius: 6px;">
                    <label style="color: var(--text-muted);">)</label>
                    <button class="btn" onclick="rangeExplorer.generate()">Generate</button>
                </div>
                
                <div class="playground-canvas">
                    <div class="loop-visual" id="range-visual">
                        <!-- Populated by JS -->
                    </div>
                    <div style="margin-top: 20px; padding: 15px; background: rgba(0,0,0,0.3); border-radius: 8px;">
                        <div style="color: var(--text-muted);">Generated values: <span id="range-output" style="color: var(--mclaren-orange); font-family: 'Courier New', monospace;">[]</span></div>
                        <div style="color: var(--text-muted); margin-top: 10px;">Total iterations: <span id="range-count" style="color: var(--meta-blue); font-weight: 600;">0</span></div>
                    </div>
                </div>
            </div>

            <!-- More Range Patterns -->
            <div class="content-block">
                <h3>Pattern 2: `range(start, stop)` - Custom range</h3>

                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code>for i in range(2, 7):
    print(i)
# Output: 2, 3, 4, 5, 6

# Note: Includes start (2), excludes stop (7)</code></pre>
                </div>

                <p><strong>When to use:</strong></p>
                <ul>
                    <li>Processing subarray from index `start` to `stop-1`</li>
                    <li>Skipping first few elements</li>
                    <li>Processing middle portion</li>
                </ul>

                <p><strong>Example - Skip first element:</strong></p>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code>arr = [10, 20, 30, 40, 50]
for i in range(1, len(arr)):  # Skip arr[0]
    print(arr[i])
# Output: 20, 30, 40, 50</code></pre>
                </div>

                <p><strong>Mental model:</strong></p>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code>range(2, 7) is: "Give me numbers from 2 up to (but not including) 7"
Result: [2, 3, 4, 5, 6]</code></pre>
                </div>
            </div>

            <div class="content-block">
                <h3>Pattern 3: `range(start, stop, step)` - Custom increment</h3>

                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code># Increment by 2 (even numbers)
for i in range(0, 10, 2):
    print(i)
# Output: 0, 2, 4, 6, 8

# Decrement (backward)
for i in range(10, 0, -1):
    print(i)
# Output: 10, 9, 8, 7, 6, 5, 4, 3, 2, 1

# Jump by 3
for i in range(0, 15, 3):
    print(i)
# Output: 0, 3, 6, 9, 12</code></pre>
                </div>

                <p><strong>When to use:</strong></p>
                <ul>
                    <li>Processing every kth element</li>
                    <li>Iterating in reverse</li>
                    <li>Skipping elements</li>
                </ul>

                <p><strong>Example - Process every other element:</strong></p>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code>arr = [1, 2, 3, 4, 5, 6, 7, 8]
for i in range(0, len(arr), 2):  # i = 0, 2, 4, 6
    print(arr[i])
# Output: 1, 3, 5, 7</code></pre>
                </div>
            </div>

        </article>

        <!-- Range Selection Decision Framework -->
        <article id="range-decision" class="section">
            <div class="section-header">
                <h2 class="section-title">Range Selection Logic - The Decision Framework</h2>
            </div>

            <div class="content-block">
                <h3>QUESTION 1: How many iterations do I need?</h3>

                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code>Need exactly n iterations?
→ range(n)

Example: Print "Hello" 10 times
for i in range(10):
    print("Hello")</code></pre>
                </div>
            </div>

            <div class="content-block">
                <h3>QUESTION 2: What values should the loop variable have?</h3>

                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code>Need values 0 to n-1?
→ range(n)

Need values 1 to n?
→ range(1, n+1)

Need values a to b (inclusive)?
→ range(a, b+1)

Need values a to b (exclusive)?
→ range(a, b)</code></pre>
                </div>

                <p><strong>Example - Sum numbers from 1 to 100:</strong></p>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code>total = 0
for i in range(1, 101):  # 1 to 100 inclusive
    total += i
# i takes values: 1, 2, 3, ..., 100</code></pre>
                </div>
            </div>

            <div class="content-block">
                <h3>QUESTION 3: Am I processing array elements?</h3>

                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code>Need to access all elements?
→ range(len(arr))

Need to skip first element?
→ range(1, len(arr))

Need to skip last element?
→ range(len(arr) - 1)

Need to process from index i to j?
→ range(i, j+1)</code></pre>
                </div>

                <p><strong>Example - Process all except first and last:</strong></p>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code>arr = [1, 2, 3, 4, 5]
for i in range(1, len(arr) - 1):  # i = 1, 2, 3
    print(arr[i])
# Output: 2, 3, 4</code></pre>
                </div>
            </div>

            <div class="content-block">
                <h3>QUESTION 4: Do I need to go backward?</h3>

                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code>Backward from n-1 to 0?
→ range(n-1, -1, -1)

Backward from last index to first?
→ range(len(arr)-1, -1, -1)</code></pre>
                </div>

                <p><strong>Example - Print array in reverse:</strong></p>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code>arr = [10, 20, 30, 40]
for i in range(len(arr)-1, -1, -1):  # i = 3, 2, 1, 0
    print(arr[i])
# Output: 40, 30, 20, 10</code></pre>
                </div>

                <p><strong>Why `-1` in the middle?</strong></p>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code>range(3, -1, -1) means:
  start: 3
  stop: -1 (go DOWN TO, but not including, -1)
  step: -1 (decrease by 1)
  
  Result: 3, 2, 1, 0
  
If we used range(3, 0, -1):
  Result: 3, 2, 1 (missing 0!)</code></pre>
                </div>
            </div>

            <!-- Interactive Range Decision Helper -->
            <div class="interactive-demo">
                <h3>Interactive: Range Decision Helper</h3>
                <p class="demo-desc">Answer questions about what you need, and get the correct range formula!</p>
                
                <div class="demo-controls" style="flex-direction: column; align-items: stretch;">
                    <div style="margin-bottom: 10px;">
                        <label style="color: var(--text-muted); display: block; margin-bottom: 5px;">What do you need?</label>
                        <select id="range-need" style="width: 100%; padding: 0.75rem; background: var(--code-bg); border: 1px solid var(--glass-border); color: white; border-radius: 6px; font-family: 'Quicksand', sans-serif;">
                            <option value="all">All array elements (0 to n-1)</option>
                            <option value="skip-first">Skip first element (1 to n-1)</option>
                            <option value="skip-last">Skip last element (0 to n-2)</option>
                            <option value="middle">Skip first and last</option>
                            <option value="reverse">Reverse order (n-1 to 0)</option>
                            <option value="even">Even indices only</option>
                            <option value="odd">Odd indices only</option>
                            <option value="custom">Custom range (a to b)</option>
                        </select>
                    </div>
                    <div id="custom-range-inputs" style="display: none; margin-bottom: 10px;">
                        <input type="number" id="custom-start" placeholder="Start" 
                               style="width: 100px; padding: 0.5rem; background: var(--code-bg); border: 1px solid var(--glass-border); color: white; border-radius: 6px; margin-right: 10px;">
                        <input type="number" id="custom-end" placeholder="End (inclusive)" 
                               style="width: 100px; padding: 0.5rem; background: var(--code-bg); border: 1px solid var(--glass-border); color: white; border-radius: 6px;">
                    </div>
                    <button class="btn" onclick="rangeDecision.help()">Get Range Formula</button>
                </div>
                
                <div class="playground-canvas">
                    <div id="range-formula" style="padding: 20px; background: rgba(255, 128, 0, 0.1); border: 1px solid var(--mclaren-orange); border-radius: 8px; font-family: 'Courier New', monospace; font-size: 16px; color: var(--mclaren-orange);">
                        Select an option and click "Get Range Formula"
                    </div>
                    <div id="range-explanation" style="margin-top: 15px; padding: 15px; background: rgba(0,0,0,0.3); border-radius: 6px; color: var(--text-muted);">
                        Explanation will appear here...
                    </div>
                </div>
            </div>

        </article>

        <!-- 10 Single Loop Patterns -->
        <article id="single-patterns" class="section">
            <div class="section-header">
                <h2 class="section-title">The 10 Fundamental Single-Loop Patterns</h2>
            </div>

            <!-- Practical approach for patterns -->
            <div class="practical-approach">
                <h3>Step-by-step practical approach</h3>
                <ul>
                    <li><strong>Pattern library:</strong> Bookmark or write these 10 patterns on a reference card – they solve 80% of array problems</li>
                    <li><strong>Identify before writing:</strong> When faced with a problem, ask "which pattern does this match?" before coding</li>
                    <li><strong>Practice each pattern:</strong> Implement all 10 patterns with different arrays to build muscle memory</li>
                    <li><strong>Understand the WHY:</strong> For each pattern, understand why the range is structured that way (prevents index errors)</li>
                    <li><strong>Mix and match:</strong> Real problems often combine patterns – recognize these combinations</li>
                    <li><strong>Edge case testing:</strong> Test each pattern with arrays of size 0, 1, and 2 to see boundary behavior</li>
                </ul>
            </div>

            <!-- Theoretical dive for patterns -->
            <div class="theoretical-dive">
                <h3>Deep theoretical dive</h3>
                
                <div class="theory-section">
                    <h4>Algorithmic Templates & Safe Array Access</h4>
                    <p>
                        Loop patterns are algorithmic templates that encode common iteration strategies. They emerge from the constraints of array-based data structures: contiguous memory, zero-based indexing, and bounds checking. Each pattern solves a specific access requirement while avoiding index-out-of-bounds errors – the most common runtime exception in array manipulation. The patterns aren't arbitrary; they're derived from first principles of safe array access.
                    </p>
                </div>

                <div class="theory-section">
                    <h4>Lookahead/Lookbehind Patterns & Index Safety</h4>
                    <p>
                        Pattern 2 (skip first) and Pattern 3 (skip last) exist because of lookahead/lookbehind requirements. When comparing arr[i] with arr[i-1], you must ensure i-1 is valid (i >= 1). When comparing with arr[i+1], you must ensure i+1 < len(arr) (i < len(arr)-1). These constraints directly determine the range bounds. Violating them causes either negative indices (wrapping in Python) or out-of-bounds access (segfault in C/C++).
                    </p>
                </div>

                <div class="theory-section">
                    <h4>Sliding Window Optimization</h4>
                    <p>
                        The Fixed Window pattern (Pattern 8) is fundamental to sliding window algorithms, which optimize many O(n²) brute-force solutions to O(n). The range formula `range(len(arr) - k + 1)` ensures the window arr[i:i+k] never exceeds array bounds: when i = len(arr)-k, the window is arr[len(arr)-k : len(arr)], which is exactly the last k elements. This pattern appears in problems like "maximum sum of k consecutive elements," "substring matching," and "moving average" – all solved in linear time using the sliding window technique.
                    </p>
                </div>
            </div>

            <!-- Pattern 1 -->
            <div class="content-block">
                <h4>Pattern 1: Full Array Traversal</h4>
                <p><strong>Purpose:</strong> Process every element once</p>

                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code># Template
for i in range(len(arr)):
    # Process arr[i]

# Example: Find maximum
arr = [3, 7, 1, 9, 2]
max_val = arr[0]
for i in range(len(arr)):
    if arr[i] > max_val:
        max_val = arr[i]</code></pre>
                </div>

                <p><strong>When to use:</strong></p>
                <ul>
                    <li>Finding max/min</li>
                    <li>Calculating sum/average</li>
                    <li>Searching for element</li>
                    <li>Counting elements with property</li>
                </ul>
            </div>

            <!-- Continue with remaining patterns... Due to length, I'll add them systematically -->

        </article>

        <!-- PART 3: NESTED LOOPS -->
        <article id="nested-loops" class="section">
            <div class="section-header">
                <h2 class="section-title">[MINUTE 40-60] PART 3: NESTED LOOPS MASTERY</h2>
            </div>

            <!-- Practical approach for nested loops -->
            <div class="practical-approach">
                <h3>Step-by-step practical approach</h3>
                <ul>
                    <li><strong>Start with visualization:</strong> Draw a grid showing all (i,j) combinations the loop will visit</li>
                    <li><strong>Trace manually:</strong> For small examples (3x3), write out every (i,j) pair the loop generates</li>
                    <li><strong>Count iterations:</strong> Calculate total iterations: independent loops = n×m, triangular = n(n-1)/2</li>
                    <li><strong>Identify dependencies:</strong> Check if inner range depends on outer variable (triangular) or not (rectangular)</li>
                    <li><strong>Test with print:</strong> Add `print(f"({i},{j})")` to see the execution order</li>
                    <li><strong>Understand completion:</strong> Remember inner loop fully completes before outer loop increments</li>
                </ul>
            </div>

            <!-- Theoretical dive for nested loops -->
            <div class="theoretical-dive">
                <h3>Deep theoretical dive</h3>
                
                <div class="theory-section">
                    <h4>Cartesian Products & Row-Major Traversal</h4>
                    <p>
                        Nested loops create a Cartesian product of iteration spaces. For `for i in range(n): for j in range(m):`, the iteration space is n × m pairs: {(0,0), (0,1), ..., (0,m-1), (1,0), ..., (n-1,m-1)}. This maps directly to row-major matrix traversal in languages like C, Python, and Java where 2D arrays are stored as contiguous rows. The outer loop index changes slowly (row), while the inner loop index changes rapidly (column), matching memory layout for optimal cache utilization.
                    </p>
                </div>

                <div class="theory-section">
                    <h4>Triangular Patterns & Combination Formula</h4>
                    <p>
                        Dependent nested loops (where inner range is a function of outer variable) create non-rectangular iteration spaces. The classic example `for i in range(n): for j in range(i):` generates a triangular pattern with n(n-1)/2 total iterations – the formula for combinations C(n,2). This pattern appears in all-pairs algorithms, graph edge processing, and comparison-based sorting analysis. The triangular structure explains why bubble sort's worst case is n(n-1)/2 comparisons.
                    </p>
                </div>

                <div class="theory-section">
                    <h4>Nesting Depth & Complexity Explosion</h4>
                    <p>
                        Loop nest depth determines time complexity exponent. Single loop: O(n), double nested: O(n²), triple nested: O(n³). This exponential growth makes nested loops the primary source of algorithmic inefficiency. Optimizing nested loops often involves reducing nesting depth through algorithmic improvements: hash maps convert two nested loops (O(n²) all-pairs search) to one loop with O(1) lookups (O(n)). Understanding when nesting is necessary versus when alternative data structures eliminate it is a core algorithm design skill.
                    </p>
                </div>
            </div>

            <!-- What IS Nesting? -->
            <div id="nesting-concept" class="content-block">
                <h3>What IS Nesting? (Deep Understanding)</h3>
                
                <p><strong>5-Year-Old Explanation:</strong></p>

                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code>Imagine organizing toys:
- For each TOY BOX (outer loop)
  - For each TOY in that box (inner loop)
    - Put toy on shelf
    
You're doing "for each toy in each box" - that's nesting!</code></pre>
                </div>

                <p><strong>Programmer Explanation:</strong></p>

                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code>for i in range(3):        # Outer loop
    for j in range(2):    # Inner loop
        print(f"i={i}, j={j}")</code></pre>
                </div>

                <p><strong>Output:</strong></p>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code>i=0, j=0
i=0, j=1
i=1, j=0
i=1, j=1
i=2, j=0
i=2, j=1</code></pre>
                </div>

                <p><strong>Key insight:</strong> Inner loop COMPLETES ENTIRELY for EACH iteration of outer loop.</p>
            </div>

            <!-- Interactive Nested Loop Visualizer -->
            <div class="interactive-demo">
                <h3>Interactive: Nested Loop Grid Visualizer</h3>
                <p class="demo-desc">Watch how nested loops traverse a 2D grid. See the outer and inner loop in action!</p>
                
                <div class="demo-controls">
                    <label style="color: var(--text-muted);">Outer loop (i):</label>
                    <input type="number" id="outer-size" value="3" min="1" max="8" 
                           style="width: 70px; padding: 0.5rem; background: var(--code-bg); border: 1px solid var(--glass-border); color: white; border-radius: 6px;">
                    <label style="color: var(--text-muted);">Inner loop (j):</label>
                    <input type="number" id="inner-size" value="2" min="1" max="8" 
                           style="width: 70px; padding: 0.5rem; background: var(--code-bg); border: 1px solid var(--glass-border); color: white; border-radius: 6px;">
                    <button class="btn" onclick="nestedVisualizer.start()">Animate Traversal</button>
                    <button class="btn" onclick="nestedVisualizer.reset()">Reset</button>
                </div>
                
                <div class="playground-canvas">
                    <div id="nested-grid" style="display: inline-grid; gap: 8px; padding: 20px;">
                        <!-- Populated by JS -->
                    </div>
                    <div style="margin-top: 20px; padding: 15px; background: rgba(0,0,0,0.3); border-radius: 8px;">
                        <div style="color: var(--text-muted);">Current: <span id="nested-current" style="color: var(--mclaren-orange); font-family: 'Courier New', monospace; font-weight: 600;">-</span></div>
                        <div style="color: var(--text-muted); margin-top: 8px;">Total iterations: <span id="nested-total" style="color: var(--meta-blue); font-weight: 600;">0</span></div>
                        <div style="color: var(--text-muted); margin-top: 8px;">Progress: <span id="nested-progress" style="color: #3fb950; font-weight: 600;">0%</span></div>
                    </div>
                </div>
            </div>

            <!-- Grid Mental Model -->
            <div id="grid-model" class="content-block">
                <h3>The Grid Mental Model</h3>
                
                <p><strong>Nested loops create a 2D grid of execution:</strong></p>

                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code>for i in range(4):
    for j in range(3):
        print(f"({i},{j})", end=" ")
    print()  # Newline after each row</code></pre>
                </div>

                <p><strong>Output:</strong></p>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code>(0,0) (0,1) (0,2) 
(1,0) (1,1) (1,2) 
(2,0) (2,1) (2,2) 
(3,0) (3,1) (3,2)</code></pre>
                </div>

                <p><strong>Visualized as grid:</strong></p>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code>      j=0    j=1    j=2
i=0  (0,0)  (0,1)  (0,2)
i=1  (1,0)  (1,1)  (1,2)
i=2  (2,0)  (2,1)  (2,2)
i=3  (3,0)  (3,1)  (3,2)</code></pre>
                </div>

                <p><strong>This is exactly how 2D arrays/matrices are accessed!</strong></p>
            </div>

            <!-- Independent vs Dependent Loops -->
            <div class="content-block">
                <h3>Independent vs Dependent Nested Loops</h3>
                
                <h4>Type 1: Independent Loops</h4>
                <p><strong>Inner loop range doesn't depend on outer loop variable:</strong></p>

                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code>for i in range(n):
    for j in range(m):
        # Process (i, j)</code></pre>
                </div>

                <p><strong>Iterations:</strong> n × m (every combination)</p>

                <p><strong>Example - Matrix traversal:</strong></p>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code>matrix = [[1,2,3],
          [4,5,6],
          [7,8,9]]

for i in range(3):      # Rows
    for j in range(3):  # Columns
        print(matrix[i][j], end=" ")
    print()
# Visits ALL 9 elements</code></pre>
                </div>
            </div>

            <div class="content-block">
                <h4>Type 2: Dependent Loops (Triangular)</h4>
                <p><strong>Inner loop range depends on outer loop variable:</strong></p>

                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code>for i in range(n):
    for j in range(i):  # j depends on i!
        # Process (i, j)</code></pre>
                </div>

                <p><strong>Iterations:</strong> 0 + 1 + 2 + ... + (n-1) = n(n-1)/2</p>

                <p><strong>Visualization:</strong></p>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code>i=0: j in range(0) → no iterations
i=1: j in range(1) → j=0 (1 iteration)
i=2: j in range(2) → j=0,1 (2 iterations)
i=3: j in range(3) → j=0,1,2 (3 iterations)

Grid pattern:
      j=0  j=1  j=2
i=0    
i=1   (1,0)
i=2   (2,0) (2,1)
i=3   (3,0) (3,1) (3,2)

This forms a TRIANGLE!</code></pre>
                </div>

                <p><strong>Example - Print all pairs (i, j) where i > j:</strong></p>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code>for i in range(4):
    for j in range(i):
        print(f"({i},{j})", end=" ")
    print()

Output:
(1,0) 
(2,0) (2,1) 
(3,0) (3,1) (3,2)</code></pre>
                </div>
            </div>

            <!-- Interactive Triangular Pattern Demo -->
            <div class="interactive-demo">
                <h3>Interactive: Triangular Pattern Visualizer</h3>
                <p class="demo-desc">Compare independent (rectangular) vs dependent (triangular) nested loops!</p>
                
                <div class="demo-controls">
                    <label style="color: var(--text-muted);">Pattern type:</label>
                    <select id="triangle-type" style="padding: 0.75rem; background: var(--code-bg); border: 1px solid var(--glass-border); color: white; border-radius: 6px; font-family: 'Quicksand', sans-serif;">
                        <option value="rectangle">Independent: range(i) range(j) - Rectangle</option>
                        <option value="lower">Dependent: range(i) range(i) - Lower Triangle</option>
                        <option value="upper">Dependent: range(i) range(i+1, n) - Upper Triangle</option>
                    </select>
                    <label style="color: var(--text-muted);">Size (n):</label>
                    <input type="number" id="triangle-size" value="4" min="2" max="8" 
                           style="width: 70px; padding: 0.5rem; background: var(--code-bg); border: 1px solid var(--glass-border); color: white; border-radius: 6px;">
                    <button class="btn" onclick="triangleDemo.visualize()">Visualize</button>
                </div>
                
                <div class="playground-canvas">
                    <div id="triangle-grid" style="display: inline-grid; gap: 6px; padding: 20px;">
                        <!-- Populated by JS -->
                    </div>
                    <div style="margin-top: 20px; padding: 15px; background: rgba(0,0,0,0.3); border-radius: 8px;">
                        <div style="color: var(--text-muted);">Pattern: <span id="triangle-pattern-name" style="color: var(--mclaren-orange); font-weight: 600;">-</span></div>
                        <div style="color: var(--text-muted); margin-top: 8px;">Cells visited: <span id="triangle-count" style="color: var(--meta-blue); font-weight: 600;">0</span></div>
                        <div style="color: var(--text-muted); margin-top: 8px;">Formula: <span id="triangle-formula" style="color: #3fb950; font-family: 'Courier New', monospace;">-</span></div>
                    </div>
                </div>
            </div>

        </article>

        <!-- Nested Loop Patterns -->
        <article id="nested-patterns" class="section">
            <div class="section-header">
                <h2 class="section-title">The 10 Essential Nested Loop Patterns</h2>
            </div>

            <div class="feynman-dive">
                <h3>The "Nested Loops Are Just Grids, Change My Mind" Manifesto</h3>
                <p class="feynman-intro">
                    Once you see it, you can't unsee it: <strong>every nested loop is just walking through a grid</strong>. Rectangular grids, triangular grids, diagonal lines through grids – it's all grids. And once you understand the grid, the code writes itself. This section is about training your brain to see the grid pattern first, then translate it to code.
                </p>
                
                <h4>Why Programmers Struggle With Nested Loops</h4>
                <p>
                    Because they try to think sequentially. They follow the execution line-by-line: "okay, i is 0, now j is 0, print, now j is 1, print, now back to i, now i is 1..." and their brain melts. <strong>Stop thinking sequentially. Think spatially.</strong> Draw the damn grid. Mark which cells you visit. The pattern becomes obvious. The code is just expressing the pattern.
                </p>
                
                <h4>The Triangular vs Rectangular Divide</h4>
                <p>
                    Independent loops (range(n) and range(m)) create rectangles: n×m cells, simple multiplication. Dependent loops (range(i)) create triangles: n(n-1)/2 cells, quadratic formula. If you can't immediately recognize which pattern a problem needs, you'll waste time. Upper triangle: "unique pairs without duplicates." Lower triangle: "compare with all previous." Diagonal: "matching indices." These are your building blocks.
                </p>
                
                <h4>The Cache Locality Trap</h4>
                <p>
                    Row-major vs column-major traversal can make a 10-100x performance difference on large matrices. Memory is laid out in rows (in C/Python), so accessing matrix[i][j] for consecutive j values loads one cache line and reuses it. But accessing matrix[i][j] for consecutive i values (column traversal) loads a new cache line for every access, thrashing the cache. Same O(n²) complexity, wildly different real-world speed. This is where textbook complexity diverges from production reality.
                </p>
            </div>

            <!-- Pattern 1: Full Matrix -->
            <div class="content-block">
                <h4>Pattern 1: Full Matrix Traversal</h4>
                <p><strong>Purpose:</strong> Visit every cell in 2D array</p>

                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code># Template
for i in range(rows):
    for j in range(cols):
        # Process matrix[i][j]

# Example: Sum all elements
matrix = [[1,2,3],
          [4,5,6],
          [7,8,9]]
total = 0
for i in range(3):
    for j in range(3):
        total += matrix[i][j]
# total = 45</code></pre>
                </div>

                <p><strong>Complexity:</strong> O(rows × cols)</p>
            </div>

            <div class="content-block">
                <h4>Pattern 2: Row-by-Row Processing</h4>
                <p><strong>Purpose:</strong> Process one row at a time</p>

                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code># Template
for i in range(rows):
    # Process entire row i
    for j in range(cols):
        # Access matrix[i][j]

# Example: Find max in each row
matrix = [[3,7,2],
          [9,1,4],
          [5,8,6]]
for i in range(3):
    row_max = matrix[i][0]
    for j in range(1, 3):
        if matrix[i][j] > row_max:
            row_max = matrix[i][j]
    print(f"Row {i} max: {row_max}")</code></pre>
                </div>
            </div>

            <div class="content-block">
                <h4>Pattern 3: Column-by-Column Processing</h4>
                <p><strong>Purpose:</strong> Process one column at a time</p>

                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code># Template
for j in range(cols):
    # Process entire column j
    for i in range(rows):
        # Access matrix[i][j]

# Example: Find sum of each column
matrix = [[1,2,3],
          [4,5,6],
          [7,8,9]]
for j in range(3):
    col_sum = 0
    for i in range(3):
        col_sum += matrix[i][j]
    print(f"Column {j} sum: {col_sum}")
# Output: 12, 15, 18</code></pre>
                </div>

                <p><strong>Important:</strong> This is less cache-friendly than row-wise!</p>
            </div>

            <div class="content-block">
                <h4>Pattern 4: Upper Triangle</h4>
                <p><strong>Purpose:</strong> Process elements where j > i</p>

                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code># Template
for i in range(n):
    for j in range(i+1, n):
        # Process where j > i

# Example: Print upper triangle
n = 4
for i in range(n):
    for j in range(i+1, n):
        print(f"({i},{j})", end=" ")
    print()

Output:
(0,1) (0,2) (0,3) 
(1,2) (1,3) 
(2,3)

Grid:
      j=0  j=1  j=2  j=3
i=0        (0,1)(0,2)(0,3)
i=1             (1,2)(1,3)
i=2                  (2,3)
i=3</code></pre>
                </div>

                <p><strong>Use case:</strong> Processing unique pairs without duplicates</p>
            </div>

            <div class="content-block">
                <h4>Pattern 5: Lower Triangle</h4>
                <p><strong>Purpose:</strong> Process elements where j < i</p>

                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code># Template
for i in range(n):
    for j in range(i):
        # Process where j < i

# Example: Compare with previous elements
arr = [5, 2, 8, 1, 9]
for i in range(len(arr)):
    for j in range(i):
        if arr[j] > arr[i]:
            print(f"{arr[j]} > {arr[i]}")</code></pre>
                </div>
            </div>

            <!-- Continue with remaining patterns -->
            <div class="content-block">
                <h4>Pattern 6: Diagonal Processing</h4>
                <p><strong>Purpose:</strong> Process main diagonal or anti-diagonal</p>

                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code># Main diagonal (i == j)
for i in range(n):
    # Process matrix[i][i]

# Anti-diagonal (i + j == n - 1)
for i in range(n):
    j = n - 1 - i
    # Process matrix[i][j]

# Example: Sum diagonals
matrix = [[1,2,3],
          [4,5,6],
          [7,8,9]]

main_diag = sum(matrix[i][i] for i in range(3))
anti_diag = sum(matrix[i][2-i] for i in range(3))
print(f"Main: {main_diag}, Anti: {anti_diag}")
# Output: Main: 15 (1+5+9), Anti: 15 (3+5+7)</code></pre>
                </div>
            </div>

            <div class="content-block">
                <h4>Pattern 7: Fixed Distance from Diagonal</h4>
                <p><strong>Purpose:</strong> Process elements k positions away from diagonal</p>

                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code># k positions above main diagonal
for i in range(n - k):
    j = i + k
    # Process matrix[i][j]

# Example: Elements 1 position above diagonal
n = 4
k = 1
for i in range(n - k):
    j = i + k
    print(f"({i},{j})", end=" ")
# Output: (0,1) (1,2) (2,3)</code></pre>
                </div>
            </div>

            <div class="content-block">
                <h4>Pattern 8: All Pairs</h4>
                <p><strong>Purpose:</strong> Process every pair of elements</p>

                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code># Template
for i in range(n):
    for j in range(n):
        if i != j:  # Exclude pairing with self
            # Process pair (i, j)

# Example: Find pairs with sum = target
arr = [1, 2, 3, 4, 5]
target = 6
for i in range(len(arr)):
    for j in range(len(arr)):
        if i != j and arr[i] + arr[j] == target:
            print(f"({arr[i]}, {arr[j]})")</code></pre>
                </div>

                <p><strong>Optimization:</strong> Use j > i to avoid duplicates:</p>
                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code>for i in range(n):
    for j in range(i+1, n):
        # Process unique pair (i, j)</code></pre>
                </div>
            </div>

            <div class="content-block">
                <h4>Pattern 9: Variable Inner Range</h4>
                <p><strong>Purpose:</strong> Inner loop range based on outer variable</p>

                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code># Template
for i in range(start, end):
    inner_start = f(i)  # Function of i
    inner_end = g(i)    # Function of i
    for j in range(inner_start, inner_end):
        # Process

# Example: Process elements from i to end
arr = [1, 2, 3, 4, 5]
for i in range(len(arr)):
    for j in range(i, len(arr)):
        print(arr[i:j+1])  # All subarrays starting at i</code></pre>
                </div>
            </div>

            <div class="content-block">
                <h4>Pattern 10: Nested with Step</h4>
                <p><strong>Purpose:</strong> Skip elements in nested structure</p>

                <div class="code-block">
                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    <pre><code># Every other row, every other column
for i in range(0, rows, 2):
    for j in range(0, cols, 2):
        # Process matrix[i][j]

# Example: Checkerboard pattern
n = 8
for i in range(n):
    for j in range(n):
        if (i + j) % 2 == 0:
            print("■", end=" ")
        else:
            print("□", end=" ")
    print()</code></pre>
                </div>
            </div>

            <!-- Interactive Pattern Matcher -->
            <div class="interactive-demo">
                <h3>Interactive: Pattern Matcher Game</h3>
                <p class="demo-desc">Can you identify which nested loop pattern is needed? Test your understanding!</p>
                
                <div class="demo-controls">
                    <button class="btn" onclick="patternMatcher.newQuestion()">New Question</button>
                    <button class="btn" onclick="patternMatcher.showHint()">Show Hint</button>
                    <button class="btn" onclick="patternMatcher.showAnswer()">Show Answer</button>
                </div>
                
                <div class="playground-canvas">
                    <div id="pattern-question" style="padding: 20px; background: rgba(0, 129, 251, 0.1); border: 1px solid var(--meta-blue); border-radius: 8px; margin-bottom: 20px; font-size: 1.1rem;">
                        Click "New Question" to start!
                    </div>
                    <div id="pattern-hint" style="padding: 15px; background: rgba(255, 128, 0, 0.1); border: 1px solid var(--mclaren-orange); border-radius: 6px; margin-bottom: 15px; display: none;">
                    </div>
                    <div id="pattern-answer" style="padding: 20px; background: rgba(59, 185, 80, 0.1); border: 1px solid #3fb950; border-radius: 8px; display: none; font-family: 'Courier New', monospace;">
                    </div>
                </div>
            </div>

        </article>

        <!-- Cheat Sheet -->
        <section class="cheat-sheet">
            <h2>Quick Cheat Sheet</h2>
            <div class="cheat-sheet-grid">
                <div class="cheat-item">
                    <strong>range(n)</strong>
                    Generates 0 to n-1 (n values)
                </div>
                <div class="cheat-item">
                    <strong>range(start, stop)</strong>
                    Generates start to stop-1
                </div>
                <div class="cheat-item">
                    <strong>range(start, stop, step)</strong>
                    Custom increment/decrement
                </div>
                <div class="cheat-item">
                    <strong>range(n-1, -1, -1)</strong>
                    Reverse: n-1 down to 0
                </div>
                <div class="cheat-item">
                    <strong>Skip First</strong>
                    range(1, len(arr))
                </div>
                <div class="cheat-item">
                    <strong>Skip Last</strong>
                    range(len(arr) - 1)
                </div>
                <div class="cheat-item">
                    <strong>Skip Both Ends</strong>
                    range(1, len(arr) - 1)
                </div>
                <div class="cheat-item">
                    <strong>Independent Nested</strong>
                    n × m iterations (rectangle)
                </div>
                <div class="cheat-item">
                    <strong>Triangular Nested</strong>
                    n(n-1)/2 iterations (triangle)
                </div>
                <div class="cheat-item">
                    <strong>Upper Triangle</strong>
                    range(i+1, n) for unique pairs
                </div>
                <div class="cheat-item">
                    <strong>Lower Triangle</strong>
                    range(i) compare with previous
                </div>
                <div class="cheat-item">
                    <strong>Time Complexity</strong>
                    Single loop: O(n), Nested: O(n²)
                </div>
            </div>
        </section>

        <!-- Further Reading -->
        <section class="content-block" style="border: 2px solid var(--meta-blue);">
            <h2 style="color: var(--meta-blue); text-align: center; margin-bottom: var(--spacing-md);">Further Reading & References</h2>
            <ul>
                <li><strong>Introduction to Algorithms (CLRS)</strong> - Chapter 2: Loop invariants and correctness proofs</li>
                <li><strong>The Art of Computer Programming</strong> by Donald Knuth - Vol 1: Mathematical analysis of loops</li>
                <li><strong>Python Bytecode Reference</strong> - Understanding FOR_ITER, SETUP_LOOP, and JUMP_ABSOLUTE</li>
                <li><strong>Compiler Optimizations</strong> - Loop unrolling, vectorization, and software pipelining</li>
                <li><strong>Cache Performance</strong> - "What Every Programmer Should Know About Memory" by Ulrich Drepper</li>
                <li><strong>Algorithm Design Manual</strong> by Skiena - Loop-based algorithm patterns and analysis</li>
            </ul>
        </section>

    </main>

    <!-- Footer -->
    <footer style="text-align: center; padding: var(--spacing-xl) 0; margin-top: var(--spacing-2xl); border-top: 1px solid var(--glass-border); color: var(--text-dim);">
        <div class="container">
            <p>&copy; 2025 ROVER. Master Looping Logic from the ground up.</p>
        </div>
    </footer>

    <!-- JavaScript for Interactivity -->
    <script>
        // Reading Progress Bar
        window.addEventListener('scroll', () => {
            const windowHeight = window.innerHeight;
            const documentHeight = document.documentElement.scrollHeight - windowHeight;
            const scrolled = window.scrollY;
            const progress = (scrolled / documentHeight) * 100;
            document.getElementById('reading-progress').style.width = progress + '%';
        });

        // Hamburger Menu
        function initHamburgerMenu() {
            const hamburger = document.getElementById('hamburger');
            const navLinks = document.getElementById('navLinks');
            const mobileOverlay = document.getElementById('mobileOverlay');
            const navLinkItems = document.querySelectorAll('.nav-link');

            if (!hamburger || !navLinks || !mobileOverlay) return;

            hamburger.addEventListener('click', (e) => {
                e.stopPropagation();
                hamburger.classList.toggle('active');
                navLinks.classList.toggle('active');
                mobileOverlay.classList.toggle('active');
                document.body.style.overflow = navLinks.classList.contains('active') ? 'hidden' : '';
            });

            mobileOverlay.addEventListener('click', () => {
                hamburger.classList.remove('active');
                navLinks.classList.remove('active');
                mobileOverlay.classList.remove('active');
                document.body.style.overflow = '';
            });

            navLinkItems.forEach(link => {
                link.addEventListener('click', () => {
                    if (window.innerWidth <= 768) {
                        hamburger.classList.remove('active');
                        navLinks.classList.remove('active');
                        mobileOverlay.classList.remove('active');
                        document.body.style.overflow = '';
                    }
                });
            });

            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape' && navLinks.classList.contains('active')) {
                    hamburger.classList.remove('active');
                    navLinks.classList.remove('active');
                    mobileOverlay.classList.remove('active');
                    document.body.style.overflow = '';
                }
            });
        }


        // Hamburger Menu Toggle
        const hamburgerMenu = document.getElementById('hamburgerMenu');
        const navElement = document.getElementById('navLinks') || document.getElementById('navActions');
        
        if (hamburgerMenu && navElement) {
            hamburgerMenu.addEventListener('click', function() {
                hamburgerMenu.classList.toggle('active');
                navElement.classList.toggle('active');
            });
            
            // Close menu when clicking on a nav link (mobile)
            if (document.getElementById('navLinks')) {
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.addEventListener('click', function() {
                        if (window.innerWidth <= 768) {
                            hamburgerMenu.classList.remove('active');
                            navElement.classList.remove('active');
                        }
                    });
                });
            }
            
            // Close menu when clicking outside
            document.addEventListener('click', function(event) {
                if (window.innerWidth <= 768) {
                    if (!hamburgerMenu.contains(event.target) && !navElement.contains(event.target)) {
                        hamburgerMenu.classList.remove('active');
                        navElement.classList.remove('active');
                    }
                }
            });
        }


                document.addEventListener('DOMContentLoaded', initHamburgerMenu);

        // Section Visibility
        const sections = document.querySelectorAll('.section');
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -100px 0px'
        };

        const sectionObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, observerOptions);

        sections.forEach(section => {
            sectionObserver.observe(section);
        });

        // Active Navigation
        window.addEventListener('scroll', () => {
            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop;
                if (window.scrollY >= sectionTop - 200) {
                    current = section.getAttribute('id');
                }
            });

            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === '#' + current) {
                    link.classList.add('active');
                }
            });
        });

        // Copy Code
        function copyCode(button) {
            const codeBlock = button.nextElementSibling;
            const code = codeBlock.textContent;
            
            navigator.clipboard.writeText(code).then(() => {
                const originalText = button.textContent;
                button.textContent = 'Copied!';
                button.style.background = 'var(--meta-blue)';
                button.style.borderColor = 'var(--meta-blue)';
                button.style.color = 'white';
                
                setTimeout(() => {
                    button.textContent = originalText;
                    button.style.background = '';
                    button.style.borderColor = 'rgba(255, 128, 0, 0.4)';
                    button.style.color = 'var(--mclaren-orange)';
                }, 2000);
            });
        }

        // Toggle Collapsible
        function toggleCollapsible(sectionId) {
            const section = document.getElementById(sectionId);
            if (section) {
                section.classList.toggle('open');
            }
        }

        // ==================== INTERACTIVE DEMOS ====================

        // Candy Loop Demo
        const candyLoop = {
            candies: ['🍬', '🍭', '🍫', '🍩', '🍪'],
            currentIndex: -1,
            isRunning: false,

            init() {
                this.render();
            },

            render() {
                const container = document.getElementById('candy-visual');
                if (!container) return;

                container.innerHTML = this.candies.map((candy, i) => `
                    <div class="iteration-box ${i === this.currentIndex ? 'active' : ''} ${i < this.currentIndex ? 'completed' : ''}">
                        <div class="iteration-label">Candy ${i}</div>
                        <div class="iteration-value">${candy}</div>
                    </div>
                `).join('');
            },

            async start() {
                if (this.isRunning) return;
                this.isRunning = true;
                const output = document.getElementById('candy-output');

                for (let i = 0; i < this.candies.length; i++) {
                    this.currentIndex = i;
                    this.render();
                    output.innerHTML = `<div style="color: var(--mclaren-orange);">Step ${i + 1}: Pick up candy #${i} (${this.candies[i]}), eat it</div>` + output.innerHTML;
                    await new Promise(resolve => setTimeout(resolve, 800));
                }

                output.innerHTML = `<div style="color: #3fb950; font-weight: 600; margin-top: 10px;">Done! All candies eaten!</div>` + output.innerHTML;
                this.currentIndex = -1;
                this.isRunning = false;
            },

            reset() {
                this.currentIndex = -1;
                this.isRunning = false;
                this.render();
                document.getElementById('candy-output').innerHTML = 'Click "Start Loop" to see the candy eating process!';
            }
        };

        // Scalability Demo
        const scalabilityDemo = {
            compare() {
                const n = parseInt(document.getElementById('scalability-input').value) || 5;
                const withoutLoop = document.getElementById('without-loop-code');
                const withLoop = document.getElementById('with-loop-code');

                // Without loop - repetitive code
                let withoutCode = '';
                for (let i = 1; i <= n; i++) {
                    withoutCode += `print(${i})\n`;
                }
                withoutLoop.textContent = withoutCode;
                document.getElementById('without-loop-lines').textContent = n;

                // With loop - elegant code
                const withCode = `for i in range(1, ${n + 1}):\n    print(i)`;
                withLoop.textContent = withCode;
                document.getElementById('with-loop-lines').textContent = '2';
            }
        };

        // Loop Tracer Demo
        const loopTracer = {
            steps: [],
            currentStep: 0,
            isRunning: false,
            autoMode: false,

            init() {
                this.generateSteps();
                this.render();
            },

            generateSteps() {
                this.steps = [
                    { instruction: 'SETUP_LOOP', state: { i: 'undefined', iterator: 'range(3)' }, output: '' },
                    { instruction: 'GET_ITER → point to first element', state: { i: 'undefined', iterator: '[0,1,2]', position: 0 }, output: '' },
                    { instruction: 'FOR_ITER → Check more elements? YES', state: { i: 0, iterator: '[0,1,2]', position: 0 }, output: '' },
                    { instruction: 'EXECUTE BODY → print(0)', state: { i: 0 }, output: '0' },
                    { instruction: 'JUMP_ABSOLUTE → back to FOR_ITER', state: { i: 0 }, output: '0' },
                    { instruction: 'FOR_ITER → Check more elements? YES', state: { i: 1, position: 1 }, output: '0' },
                    { instruction: 'EXECUTE BODY → print(1)', state: { i: 1 }, output: '0\n1' },
                    { instruction: 'JUMP_ABSOLUTE → back to FOR_ITER', state: { i: 1 }, output: '0\n1' },
                    { instruction: 'FOR_ITER → Check more elements? YES', state: { i: 2, position: 2 }, output: '0\n1' },
                    { instruction: 'EXECUTE BODY → print(2)', state: { i: 2 }, output: '0\n1\n2' },
                    { instruction: 'JUMP_ABSOLUTE → back to FOR_ITER', state: { i: 2 }, output: '0\n1\n2' },
                    { instruction: 'FOR_ITER → Check more elements? NO', state: { i: 'undefined' }, output: '0\n1\n2' },
                    { instruction: 'EXIT LOOP', state: {}, output: '0\n1\n2' }
                ];
            },

            render() {
                if (this.currentStep >= this.steps.length) return;

                const step = this.steps[this.currentStep];
                const bytecodeView = document.getElementById('bytecode-view');
                const stateView = document.getElementById('state-view');
                const outputView = document.getElementById('execution-output');

                // Render bytecode with current highlighted
                bytecodeView.innerHTML = this.steps.map((s, i) => {
                    const color = i === this.currentStep ? 'var(--mclaren-orange)' : 
                                 i < this.currentStep ? '#3fb950' : 'var(--text-dim)';
                    const bg = i === this.currentStep ? 'rgba(255, 128, 0, 0.2)' : 'transparent';
                    return `<div style="padding: 8px; background: ${bg}; color: ${color}; border-left: ${i === this.currentStep ? '3px solid var(--mclaren-orange)' : '3px solid transparent'};">
                        ${i + 1}. ${s.instruction}
                    </div>`;
                }).join('');

                // Render state
                stateView.innerHTML = `
                    <div style="padding: 10px; background: rgba(0,0,0,0.3); border-radius: 6px; margin-bottom: 10px;">
                        <div style="color: var(--text-muted);">Loop Variable:</div>
                        <div style="color: var(--mclaren-orange); font-family: 'Courier New', monospace; font-size: 18px; margin-top: 5px;">
                            i = ${step.state.i !== undefined ? step.state.i : 'undefined'}
                        </div>
                    </div>
                    ${step.state.iterator ? `
                    <div style="padding: 10px; background: rgba(0,0,0,0.3); border-radius: 6px; margin-bottom: 10px;">
                        <div style="color: var(--text-muted);">Iterator:</div>
                        <div style="color: var(--meta-blue); font-family: 'Courier New', monospace; margin-top: 5px;">
                            ${step.state.iterator}
                        </div>
                    </div>` : ''}
                    ${step.state.position !== undefined ? `
                    <div style="padding: 10px; background: rgba(0,0,0,0.3); border-radius: 6px;">
                        <div style="color: var(--text-muted);">Position:</div>
                        <div style="color: var(--meta-light); font-family: 'Courier New', monospace; font-size: 16px; margin-top: 5px;">
                            ${step.state.position}
                        </div>
                    </div>` : ''}
                `;

                // Render output
                outputView.innerHTML = step.output ? step.output.split('\n').map(line => 
                    `<div style="margin: 3px 0;">${line}</div>`
                ).join('') : '<div style="color: var(--text-dim);">No output yet...</div>';

                document.getElementById('tracer-step').textContent = this.currentStep + 1;
                const iteration = step.state.i !== undefined && step.state.i !== 'undefined' ? step.state.i + 1 : 0;
                document.getElementById('tracer-iteration').textContent = iteration;
            },

            start() {
                this.autoMode = true;
                this.currentStep = 0;
                this.autoStep();
            },

            async autoStep() {
                if (!this.autoMode || this.currentStep >= this.steps.length) {
                    this.autoMode = false;
                    return;
                }

                this.render();
                await new Promise(resolve => setTimeout(resolve, 1200));
                this.currentStep++;
                this.autoStep();
            },

            step() {
                this.autoMode = false;
                if (this.currentStep < this.steps.length) {
                    this.render();
                    this.currentStep++;
                }
            },

            reset() {
                this.autoMode = false;
                this.currentStep = 0;
                this.render();
                document.getElementById('execution-output').innerHTML = '';
            }
        };

        // Time Machine Demo
        const timeMachine = {
            universes: 3,
            currentUniverse: -1,
            isAnimating: false,
            speed: 1000,

            setSpeed(val) {
                this.speed = 2100 - parseInt(val);
                document.getElementById('speed-display').textContent = this.speed + 'ms';
            },

            async animate() {
                if (this.isAnimating) return;
                this.isAnimating = true;
                const container = document.getElementById('timeline-visual');

                container.innerHTML = `
                    <div style="padding: 15px; background: rgba(0, 129, 251, 0.1); border: 1px solid var(--meta-blue); border-radius: 8px;">
                        <strong style="color: var(--meta-blue);">MAIN TIMELINE</strong>
                    </div>
                `;

                for (let i = 0; i < this.universes; i++) {
                    this.currentUniverse = i;
                    
                    container.innerHTML += `
                        <div style="padding: 20px; background: rgba(255, 128, 0, 0.1); border: 2px solid var(--mclaren-orange); border-radius: 8px; animation: fadeInUp 0.5s ease;">
                            <div style="font-weight: 600; color: var(--mclaren-orange); margin-bottom: 10px;">
                                Universe ${i} (i = ${i})
                            </div>
                            <div style="font-family: 'Courier New', monospace; color: var(--text-muted);">
                                print("Universe ${i}")
                            </div>
                        </div>
                    `;

                    await new Promise(resolve => setTimeout(resolve, this.speed));
                }

                container.innerHTML += `
                    <div style="padding: 15px; background: rgba(59, 185, 80, 0.1); border: 1px solid #3fb950; border-radius: 8px; text-align: center;">
                        <strong style="color: #3fb950;">[EXIT LOOP]</strong>
                    </div>
                `;

                this.isAnimating = false;
            },

            reset() {
                this.isAnimating = false;
                this.currentUniverse = -1;
                document.getElementById('timeline-visual').innerHTML = '<div style="color: var(--text-dim); text-align: center; padding: 40px;">Click "Animate Universes" to start!</div>';
            }
        };

        // Range Explorer
        const rangeExplorer = {
            generate() {
                const start = parseInt(document.getElementById('range-start').value) || 0;
                const stop = parseInt(document.getElementById('range-stop').value) || 5;
                const step = parseInt(document.getElementById('range-step').value) || 1;

                const values = [];
                if (step > 0) {
                    for (let i = start; i < stop; i += step) {
                        values.push(i);
                    }
                } else if (step < 0) {
                    for (let i = start; i > stop; i += step) {
                        values.push(i);
                    }
                }

                const visual = document.getElementById('range-visual');
                visual.innerHTML = values.map((val, idx) => `
                    <div class="iteration-box" style="animation: fadeIn 0.5s ease ${idx * 0.1}s both;">
                        <div class="iteration-label">Index ${idx}</div>
                        <div class="iteration-value">${val}</div>
                    </div>
                `).join('');

                document.getElementById('range-output').textContent = '[' + values.join(', ') + ']';
                document.getElementById('range-count').textContent = values.length;
            }
        };

        // Range Decision Helper
        const rangeDecision = {
            help() {
                const need = document.getElementById('range-need').value;
                const formula = document.getElementById('range-formula');
                const explanation = document.getElementById('range-explanation');

                const formulas = {
                    'all': { 
                        formula: 'range(len(arr))', 
                        explanation: 'Generates indices 0, 1, 2, ..., len(arr)-1. Perfect for accessing all elements.'
                    },
                    'skip-first': {
                        formula: 'range(1, len(arr))',
                        explanation: 'Starts at index 1, goes to len(arr)-1. Useful when comparing with previous element (arr[i-1]).'
                    },
                    'skip-last': {
                        formula: 'range(len(arr) - 1)',
                        explanation: 'Ends at len(arr)-2. Useful when comparing with next element (arr[i+1]).'
                    },
                    'middle': {
                        formula: 'range(1, len(arr) - 1)',
                        explanation: 'Skips first and last. Perfect for checking neighbors on both sides.'
                    },
                    'reverse': {
                        formula: 'range(len(arr)-1, -1, -1)',
                        explanation: 'Iterates from last index to 0. Note the -1 stop value to include index 0.'
                    },
                    'even': {
                        formula: 'range(0, len(arr), 2)',
                        explanation: 'Every other element starting from 0: indices 0, 2, 4, 6, ...'
                    },
                    'odd': {
                        formula: 'range(1, len(arr), 2)',
                        explanation: 'Every other element starting from 1: indices 1, 3, 5, 7, ...'
                    },
                    'custom': {
                        formula: 'range(a, b+1)',
                        explanation: 'For inclusive range from a to b. Remember: range excludes the stop value!'
                    }
                };

                const result = formulas[need];
                formula.textContent = result.formula;
                explanation.textContent = result.explanation;
            }
        };

        // Nested Loop Visualizer
        const nestedVisualizer = {
            isRunning: false,
            currentI: 0,
            currentJ: 0,

            async start() {
                if (this.isRunning) return;
                this.isRunning = true;

                const outerSize = parseInt(document.getElementById('outer-size').value) || 3;
                const innerSize = parseInt(document.getElementById('inner-size').value) || 2;
                const total = outerSize * innerSize;
                let count = 0;

                this.renderGrid(outerSize, innerSize);

                for (let i = 0; i < outerSize; i++) {
                    for (let j = 0; j < innerSize; j++) {
                        this.currentI = i;
                        this.currentJ = j;
                        count++;

                        this.updateGrid(i, j, outerSize, innerSize);
                        document.getElementById('nested-current').textContent = `(i=${i}, j=${j})`;
                        document.getElementById('nested-total').textContent = total;
                        document.getElementById('nested-progress').textContent = Math.round((count / total) * 100) + '%';

                        await new Promise(resolve => setTimeout(resolve, 800));
                    }
                }

                this.isRunning = false;
            },

            renderGrid(outerSize, innerSize) {
                const grid = document.getElementById('nested-grid');
                grid.style.gridTemplateColumns = `repeat(${innerSize}, 70px)`;
                
                let html = '';
                for (let i = 0; i < outerSize; i++) {
                    for (let j = 0; j < innerSize; j++) {
                        html += `
                            <div id="cell-${i}-${j}" class="iteration-box" style="width: 70px; height: 70px;">
                                <div class="iteration-label">i=${i},j=${j}</div>
                            </div>
                        `;
                    }
                }
                grid.innerHTML = html;
            },

            updateGrid(i, j, outerSize, innerSize) {
                for (let row = 0; row < outerSize; row++) {
                    for (let col = 0; col < innerSize; col++) {
                        const cell = document.getElementById(`cell-${row}-${col}`);
                        if (!cell) continue;

                        if (row === i && col === j) {
                            cell.classList.add('active');
                            cell.classList.remove('completed');
                        } else if (row < i || (row === i && col < j)) {
                            cell.classList.add('completed');
                            cell.classList.remove('active');
                        } else {
                            cell.classList.remove('active', 'completed');
                        }
                    }
                }
            },

            reset() {
                this.isRunning = false;
                this.currentI = 0;
                this.currentJ = 0;
                const outerSize = parseInt(document.getElementById('outer-size').value) || 3;
                const innerSize = parseInt(document.getElementById('inner-size').value) || 2;
                this.renderGrid(outerSize, innerSize);
                document.getElementById('nested-current').textContent = '-';
                document.getElementById('nested-total').textContent = '0';
                document.getElementById('nested-progress').textContent = '0%';
            }
        };

        // Triangle Demo
        const triangleDemo = {
            visualize() {
                const type = document.getElementById('triangle-type').value;
                const n = parseInt(document.getElementById('triangle-size').value) || 4;
                const grid = document.getElementById('triangle-grid');
                
                grid.style.gridTemplateColumns = `repeat(${n}, 60px)`;
                
                let html = '';
                let count = 0;
                let patternName = '';
                let formula = '';

                for (let i = 0; i < n; i++) {
                    for (let j = 0; j < n; j++) {
                        let isActive = false;

                        if (type === 'rectangle') {
                            isActive = true;
                            patternName = 'Independent (Rectangle)';
                            formula = 'n × n = ' + (n * n);
                        } else if (type === 'lower') {
                            isActive = j < i;
                            patternName = 'Lower Triangle';
                            formula = 'n(n-1)/2 = ' + (n * (n - 1) / 2);
                        } else if (type === 'upper') {
                            isActive = j > i;
                            patternName = 'Upper Triangle';
                            formula = 'n(n-1)/2 = ' + (n * (n - 1) / 2);
                        }

                        if (isActive) count++;

                        html += `
                            <div class="iteration-box" style="width: 60px; height: 60px; ${isActive ? 'background: linear-gradient(135deg, var(--mclaren-orange), var(--mclaren-dark));' : 'background: rgba(255,255,255,0.05); opacity: 0.3;'}">
                                <div class="iteration-value" style="font-size: 12px;">(${i},${j})</div>
                            </div>
                        `;
                    }
                }

                grid.innerHTML = html;
                document.getElementById('triangle-pattern-name').textContent = patternName;
                document.getElementById('triangle-count').textContent = count;
                document.getElementById('triangle-formula').textContent = formula;
            }
        };

        // Pattern Matcher Game
        const patternMatcher = {
            questions: [
                {
                    q: 'Find all unique pairs of numbers that sum to a target value',
                    hint: 'You need to compare each element with elements that come after it (avoid duplicates)',
                    answer: 'Upper Triangle: for i in range(n):\\n    for j in range(i+1, n):\\n        if arr[i] + arr[j] == target'
                },
                {
                    q: 'Check if each element is greater than all previous elements',
                    hint: 'For each position, you need to look back at all previous positions',
                    answer: 'Lower Triangle: for i in range(len(arr)):\\n    for j in range(i):\\n        if arr[i] > arr[j]'
                },
                {
                    q: 'Calculate the sum of each row in a matrix',
                    hint: 'Process one complete row at a time',
                    answer: 'Row-by-Row: for i in range(rows):\\n    row_sum = 0\\n    for j in range(cols):\\n        row_sum += matrix[i][j]'
                },
                {
                    q: 'Find maximum value in each column of a matrix',
                    hint: 'Process one complete column at a time (less cache-friendly)',
                    answer: 'Column-by-Column: for j in range(cols):\\n    col_max = matrix[0][j]\\n    for i in range(1, rows):\\n        col_max = max(col_max, matrix[i][j])'
                }
            ],
            currentQuestionIndex: 0,

            newQuestion() {
                this.currentQuestionIndex = Math.floor(Math.random() * this.questions.length);
                const q = this.questions[this.currentQuestionIndex];
                
                document.getElementById('pattern-question').innerHTML = `
                    <strong style="color: var(--meta-blue);">Problem:</strong><br>
                    <div style="margin-top: 10px; font-size: 1.15rem;">${q.q}</div>
                `;
                document.getElementById('pattern-hint').style.display = 'none';
                document.getElementById('pattern-answer').style.display = 'none';
            },

            showHint() {
                const q = this.questions[this.currentQuestionIndex];
                const hintDiv = document.getElementById('pattern-hint');
                hintDiv.innerHTML = `<strong style="color: var(--mclaren-orange);">Hint:</strong> ${q.hint}`;
                hintDiv.style.display = 'block';
            },

            showAnswer() {
                const q = this.questions[this.currentQuestionIndex];
                const answerDiv = document.getElementById('pattern-answer');
                answerDiv.innerHTML = `<strong style="color: #3fb950;">Solution:</strong><br><pre style="margin-top: 10px; white-space: pre-wrap;">${q.answer}</pre>`;
                answerDiv.style.display = 'block';
            }
        };

        // Fix mobile layout issues
        function fixMobileLayout() {
            if (window.innerWidth <= 768) {
                // Fix two-column grid in Loop Execution Tracer
                const tracerGrid = document.querySelector('.playground-canvas > div[style*="grid-template-columns: 1fr 1fr"]');
                if (tracerGrid) {
                    tracerGrid.style.gridTemplateColumns = '1fr';
                    tracerGrid.style.width = '100%';
                }

                // Fix scalability comparison grid
                const scalabilityGrid = document.querySelector('#scalability-input')?.closest('.playground-canvas')?.querySelector('div[style*="grid-template-columns"]');
                if (scalabilityGrid) {
                    scalabilityGrid.style.gridTemplateColumns = '1fr';
                    scalabilityGrid.style.gap = '10px';
                }
            }
        }

        // Initialize demos
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(() => {
                candyLoop.init();
                loopTracer.init();
                timeMachine.reset();
                scalabilityDemo.compare();
                nestedVisualizer.reset();
                fixMobileLayout();
            }, 500);
        });

        // Re-fix on window resize
        window.addEventListener('resize', fixMobileLayout);

        // Fade-in animation keyframes
        const style = document.createElement('style');
        style.textContent = `
            @keyframes fadeIn {
                from { opacity: 0; transform: translateY(20px); }
                to { opacity: 1; transform: translateY(0); }
            }
            @keyframes fadeInUp {
                from { opacity: 0; transform: translateY(30px); }
                to { opacity: 1; transform: translateY(0); }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>