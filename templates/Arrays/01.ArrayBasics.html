<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rover | Arrays-Basics</title>
    <style>
        /* ==================== MUSEOSANS FONT ==================== */
        @font-face {
            font-family: 'MuseoSans';
            src: local('MuseoSans'), local('Museo Sans'), local('Arial');
            font-weight: 400;
            font-style: normal;
        }

        /* ==================== GLASSMORPHISM THEME ==================== */
        :root {
            /* Pure Black Base */
            --bg-primary: #000000;
            --bg-secondary: #0a0a0a;
            
            /* Glass Effect Colors */
            --glass-white: rgba(255, 255, 255, 0.05);
            --glass-border: rgba(255, 255, 255, 0.1);
            --glass-highlight: rgba(255, 255, 255, 0.15);
            
            /* McLaren Orange */
            --mclaren-orange: #FF8000;
            --mclaren-glow: rgba(255, 128, 0, 0.3);
            --mclaren-light: #FFA040;
            --mclaren-dark: #CC6600;
            
            /* RedBull Red */
            --redbull-red: #DC0000;
            --redbull-blue: #1E41FF;
            --redbull-glow: rgba(220, 0, 0, 0.3);
            --redbull-light: #FF3333;
            
            /* Meta Blue */
            --meta-blue: #0081FB;
            --meta-glow: rgba(0, 129, 251, 0.3);
            --meta-light: #33A3FF;
            --meta-dark: #0066CC;
            
            /* Text Colors - Ultra White */
            --text-primary: #FFFFFF;
            --text-secondary: #FFFFFF;
            --text-muted: rgba(255, 255, 255, 0.9);
            --text-dim: rgba(255, 255, 255, 0.7);
            
            /* Code Syntax */
            --code-bg: rgba(20, 20, 20, 0.6);
            --code-keyword: #FF8000;
            --code-function: #0081FB;
            --code-string: #3fb950;
            --code-comment: rgba(255, 255, 255, 0.4);
            --code-number: #DC0000;
            --code-variable: #FFA040;
            
            /* Layout */
            --container-width: 1100px;
            --spacing-xs: 0.5rem;
            --spacing-sm: 1rem;
            --spacing-md: 1.5rem;
            --spacing-lg: 2rem;
            --spacing-xl: 2.5rem;
            --spacing-2xl: 3rem;
            
            /* Border Radius */
            --radius-sm: 8px;
            --radius-md: 12px;
            --radius-lg: 16px;
            --radius-xl: 24px;
            
            /* Animations */
            --transition-fast: 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-normal: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-slow: 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'MuseoSans', -apple-system, BlinkMacSystemFont, sans-serif;
            background: #000000;
            color: #FFFFFF;
            line-height: 1.6;
            overflow-x: hidden;
            position: relative;
            font-size: 15px;
            font-weight: 400;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        h1, h2, h3, h4 {
            font-family: 'MuseoSans', sans-serif;
            font-weight: 600;
            letter-spacing: -0.03em;
        }

        code, pre {
            font-family: 'MuseoSans', 'Courier New', monospace;
            font-weight: 400;
        }

        /* Pure Black Background - No Gradients */

        /* Glass Container */
        .container {
            max-width: var(--container-width);
            margin: 0 auto;
            padding: 0 var(--spacing-lg);
            position: relative;
            z-index: 1;
        }

        /* Liquid Glass Card Style */
        .glass {
            background: #000000;
            backdrop-filter: blur(20px) saturate(150%);
            -webkit-backdrop-filter: blur(20px) saturate(150%);
            border: none;
            border-radius: var(--radius-md);
            transition: all var(--transition-normal);
            position: relative;
        }

        .glass::before {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: var(--radius-md);
            padding: 1px;
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.1) 0%, 
                rgba(255, 255, 255, 0.05) 50%, 
                rgba(255, 255, 255, 0.1) 100%);
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            mask-composite: exclude;
            opacity: 0;
            transition: opacity var(--transition-normal);
        }

        .glass:hover {
            transform: translateY(-2px);
            box-shadow: 0 0 50px rgba(255, 128, 0, 0.12);
        }

        .glass:hover::before {
            opacity: 1;
            background: linear-gradient(135deg, 
                rgba(255, 128, 0, 0.2) 0%, 
                rgba(255, 128, 0, 0.1) 50%, 
                rgba(255, 128, 0, 0.2) 100%);
        }

        /* Stunning Navigation */
        nav {
            position: sticky;
            top: 0;
            z-index: 1000;
            background: rgba(0, 0, 0, 0.85);
            backdrop-filter: blur(24px) saturate(180%);
            -webkit-backdrop-filter: blur(24px) saturate(180%);
            border-bottom: 1px solid rgba(255, 255, 255, 0.12);
            padding: 0.75rem 0;
            box-shadow: 
                0 1px 3px rgba(0, 0, 0, 0.5),
                0 1px 20px rgba(255, 128, 0, 0.1),
                inset 0 -1px 0 rgba(255, 255, 255, 0.05);
            transition: all 0.3s ease;
        }

        nav::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, 
                transparent,
                rgba(255, 128, 0, 0.3) 20%,
                rgba(255, 128, 0, 0.5) 50%,
                rgba(255, 128, 0, 0.3) 80%,
                transparent
            );
            opacity: 0.8;
        }

        .nav-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 0;
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 0.375rem;
            margin: 0;
            padding: 0;
            flex-wrap: nowrap;
        }

        .nav-links a {
            color: rgba(255, 255, 255, 0.75);
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            font-weight: 500;
            font-size: 0.875rem;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            white-space: nowrap;
            position: relative;
            overflow: hidden;
        }

        .nav-links a::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, 
                rgba(255, 128, 0, 0.1) 0%, 
                rgba(255, 128, 0, 0.05) 100%
            );
            opacity: 0;
            transition: opacity 0.2s ease;
        }

        .nav-links a:hover {
            color: #FFFFFF;
            background: rgba(255, 255, 255, 0.08);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(255, 128, 0, 0.15);
        }

        .nav-links a:hover::before {
            opacity: 1;
        }

        .nav-links a.active {
            color: #FFFFFF;
            background: linear-gradient(135deg, 
                rgba(255, 128, 0, 0.15) 0%, 
                rgba(255, 128, 0, 0.08) 100%
            );
            box-shadow: 
                0 2px 8px rgba(255, 128, 0, 0.2),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
        }

        /* Mobile Menu */
        .mobile-menu-btn {
            display: none;
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.08) 0%, 
                rgba(255, 255, 255, 0.04) 100%
            );
            border: 1px solid rgba(255, 255, 255, 0.12);
            color: #FFFFFF;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.875rem;
            font-weight: 500;
            position: absolute;
            right: 1rem;
            transition: all 0.2s ease;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        .mobile-menu-btn:hover {
            background: linear-gradient(135deg, 
                rgba(255, 128, 0, 0.15) 0%, 
                rgba(255, 128, 0, 0.08) 100%
            );
            border-color: rgba(255, 128, 0, 0.3);
            box-shadow: 0 4px 12px rgba(255, 128, 0, 0.2);
            transform: translateY(-1px);
        }

        /* Stunning Progress Bar */
        .progress-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: rgba(0, 0, 0, 0.3);
            z-index: 10000;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, 
                rgba(255, 128, 0, 0.8) 0%, 
                rgba(255, 128, 0, 1) 50%, 
                rgba(255, 128, 0, 0.8) 100%
            );
            width: 0%;
            transition: width 0.15s ease-out;
            box-shadow: 
                0 0 12px rgba(255, 128, 0, 0.6),
                0 0 24px rgba(255, 128, 0, 0.3);
            position: relative;
        }

        .progress-bar::after {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100px;
            height: 100%;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255, 255, 255, 0.4)
            );
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100px); }
            100% { transform: translateX(100vw); }
        }

        /* Minimal Hero Section */
        .hero {
            text-align: center;
            padding: 2rem 1.5rem 1.5rem;
            margin: 1.5rem 0;
            position: relative;
            background: transparent;
        }

        .hero h1 {
            font-size: clamp(2rem, 5vw, 3rem);
            font-weight: 600;
            margin-bottom: 1rem;
            color: #FFFFFF;
            letter-spacing: -0.03em;
            position: relative;
            line-height: 1.2;
        }

        .hero p {
            font-size: clamp(0.95rem, 2vw, 1.05rem);
            color: rgba(255, 255, 255, 0.8);
            max-width: 700px;
            margin: 0 auto;
            line-height: 1.6;
            font-weight: 400;
        }

        /* Section */
        section {
            margin: var(--spacing-2xl) 0;
            position: relative;
        }

        section h2 {
            font-size: clamp(1.75rem, 4.5vw, 2.25rem);
            font-weight: 600;
            margin-bottom: 1.5rem;
            color: rgba(255, 128, 0, 0.95);
            position: relative;
            padding-bottom: 0.875rem;
            letter-spacing: -0.03em;
            line-height: 1.2;
            border-bottom: 1px solid rgba(255, 128, 0, 0.25);
        }

        section h3 {
            font-size: clamp(1.15rem, 2.5vw, 1.5rem);
            font-weight: 600;
            color: var(--text-primary);
            margin: var(--spacing-lg) 0 var(--spacing-md);
            letter-spacing: -0.02em;
        }

        section h4 {
            font-size: clamp(1rem, 2vw, 1.25rem);
            font-weight: 600;
            color: var(--mclaren-orange);
            margin: var(--spacing-md) 0 var(--spacing-sm);
            letter-spacing: -0.01em;
        }

        /* Paragraph Spacing */
        p {
            margin: 1rem 0;
            line-height: 1.7;
        }

        p + ul, p + ol {
            margin-top: 0.75rem;
        }

        /* List Styling - Better Spacing */
        ul, ol {
            margin: 1rem 0;
            padding-left: 1.75rem;
        }

        li {
            margin: 0.625rem 0;
            line-height: 1.7;
            color: var(--text-secondary);
            padding-left: 0.25rem;
        }

        li::marker {
            color: var(--mclaren-orange);
            font-weight: 600;
        }

        li strong {
            color: var(--text-primary);
            font-weight: 600;
        }

        li code {
            font-size: 0.9em;
            background: rgba(255, 128, 0, 0.1);
            padding: 0.15rem 0.4rem;
            border-radius: 4px;
        }

        /* Nested lists */
        li ul, li ol {
            margin: 0.5rem 0 0.5rem 0;
            padding-left: 1.5rem;
        }

        /* List spacing improvements */
        ul > li:first-child,
        ol > li:first-child {
            margin-top: 0;
        }

        ul > li:last-child,
        ol > li:last-child {
            margin-bottom: 0;
        }

        /* Liquid Glass Card Style */
        .card {
            margin: 1.5rem 0;
            padding: 2rem;
            position: relative;
            background: #000000;
            backdrop-filter: blur(20px) saturate(150%);
            -webkit-backdrop-filter: blur(20px) saturate(150%);
            border: none;
            border-radius: var(--radius-md);
            transition: all var(--transition-normal);
        }

        .card::before {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: var(--radius-md);
            padding: 1px;
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.1) 0%, 
                rgba(255, 255, 255, 0.05) 50%, 
                rgba(255, 255, 255, 0.1) 100%);
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            mask-composite: exclude;
            opacity: 0;
            transition: opacity var(--transition-normal);
            pointer-events: none;
        }

        .card:hover {
            box-shadow: 0 0 50px rgba(255, 128, 0, 0.12);
        }

        .card:hover::before {
            opacity: 1;
            background: linear-gradient(135deg, 
                rgba(255, 128, 0, 0.2) 0%, 
                rgba(255, 128, 0, 0.1) 50%, 
                rgba(255, 128, 0, 0.2) 100%);
        }

        .card-header {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(255, 128, 0, 0.15);
        }

        .card-header .icon {
            font-size: 2rem;
            opacity: 0.8;
        }

        .card-header h3 {
            margin: 0;
            font-size: 1.25rem;
            font-weight: 600;
            letter-spacing: -0.02em;
        }

        /* Liquid Glass Code Container */
        .code-container {
            margin: 1.5rem 0;
            position: relative;
            border-radius: var(--radius-md);
            overflow: hidden;
            background: #000000;
            border: none;
            backdrop-filter: blur(20px) saturate(150%);
            -webkit-backdrop-filter: blur(20px) saturate(150%);
            transition: all var(--transition-normal);
        }

        .code-container::before {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: var(--radius-md);
            padding: 1px;
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.1) 0%, 
                rgba(255, 255, 255, 0.05) 50%, 
                rgba(255, 255, 255, 0.1) 100%);
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            mask-composite: exclude;
            opacity: 0;
            transition: opacity var(--transition-normal);
            pointer-events: none;
            z-index: 1;
        }

        .code-container:hover {
            box-shadow: 0 0 50px rgba(255, 128, 0, 0.12);
        }

        .code-container:hover::before {
            opacity: 1;
            background: linear-gradient(135deg, 
                rgba(255, 128, 0, 0.2) 0%, 
                rgba(255, 128, 0, 0.1) 50%, 
                rgba(255, 128, 0, 0.2) 100%);
        }

        .code-header {
            background: rgba(255, 128, 0, 0.1);
            border-bottom: 1px solid rgba(255, 128, 0, 0.25);
            padding: 0.75rem 1.25rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .code-title {
            font-family: 'MuseoSans', 'Courier New', monospace;
            font-size: 0.875rem;
            color: rgba(255, 255, 255, 0.9);
            font-weight: 500;
        }

        .copy-btn {
            background: var(--mclaren-orange);
            color: var(--bg-primary);
            border: none;
            padding: var(--spacing-xs) var(--spacing-md);
            border-radius: var(--radius-sm);
            cursor: pointer;
            font-size: 0.85rem;
            font-weight: 600;
            transition: all var(--transition-fast);
        }

        .copy-btn:hover {
            background: var(--mclaren-light);
            transform: scale(1.05);
        }

        pre {
            background: #000000;
            padding: 1.25rem;
            overflow-x: auto;
            font-family: 'MuseoSans', 'Courier New', 'Consolas', monospace;
            font-size: 0.875rem;
            line-height: 1.6;
            margin: 0;
            position: relative;
            z-index: 2;
        }

        pre code {
            color: var(--text-secondary);
        }

        /* Syntax Highlighting */
        .keyword { color: var(--code-keyword); font-weight: 600; }
        .function { color: var(--code-function); font-weight: 600; }
        .string { color: var(--code-string); }
        .comment { color: var(--code-comment); font-style: italic; }
        .number { color: var(--code-number); }
        .variable { color: var(--code-variable); }

        /* Liquid Glass Demo Container */
        .demo-container {
            background: #000000;
            border: none;
            border-radius: var(--radius-md);
            padding: 1.5rem;
            margin: 1.5rem 0;
            position: relative;
            overflow: hidden;
            backdrop-filter: blur(20px) saturate(150%);
            -webkit-backdrop-filter: blur(20px) saturate(150%);
            transition: all var(--transition-normal);
        }

        .demo-container::before {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: var(--radius-md);
            padding: 1px;
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.1) 0%, 
                rgba(255, 255, 255, 0.05) 50%, 
                rgba(255, 255, 255, 0.1) 100%);
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            mask-composite: exclude;
            opacity: 0;
            transition: opacity var(--transition-normal);
            pointer-events: none;
        }

        .demo-container:hover {
            box-shadow: 0 0 50px rgba(255, 128, 0, 0.12);
        }

        .demo-container:hover::before {
            opacity: 1;
            background: linear-gradient(135deg, 
                rgba(255, 128, 0, 0.2) 0%, 
                rgba(255, 128, 0, 0.1) 50%, 
                rgba(255, 128, 0, 0.2) 100%);
        }

        .demo-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--spacing-lg);
            flex-wrap: wrap;
            gap: var(--spacing-md);
        }

        .demo-title {
            font-size: 1.15rem;
            font-weight: 600;
            color: var(--mclaren-orange);
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            letter-spacing: -0.01em;
        }

        .demo-controls {
            display: flex;
            gap: var(--spacing-sm);
            flex-wrap: wrap;
        }

        .btn {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 8px;
            font-weight: 500;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all var(--transition-fast);
            position: relative;
            overflow: hidden;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }

        .btn:active::before {
            width: 300px;
            height: 300px;
        }

        .btn-primary {
            background: rgba(255, 128, 0, 0.9);
            color: #000000;
            box-shadow: 0 2px 8px rgba(255, 128, 0, 0.3);
            font-weight: 500;
        }

        .btn-primary:hover {
            background: rgba(255, 128, 0, 1);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(255, 128, 0, 0.4);
        }

        .btn-secondary {
            background: rgba(0, 129, 251, 0.9);
            color: var(--text-primary);
            box-shadow: 0 2px 8px rgba(0, 129, 251, 0.3);
            font-weight: 500;
        }

        .btn-secondary:hover {
            background: rgba(0, 129, 251, 1);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 129, 251, 0.4);
        }

        .btn-danger {
            background: rgba(220, 0, 0, 0.9);
            color: var(--text-primary);
            box-shadow: 0 2px 8px rgba(220, 0, 0, 0.3);
            font-weight: 500;
        }

        .btn-danger:hover {
            background: rgba(220, 0, 0, 1);
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(220, 0, 0, 0.4);
        }

        /* Liquid Glass Visualization Area */
        .visualization {
            background: #000000;
            border: none;
            border-radius: var(--radius-md);
            padding: 1.25rem;
            margin: 1.25rem 0;
            min-height: 250px;
            position: relative;
            backdrop-filter: blur(20px) saturate(150%);
            -webkit-backdrop-filter: blur(20px) saturate(150%);
            transition: all var(--transition-normal);
        }

        .visualization::before {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: var(--radius-md);
            padding: 1px;
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.1) 0%, 
                rgba(255, 255, 255, 0.05) 50%, 
                rgba(255, 255, 255, 0.1) 100%);
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            mask-composite: exclude;
            opacity: 0;
            transition: opacity var(--transition-normal);
            pointer-events: none;
        }

        .visualization:hover {
            box-shadow: 0 0 50px rgba(255, 128, 0, 0.12);
        }

        .visualization:hover::before {
            opacity: 1;
            background: linear-gradient(135deg, 
                rgba(255, 128, 0, 0.2) 0%, 
                rgba(255, 128, 0, 0.1) 50%, 
                rgba(255, 128, 0, 0.2) 100%);
        }

        /* Array Cells */
        .array-container {
            display: flex;
            justify-content: center;
            gap: var(--spacing-sm);
            flex-wrap: wrap;
            margin: var(--spacing-lg) 0;
        }

        .array-cell {
            min-width: 70px;
            height: 70px;
            background: #000000;
            border: none;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            transition: all var(--transition-fast);
            cursor: pointer;
            position: relative;
            backdrop-filter: blur(20px) saturate(150%);
            -webkit-backdrop-filter: blur(20px) saturate(150%);
        }

        .array-cell::before {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: 8px;
            padding: 1px;
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.1) 0%, 
                rgba(255, 255, 255, 0.05) 50%, 
                rgba(255, 255, 255, 0.1) 100%);
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            mask-composite: exclude;
            opacity: 0;
            transition: opacity var(--transition-fast);
            pointer-events: none;
        }

        .array-cell:hover {
            transform: translateY(-2px);
            box-shadow: 0 0 40px rgba(255, 128, 0, 0.10);
        }

        .array-cell:hover::before {
            opacity: 1;
            background: linear-gradient(135deg, 
                rgba(255, 128, 0, 0.2) 0%, 
                rgba(255, 128, 0, 0.1) 50%, 
                rgba(255, 128, 0, 0.2) 100%);
        }

        .array-cell .value {
            font-size: 1.25rem;
            color: var(--text-primary);
            font-weight: 600;
        }

        .array-cell .index {
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-top: var(--spacing-xs);
        }

        .array-cell.active {
            background: var(--mclaren-orange);
            color: #000000;
            animation: pulse 1s infinite;
        }

        .array-cell.highlighted {
            background: var(--meta-blue);
            color: #000000;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        /* Liquid Glass Output Terminal */
        .output-terminal {
            background: #000000;
            border: none;
            border-radius: var(--radius-md);
            padding: var(--spacing-lg);
            margin: var(--spacing-lg) 0;
            font-family: 'MuseoSans', 'Courier New', monospace;
            font-size: 0.95rem;
            line-height: 1.8;
            color: var(--text-secondary);
            min-height: 150px;
            max-height: 400px;
            overflow-y: auto;
            position: relative;
            backdrop-filter: blur(20px) saturate(150%);
            -webkit-backdrop-filter: blur(20px) saturate(150%);
            transition: all var(--transition-normal);
        }

        .output-terminal::before {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: var(--radius-md);
            padding: 1px;
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.1) 0%, 
                rgba(255, 255, 255, 0.05) 50%, 
                rgba(255, 255, 255, 0.1) 100%);
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            mask-composite: exclude;
            opacity: 0;
            transition: opacity var(--transition-normal);
            pointer-events: none;
        }

        .output-terminal:hover {
            box-shadow: 0 0 50px rgba(0, 129, 251, 0.10);
        }

        .output-terminal:hover::before {
            opacity: 1;
            background: linear-gradient(135deg, 
                rgba(0, 129, 251, 0.2) 0%, 
                rgba(0, 129, 251, 0.1) 50%, 
                rgba(0, 129, 251, 0.2) 100%);
        }

        .output-line {
            margin: var(--spacing-xs) 0;
            display: flex;
            gap: var(--spacing-sm);
        }

        .output-prompt {
            color: var(--mclaren-orange);
            font-weight: 700;
        }

        .output-success {
            color: var(--code-string);
        }

        .output-error {
            color: var(--redbull-red);
        }

        .output-info {
            color: var(--meta-blue);
        }

        /* Liquid Glass Callout Boxes */
        .callout {
            padding: 1.5rem;
            border-radius: var(--radius-md);
            margin: 1.5rem 0;
            position: relative;
            background: #000000;
            border: none;
            backdrop-filter: blur(20px) saturate(150%);
            -webkit-backdrop-filter: blur(20px) saturate(150%);
            transition: all var(--transition-normal);
        }

        .callout::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 4px;
            border-radius: var(--radius-md) 0 0 var(--radius-md);
            opacity: 0;
            transition: opacity var(--transition-normal);
        }

        .callout::after {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: var(--radius-md);
            padding: 1px;
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.1) 0%, 
                rgba(255, 255, 255, 0.05) 50%, 
                rgba(255, 255, 255, 0.1) 100%);
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            mask-composite: exclude;
            opacity: 0;
            transition: opacity var(--transition-normal);
            pointer-events: none;
        }

        .callout-info::before {
            background: rgba(0, 129, 251, 0.8);
        }

        .callout-info:hover::before {
            opacity: 1;
        }

        .callout-info:hover::after {
            opacity: 1;
            background: linear-gradient(135deg, 
                rgba(0, 129, 251, 0.2) 0%, 
                rgba(0, 129, 251, 0.1) 50%, 
                rgba(0, 129, 251, 0.2) 100%);
        }

        .callout-info:hover {
            box-shadow: 0 0 50px rgba(0, 129, 251, 0.10);
        }

        .callout-warning::before {
            background: rgba(255, 128, 0, 0.8);
        }

        .callout-warning:hover::before {
            opacity: 1;
        }

        .callout-warning:hover::after {
            opacity: 1;
            background: linear-gradient(135deg, 
                rgba(255, 128, 0, 0.2) 0%, 
                rgba(255, 128, 0, 0.1) 50%, 
                rgba(255, 128, 0, 0.2) 100%);
        }

        .callout-warning:hover {
            box-shadow: 0 0 40px rgba(255, 128, 0, 0.04);
        }

        .callout-danger::before {
            background: rgba(220, 0, 0, 0.8);
        }

        .callout-danger:hover::before {
            opacity: 1;
        }

        .callout-danger:hover::after {
            opacity: 1;
            background: linear-gradient(135deg, 
                rgba(220, 0, 0, 0.2) 0%, 
                rgba(220, 0, 0, 0.1) 50%, 
                rgba(220, 0, 0, 0.2) 100%);
        }

        .callout-danger:hover {
            box-shadow: 0 0 50px rgba(220, 0, 0, 0.10);
        }

        .callout-success::before {
            background: rgba(63, 185, 80, 0.8);
        }

        .callout-success:hover::before {
            opacity: 1;
        }

        .callout-success:hover::after {
            opacity: 1;
            background: linear-gradient(135deg, 
                rgba(63, 185, 80, 0.2) 0%, 
                rgba(63, 185, 80, 0.1) 50%, 
                rgba(63, 185, 80, 0.2) 100%);
        }

        .callout-success:hover {
            box-shadow: 0 0 50px rgba(63, 185, 80, 0.10);
        }

        .callout-title {
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: var(--spacing-sm);
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            letter-spacing: -0.01em;
        }

        /* Kanban-Style Grid Layout */
        .level-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 1.5rem;
            margin: var(--spacing-xl) 0;
        }

        /* Liquid Glass Kanban Column */
        .kanban-column {
            background: #000000;
            border: none;
            border-radius: var(--radius-md);
            padding: 1.5rem;
            position: relative;
            backdrop-filter: blur(20px) saturate(150%);
            -webkit-backdrop-filter: blur(20px) saturate(150%);
            transition: all var(--transition-normal);
        }

        .kanban-column::before {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: var(--radius-md);
            padding: 1px;
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.1) 0%, 
                rgba(255, 255, 255, 0.05) 50%, 
                rgba(255, 255, 255, 0.1) 100%);
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            mask-composite: exclude;
            opacity: 0;
            transition: opacity var(--transition-normal);
            pointer-events: none;
        }

        .kanban-column:hover {
            box-shadow: 0 0 50px rgba(255, 128, 0, 0.12);
        }

        .kanban-column:hover::before {
            opacity: 1;
            background: linear-gradient(135deg, 
                rgba(255, 128, 0, 0.2) 0%, 
                rgba(255, 128, 0, 0.1) 50%, 
                rgba(255, 128, 0, 0.2) 100%);
        }

        .kanban-column-header {
            font-size: 1rem;
            font-weight: 600;
            color: var(--mclaren-orange);
            margin-bottom: 1rem;
            padding-bottom: 0.75rem;
            border-bottom: 1px solid rgba(255, 128, 0, 0.2);
            letter-spacing: -0.01em;
        }

        .level-card {
            padding: var(--spacing-lg);
            transition: all var(--transition-normal);
            position: relative;
        }

        .level-card::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--mclaren-orange), transparent);
            transform: scaleX(0);
            transition: transform var(--transition-normal);
        }

        .level-card:hover::after {
            transform: scaleX(1);
        }

        /* Liquid Glass Table Style */
        .comparison-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            margin: 2rem 0;
            border-radius: var(--radius-md);
            overflow: hidden;
            border: none;
            position: relative;
            backdrop-filter: blur(20px) saturate(150%);
            -webkit-backdrop-filter: blur(20px) saturate(150%);
            transition: all var(--transition-normal);
        }

        .comparison-table::before {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: var(--radius-md);
            padding: 1px;
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.1) 0%, 
                rgba(255, 255, 255, 0.05) 50%, 
                rgba(255, 255, 255, 0.1) 100%);
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            mask-composite: exclude;
            opacity: 0;
            transition: opacity var(--transition-normal);
            pointer-events: none;
        }

        .comparison-table:hover {
            box-shadow: 0 0 50px rgba(255, 128, 0, 0.12);
        }

        .comparison-table:hover::before {
            opacity: 1;
            background: linear-gradient(135deg, 
                rgba(255, 128, 0, 0.2) 0%, 
                rgba(255, 128, 0, 0.1) 50%, 
                rgba(255, 128, 0, 0.2) 100%);
        }

        .comparison-table thead {
            background: rgba(255, 128, 0, 0.15);
        }

        .comparison-table th {
            padding: 1rem 1.5rem;
            text-align: left;
            font-weight: 600;
            color: rgba(255, 128, 0, 0.95);
            border-bottom: 1px solid rgba(255, 128, 0, 0.3);
            font-size: 0.95rem;
        }

        .comparison-table td {
            padding: 1rem 1.5rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .comparison-table tbody tr {
            background: rgba(10, 10, 10, 0.6);
            transition: all var(--transition-fast);
        }

        .comparison-table tbody tr:hover {
            background: rgba(15, 15, 15, 0.8);
            transform: translateX(2px);
        }

        /* Liquid Glass Expandable Section */
        .expandable {
            margin: 1.5rem 0;
            border: none;
            border-radius: var(--radius-md);
            overflow: hidden;
            background: #000000;
            position: relative;
            backdrop-filter: blur(20px) saturate(150%);
            -webkit-backdrop-filter: blur(20px) saturate(150%);
            transition: all var(--transition-normal);
        }

        .expandable::before {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: var(--radius-md);
            padding: 1px;
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.1) 0%, 
                rgba(255, 255, 255, 0.05) 50%, 
                rgba(255, 255, 255, 0.1) 100%);
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            mask-composite: exclude;
            opacity: 0;
            transition: opacity var(--transition-normal);
            pointer-events: none;
        }

        .expandable:hover {
            box-shadow: 0 0 50px rgba(255, 128, 0, 0.12);
        }

        .expandable:hover::before {
            opacity: 1;
            background: linear-gradient(135deg, 
                rgba(255, 128, 0, 0.2) 0%, 
                rgba(255, 128, 0, 0.1) 50%, 
                rgba(255, 128, 0, 0.2) 100%);
        }

        .expandable-header {
            background: rgba(15, 15, 15, 0.9);
            padding: 1rem 1.5rem;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all var(--transition-fast);
            border-bottom: 1px solid rgba(255, 128, 0, 0.2);
        }

        .expandable-header:hover {
            background: rgba(20, 20, 20, 0.95);
        }

        .expandable-title {
            font-size: 1.05rem;
            font-weight: 600;
            color: var(--meta-blue);
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            letter-spacing: -0.01em;
        }

        .expandable-icon {
            font-size: 1.5rem;
            transition: transform var(--transition-normal);
        }

        .expandable.active .expandable-icon {
            transform: rotate(180deg);
        }

        .expandable-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height var(--transition-slow);
        }

        .expandable.active .expandable-content {
            max-height: 10000px;
        }

        .expandable-body {
            padding: var(--spacing-lg);
            background: #000000;
        }

        /* Kanban Step Cards */
        .step-container {
            margin: 1.5rem 0;
        }

        .step {
            background: #000000;
            border: none;
            padding: 1.5rem;
            margin: 1rem 0;
            border-radius: var(--radius-md);
            position: relative;
            backdrop-filter: blur(20px) saturate(150%);
            -webkit-backdrop-filter: blur(20px) saturate(150%);
            transition: all var(--transition-fast);
        }

        .step::before {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: var(--radius-md);
            padding: 1px;
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.1) 0%, 
                rgba(255, 255, 255, 0.05) 50%, 
                rgba(255, 255, 255, 0.1) 100%);
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            mask-composite: exclude;
            opacity: 0;
            transition: opacity var(--transition-fast);
            pointer-events: none;
        }

        .step:hover {
            transform: translateX(3px);
            box-shadow: 0 0 50px rgba(255, 128, 0, 0.12);
        }

        .step:hover::before {
            opacity: 1;
            background: linear-gradient(135deg, 
                rgba(255, 128, 0, 0.2) 0%, 
                rgba(255, 128, 0, 0.1) 50%, 
                rgba(255, 128, 0, 0.2) 100%);
        }

        .step-number {
            display: inline-block;
            width: 36px;
            height: 36px;
            background: var(--mclaren-orange);
            color: #000000;
            border-radius: 50%;
            text-align: center;
            line-height: 36px;
            font-weight: 600;
            margin-right: var(--spacing-md);
            font-size: 0.95rem;
        }

        .step-title {
            font-size: 1rem;
            font-weight: 600;
            color: var(--mclaren-orange);
            margin-bottom: var(--spacing-sm);
            letter-spacing: -0.01em;
        }

        .step-description {
            color: var(--text-secondary);
            line-height: 1.8;
        }

        /* Responsive Design - Mobile First */
        
        /* Base Mobile Styles */
        @media (max-width: 768px) {
            :root {
                --spacing-xl: 1.5rem;
                --spacing-2xl: 2rem;
            }

            body {
                font-size: 14px;
            }

            .container {
                padding: 0 1rem;
            }

            /* Navigation */
            .mobile-menu-btn {
                display: block;
                z-index: 1001;
            }

            .nav-container {
                padding: 0 1rem;
                justify-content: flex-start;
            }

            .nav-links {
                display: none;
                position: fixed;
                top: 52px;
                left: 0;
                right: 0;
                width: 100%;
                flex-direction: column;
                background: rgba(0, 0, 0, 0.98);
                backdrop-filter: blur(20px);
                padding: 0.5rem;
                gap: 0.25rem;
                max-height: calc(100vh - 52px);
                overflow-y: auto;
                border-top: 1px solid rgba(255, 255, 255, 0.1);
            }

            .nav-links.active {
                display: flex;
            }

            .nav-links li {
                width: 100%;
            }

            .nav-links a {
                width: 100%;
                display: block;
                padding: 0.75rem;
                text-align: left;
                font-size: 0.875rem;
                border-radius: 6px;
            }

            /* Hero */
            .hero {
                padding: 2rem 1rem;
                margin: 1rem 0;
            }

            .hero h1 {
                font-size: 2rem;
                line-height: 1.2;
                margin-bottom: 1rem;
            }

            .hero p {
                font-size: 0.95rem;
                line-height: 1.6;
            }

            /* Sections */
            section {
                margin: 1.5rem 0;
            }

            section h2 {
                font-size: 1.35rem;
                margin-bottom: 1rem;
            }

            section h3 {
                font-size: 1.1rem;
                margin: 1rem 0 0.75rem;
            }

            section h4 {
                font-size: 1rem;
            }

            /* Lists */
            ul, ol {
                padding-left: 1.5rem;
                margin: 0.875rem 0;
            }

            li {
                margin: 0.5rem 0;
            }

            /* Cards */
            .card {
                padding: 1rem;
                margin: 1rem 0;
            }

            .card-header {
                flex-direction: column;
                text-align: center;
                gap: 0.5rem;
            }

            .card-header .icon {
                font-size: 2rem;
            }

            /* Grids */
            .level-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }

            /* Arrays */
            .array-container {
                gap: 0.5rem;
                justify-content: flex-start;
            }

            .array-cell {
                min-width: 50px !important;
                height: 50px !important;
                font-size: 0.85rem;
            }

            .array-cell .value {
                font-size: 1rem;
            }

            .array-cell .index {
                font-size: 0.7rem;
            }

            /* Demo Containers */
            .demo-container {
                padding: 0.875rem;
                margin: 1rem 0;
            }

            .demo-header {
                flex-direction: column;
                gap: 0.875rem;
                align-items: stretch;
            }

            .demo-title {
                font-size: 1.1rem;
                text-align: center;
            }

            .demo-title span {
                display: block;
                margin-top: 0.25rem;
            }

            .demo-controls {
                flex-direction: column;
                width: 100%;
            }

            .btn {
                width: 100%;
                padding: 0.625rem 0.875rem;
                font-size: 0.875rem;
            }

            /* Visualization */
            .visualization {
                padding: 1rem;
                min-height: 200px;
            }

            /* Code Blocks */
            .code-container {
                margin: 1rem 0;
            }

            .code-header {
                padding: 0.75rem;
                flex-wrap: wrap;
            }

            .code-title {
                font-size: 0.8rem;
                width: 100%;
                margin-bottom: 0.5rem;
            }

            .copy-btn {
                font-size: 0.8rem;
                padding: 0.5rem 0.75rem;
            }

            pre {
                padding: 1rem;
                font-size: 0.75rem;
                line-height: 1.4;
                overflow-x: auto;
            }

            pre code {
                white-space: pre;
            }

            /* Output Terminal */
            .output-terminal {
                padding: 0.75rem;
                font-size: 0.8rem;
                max-height: 250px;
            }

            /* Tables */
            .comparison-table {
                font-size: 0.8rem;
            }

            .comparison-table th,
            .comparison-table td {
                padding: 0.5rem;
            }

            /* Steps */
            .step-container {
                margin: 1rem 0;
            }

            .step {
                padding: 1rem;
                margin: 0.75rem 0;
            }

            .step-number {
                width: 30px;
                height: 30px;
                line-height: 30px;
                font-size: 0.9rem;
                margin-right: 0.5rem;
            }

            .step-title {
                font-size: 1rem;
            }

            /* Callouts */
            .callout {
                padding: 1rem;
                margin: 1rem 0;
            }

            .callout-title {
                font-size: 1rem;
            }

            /* Expandable */
            .expandable-header {
                padding: 0.75rem;
            }

            .expandable-title {
                font-size: 1rem;
            }

            .expandable-body {
                padding: 1rem;
            }

            .expandable-icon {
                font-size: 1.2rem;
            }
        }

        /* Extra Small Mobile (< 480px) */
        @media (max-width: 480px) {
            body {
                font-size: 13px;
            }

            .container {
                padding: 0 0.75rem;
            }

            .hero h1 {
                font-size: 1.65rem;
            }

            section h2 {
                font-size: 1.2rem;
            }

            /* Lists */
            ul, ol {
                padding-left: 1.25rem;
                margin: 0.75rem 0;
            }

            li {
                margin: 0.4rem 0;
                font-size: 0.95rem;
            }

            .array-cell {
                min-width: 45px !important;
                height: 45px !important;
            }

            .array-cell .value {
                font-size: 0.9rem;
            }

            .card {
                padding: 0.75rem;
            }

            .demo-container {
                padding: 0.625rem;
            }

            pre {
                font-size: 0.7rem;
            }

            .btn {
                padding: 0.65rem 0.85rem;
                font-size: 0.9rem;
            }
        }

        /* Tablet Landscape (769px - 1024px) */
        @media (min-width: 769px) and (max-width: 1024px) {
            .container {
                padding: 0 2rem;
            }

            .level-grid {
                grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            }

            .array-cell {
                min-width: 60px;
                height: 60px;
            }
        }

        /* Scroll Animations */
        .fade-in {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }

        .fade-in.visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 12px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-primary);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--mclaren-orange);
            border-radius: 6px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--mclaren-light);
        }

        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid var(--glass-border);
            border-top-color: var(--mclaren-orange);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Scroll-based liquid glass animations */
        .glass.in-view::before,
        .card.in-view::before,
        .code-container.in-view::before,
        .demo-container.in-view::before,
        .visualization.in-view::before,
        .kanban-column.in-view::before,
        .comparison-table.in-view::before,
        .expandable.in-view::before,
        .step.in-view::before {
            opacity: 1;
            background: linear-gradient(135deg, 
                rgba(255, 128, 0, 0.2) 0%, 
                rgba(255, 128, 0, 0.1) 50%, 
                rgba(255, 128, 0, 0.2) 100%);
        }

        .glass.in-view,
        .card.in-view,
        .code-container.in-view,
        .demo-container.in-view,
        .visualization.in-view,
        .kanban-column.in-view,
        .comparison-table.in-view,
        .expandable.in-view,
        .step.in-view {
            box-shadow: 0 0 50px rgba(255, 128, 0, 0.12);
        }

        .callout-info.in-view::after {
            opacity: 1;
            background: linear-gradient(135deg, 
                rgba(0, 129, 251, 0.2) 0%, 
                rgba(0, 129, 251, 0.1) 50%, 
                rgba(0, 129, 251, 0.2) 100%);
        }

        .callout-info.in-view::before {
            opacity: 1;
        }

        .callout-info.in-view {
            box-shadow: 0 0 50px rgba(0, 129, 251, 0.10);
        }

        .callout-danger.in-view::after {
            opacity: 1;
            background: linear-gradient(135deg, 
                rgba(220, 0, 0, 0.2) 0%, 
                rgba(220, 0, 0, 0.1) 50%, 
                rgba(220, 0, 0, 0.2) 100%);
        }

        .callout-danger.in-view::before {
            opacity: 1;
        }

        .callout-danger.in-view {
            box-shadow: 0 0 50px rgba(220, 0, 0, 0.10);
        }

        .callout-success.in-view::after {
            opacity: 1;
            background: linear-gradient(135deg, 
                rgba(63, 185, 80, 0.2) 0%, 
                rgba(63, 185, 80, 0.1) 50%, 
                rgba(63, 185, 80, 0.2) 100%);
        }

        .callout-success.in-view::before {
            opacity: 1;
        }

        .callout-success.in-view {
            box-shadow: 0 0 50px rgba(63, 185, 80, 0.10);
        }

        .callout-warning.in-view::after {
            opacity: 1;
            background: linear-gradient(135deg, 
                rgba(255, 128, 0, 0.2) 0%, 
                rgba(255, 128, 0, 0.1) 50%, 
                rgba(255, 128, 0, 0.2) 100%);
        }

        .callout-warning.in-view::before {
            opacity: 1;
        }

        .callout-warning.in-view {
            box-shadow: 0 0 40px rgba(255, 128, 0, 0.04);
        }

        .output-terminal.in-view::before {
            opacity: 1;
            background: linear-gradient(135deg, 
                rgba(0, 129, 251, 0.2) 0%, 
                rgba(0, 129, 251, 0.1) 50%, 
                rgba(0, 129, 251, 0.2) 100%);
        }

        .output-terminal.in-view {
            box-shadow: 0 0 50px rgba(0, 129, 251, 0.10);
        }

        .array-cell.in-view::before {
            opacity: 1;
            background: linear-gradient(135deg, 
                rgba(255, 128, 0, 0.2) 0%, 
                rgba(255, 128, 0, 0.1) 50%, 
                rgba(255, 128, 0, 0.2) 100%);
        }

        .array-cell.in-view {
            box-shadow: 0 0 40px rgba(255, 128, 0, 0.10);
        }
    </style>
</head>
<body>
    <!-- Progress Bar -->
    <div class="progress-container">
        <div class="progress-bar" id="progressBar"></div>
    </div>

    <!-- Navigation -->
    <nav>
        <div class="container nav-container">
            <ul class="nav-links" id="navLinks">
                <li><a href="#intro">Introduction</a></li>
                <li><a href="#hardware">Hardware</a></li>
                <li><a href="#types">Types</a></li>
                <li><a href="#cache">Cache</a></li>
                <li><a href="#operations">Operations</a></li>
                <li><a href="#patterns">Patterns</a></li>
                <li><a href="#framework">Framework</a></li>
                <li><a href="#optimization">Optimization</a></li>
            </ul>
            
                    <button class="hamburger-menu" id="hamburgerMenu" aria-label="Toggle navigation menu">
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
            </button>
        </div>
    </nav>

    <main class="container">
        <!-- Hero Section -->
        <section class="hero">
            <h1>Arrays: Complete Mastery Guide</h1>
            <p style="font-size: 1.2rem; line-height: 1.8; max-width: 800px; margin: 0 auto;">
                Master arrays from theoretical foundations to hardware-level implementation details. 
                Understand memory organization, cache optimization, algorithmic patterns, and performance characteristics. 
                This comprehensive guide covers everything from basic concepts to advanced optimization techniques.
            </p>
        </section>

        <!-- Introduction Section -->
        <section id="intro">
            <h2>What IS an Array? - Three Levels of Understanding</h2>
            
            <div class="level-grid">
                <!-- Level 1: 5-Year-Old -->
                <div class="card glass level-card">
                    <h4>🧒 Level 1: Five-Year-Old Explanation</h4>
                    <p style="color: var(--text-secondary); margin-bottom: var(--spacing-md);">Imagine a chocolate box with numbered compartments:</p>
                    
                    <div class="array-container">
                        <div class="array-cell">
                            <div class="value">🍫</div>
                            <div class="index">0</div>
                        </div>
                        <div class="array-cell">
                            <div class="value">🍫</div>
                            <div class="index">1</div>
                        </div>
                        <div class="array-cell">
                            <div class="value">🍫</div>
                            <div class="index">2</div>
                        </div>
                        <div class="array-cell">
                            <div class="value">🍫</div>
                            <div class="index">3</div>
                        </div>
                        <div class="array-cell">
                            <div class="value">🍫</div>
                            <div class="index">4</div>
                        </div>
                    </div>

                    <ul style="color: var(--text-secondary); line-height: 2;">
                        <li>Each compartment has a number (0, 1, 2, 3, 4...)</li>
                        <li>You can put ONE chocolate in each slot</li>
                        <li>The box is FIXED - slots don't move around</li>
                        <li>To get chocolate #3, go straight to slot 3 - super fast!</li>
                    </ul>
                </div>

                <!-- Level 2: Programmer -->
                <div class="card glass level-card">
                    <h4>💻 Level 2: Programmer Explanation</h4>
                    <p style="color: var(--text-secondary); margin-bottom: var(--spacing-md);">An array is a contiguous block of memory divided into equal-sized slots. Think of it like a hotel:</p>

                    <ul style="color: var(--text-secondary); line-height: 2;">
                        <li>All rooms are the same size</li>
                        <li>Rooms are numbered sequentially (0, 1, 2, 3...)</li>
                        <li>Each room holds exactly one guest (element)</li>
                        <li>The entire hotel is built at once (single allocation)</li>
                        <li>To find room N: <code style="background: var(--code-bg); padding: 0.2rem 0.5rem; border-radius: 4px; color: var(--mclaren-orange);">Address = Base + (N × Size)</code></li>
                    </ul>

                    <div class="callout callout-info">
                        <div class="callout-title">Key Insight</div>
                        <p>The "contiguous" nature means all elements are stored next to each other in memory - no gaps, no jumping around!</p>
                    </div>
                </div>

                <!-- Level 3: Computer Scientist -->
                <div class="card glass level-card">
                    <h4>🎓 Level 3: Computer Scientist Explanation</h4>
                    <p style="color: var(--text-secondary); margin-bottom: var(--spacing-md);">An array is a linear data structure providing:</p>

                    <ul style="color: var(--text-secondary); line-height: 2;">
                        <li><strong style="color: var(--mclaren-orange);">O(1) random access</strong> through index-based addressing</li>
                        <li><strong style="color: var(--meta-blue);">Contiguous memory</strong> allocation in virtual address space</li>
                        <li><strong style="color: var(--redbull-red);">Homogeneous elements</strong> (all same type/size)</li>
                        <li>Fixed capacity (static) or dynamic resizing (dynamic arrays)</li>
                        <li>Mapped to physical RAM via page tables and CPU cache hierarchy</li>
                    </ul>

                    <div class="callout callout-success">
                        <div class="callout-title">The Magic</div>
                        <p>Arrays are the ONLY data structure that provides <strong>true O(1) random access</strong>. This is their superpower!</p>
                    </div>
                </div>
            </div>

            <!-- Detailed Theoretical Foundation -->
            <div class="card glass" style="margin-top: var(--spacing-2xl);">
                <h3 style="color: var(--mclaren-orange); font-size: 1.8rem; margin-bottom: var(--spacing-lg);">Theoretical Foundation: What Makes Arrays Special</h3>
                
                <div style="color: var(--text-secondary); line-height: 2; font-size: 1.05rem;">
                    <h4 style="color: var(--meta-blue); margin-top: var(--spacing-lg);">1. Mathematical Definition</h4>
                    <p>
                        An array is a finite, ordered collection of elements where each element can be accessed by its index. 
                        Formally, an array A of size n can be defined as a function: <code style="background: rgba(255, 128, 0, 0.1); padding: 0.2rem 0.5rem; border-radius: 4px;">A: {0, 1, 2, ..., n-1} → T</code>, 
                        where T is the type of elements stored in the array.
                    </p>
                    
                    <h4 style="color: var(--meta-blue); margin-top: var(--spacing-lg);">2. Memory Model</h4>
                    <p>
                        Arrays occupy a continuous block of virtual memory. The operating system maps this virtual memory to physical RAM through a page table mechanism. 
                        Each element occupies exactly <code>sizeof(T)</code> bytes, where T is the element type. This uniform sizing is what enables O(1) random access.
                    </p>
                    
                    <div class="callout callout-info" style="margin-top: var(--spacing-md);">
                        <div class="callout-title">Deep Dive: Virtual vs Physical Memory</div>
                        <p>
                            When you create an array, you're working with <strong>virtual addresses</strong>. The Memory Management Unit (MMU) translates 
                            these to physical addresses. A typical virtual address might be 48-64 bits, mapped to 4KB pages in physical RAM. 
                            This means even though your array appears contiguous in virtual memory, it may be fragmented across physical memory pages.
                        </p>
                        <ul style="margin-top: var(--spacing-sm); line-height: 1.9;">
                            <li><strong>Page Size:</strong> Typically 4KB (4096 bytes)</li>
                            <li><strong>Page Table Entry (PTE):</strong> Maps virtual page to physical frame</li>
                            <li><strong>Translation Lookaside Buffer (TLB):</strong> Caches recent address translations</li>
                            <li><strong>Page Fault:</strong> Occurs when accessing a page not in physical memory</li>
                        </ul>
                    </div>
                    
                    <h4 style="color: var(--meta-blue); margin-top: var(--spacing-xl);">3. Time Complexity Analysis</h4>
                    <p>
                        The beauty of arrays lies in their predictable performance characteristics:
                    </p>
                    <ul style="margin-top: var(--spacing-sm); line-height: 1.9;">
                        <li><strong>Access by Index:</strong> O(1) - Computed as <code>base_address + index × element_size</code></li>
                        <li><strong>Linear Search:</strong> O(n) - Must potentially examine every element</li>
                        <li><strong>Binary Search (sorted):</strong> O(log n) - Halves search space each iteration</li>
                        <li><strong>Insert at End:</strong> O(1) amortized for dynamic arrays, impossible for static</li>
                        <li><strong>Insert at Position:</strong> O(n) - Requires shifting all subsequent elements</li>
                        <li><strong>Delete at Position:</strong> O(n) - Requires shifting to fill gap</li>
                    </ul>
                    
                    <h4 style="color: var(--meta-blue); margin-top: var(--spacing-xl);">4. Space Complexity</h4>
                    <p>
                        Arrays exhibit optimal space utilization for their purpose:
                    </p>
                    <ul style="margin-top: var(--spacing-sm); line-height: 1.9;">
                        <li><strong>Static Array:</strong> Exactly <code>n × sizeof(T)</code> bytes</li>
                        <li><strong>Dynamic Array:</strong> <code>capacity × sizeof(T)</code> bytes + O(1) metadata (size, capacity)</li>
                        <li><strong>No Per-Element Overhead:</strong> Unlike linked lists, no pointer storage per element</li>
                        <li><strong>Cache-Friendly:</strong> Contiguous layout maximizes cache line utilization</li>
                    </ul>
                    
                    <div class="callout callout-warning" style="margin-top: var(--spacing-lg);">
                        <div class="callout-title">Memory Alignment and Padding</div>
                        <p>
                            Modern CPUs require data to be aligned to specific boundaries for optimal performance. For example:
                        </p>
                        <ul style="margin-top: var(--spacing-sm); line-height: 1.9;">
                            <li><strong>8-byte (int64) elements:</strong> Should start at addresses divisible by 8</li>
                            <li><strong>4-byte (int32) elements:</strong> Should start at addresses divisible by 4</li>
                            <li><strong>Misaligned access:</strong> Can be 2-3x slower or cause exceptions on some architectures</li>
                            <li><strong>struct padding:</strong> Compiler may add padding bytes to maintain alignment</li>
                        </ul>
                        <p style="margin-top: var(--spacing-sm);">
                            This is why <code>sizeof(struct)</code> might be larger than the sum of its members!
                        </p>
                    </div>
                    
                    <h4 style="color: var(--meta-blue); margin-top: var(--spacing-xl);">5. Comparison with Other Data Structures</h4>
                    <table class="comparison-table" style="margin-top: var(--spacing-md);">
                        <thead>
                            <tr>
                                <th>Operation</th>
                                <th>Array</th>
                                <th>Linked List</th>
                                <th>Hash Table</th>
                                <th>Binary Tree</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Access by Index</td>
                                <td><span style="color: var(--code-string);">O(1)</span></td>
                                <td><span style="color: var(--redbull-red);">O(n)</span></td>
                                <td><span style="color: var(--text-muted);">N/A</span></td>
                                <td><span style="color: var(--text-muted);">N/A</span></td>
                            </tr>
                            <tr>
                                <td>Search (unsorted)</td>
                                <td><span style="color: var(--redbull-red);">O(n)</span></td>
                                <td><span style="color: var(--redbull-red);">O(n)</span></td>
                                <td><span style="color: var(--code-string);">O(1) avg</span></td>
                                <td><span style="color: var(--redbull-red);">O(n) worst</span></td>
                            </tr>
                            <tr>
                                <td>Insert at End</td>
                                <td><span style="color: var(--code-string);">O(1)*</span></td>
                                <td><span style="color: var(--code-string);">O(1)</span></td>
                                <td><span style="color: var(--code-string);">O(1) avg</span></td>
                                <td><span style="color: var(--meta-blue);">O(log n) avg</span></td>
                            </tr>
                            <tr>
                                <td>Insert at Start</td>
                                <td><span style="color: var(--redbull-red);">O(n)</span></td>
                                <td><span style="color: var(--code-string);">O(1)</span></td>
                                <td><span style="color: var(--code-string);">O(1) avg</span></td>
                                <td><span style="color: var(--meta-blue);">O(log n) avg</span></td>
                            </tr>
                            <tr>
                                <td>Memory Overhead</td>
                                <td><span style="color: var(--code-string);">Zero</span></td>
                                <td><span style="color: var(--redbull-red);">High (pointers)</span></td>
                                <td><span style="color: var(--redbull-red);">High (buckets)</span></td>
                                <td><span style="color: var(--redbull-red);">High (pointers)</span></td>
                            </tr>
                            <tr>
                                <td>Cache Locality</td>
                                <td><span style="color: var(--code-string);">Excellent</span></td>
                                <td><span style="color: var(--redbull-red);">Poor</span></td>
                                <td><span style="color: var(--redbull-red);">Poor</span></td>
                                <td><span style="color: var(--redbull-red);">Poor</span></td>
                            </tr>
                        </tbody>
                    </table>
                    
                    <div class="callout callout-success" style="margin-top: var(--spacing-xl);">
                        <div class="callout-title">Key Insight: Cache Locality is King</div>
                        <p>
                            In modern computing, memory access is often the bottleneck, not CPU cycles. Arrays excel because:
                        </p>
                        <ul style="margin-top: var(--spacing-sm); line-height: 1.9;">
                            <li><strong>Sequential Access:</strong> When you access arr[i], arr[i+1] is likely already in cache</li>
                            <li><strong>Prefetching:</strong> CPUs can predict and prefetch sequential memory patterns</li>
                            <li><strong>Fewer Cache Lines:</strong> 8 elements might fit in a single 64-byte cache line</li>
                            <li><strong>No Pointer Chasing:</strong> Unlike linked structures, no need to follow pointers</li>
                        </ul>
                        <p style="margin-top: var(--spacing-sm); font-weight: 600; color: var(--mclaren-orange);">
                            Result: A cache-friendly array traversal can be 10-100x faster than a linked list traversal!
                        </p>
                    </div>
                </div>
            </div>

            <!-- Interactive Demo -->
            <div class="demo-container">
                <div class="demo-header">
                    <div class="demo-title">
                        🎮 <span>Interactive Array Fundamentals</span>
                    </div>
                    <div class="demo-controls">
                        <button class="btn btn-primary" onclick="createBasicArray()">Create Array</button>
                        <button class="btn btn-secondary" onclick="accessArrayElement()">Access Element</button>
                        <button class="btn btn-danger" onclick="showMemoryLayout()">Memory Layout</button>
                    </div>
                </div>

                <div class="visualization">
                    <div class="array-container" id="basicArrayVis"></div>
                    <div class="output-terminal" id="basicArrayOutput">
                        <div class="output-line">
                            <span class="output-prompt">$</span>
                            <span>Click "Create Array" to begin...</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Hardware Level Section -->
        <section id="hardware">
            <h2>Arrays at Hardware Level - The Complete Picture</h2>

            <!-- Section Introduction -->
            <div class="card glass" style="background: rgba(15, 15, 15, 0.95); border-color: rgba(0, 129, 251, 0.3);">
                <p style="color: var(--text-primary); font-size: 1.1rem; line-height: 1.8; margin-bottom: 1rem;">
                    <strong style="color: var(--meta-blue);">Understanding arrays at the hardware level</strong> is crucial for writing high-performance code. This section explores the complete journey from high-level array declarations to physical memory representation, covering operating system memory management, CPU cache hierarchies, memory addressing, and the critical performance implications of cache locality.
                </p>
                <p style="color: var(--text-secondary); font-size: 1.05rem; line-height: 1.8;">
                    We'll examine how modern CPUs interact with arrays through multiple cache levels (L1, L2, L3), why contiguous memory layout provides dramatic performance advantages, and how understanding hardware architecture can help you write code that's 10-100x faster through better memory access patterns.
                </p>
            </div>

            <div class="card glass">
                <div class="card-header">
                    <span class="icon"></span>
                    <h3>When you write: <code style="color: var(--mclaren-orange);">arr = [10, 20, 30, 40, 50]</code></h3>
                </div>

                <p style="color: var(--text-secondary); font-size: 1.1rem; margin-bottom: var(--spacing-lg);">
                    Let's dive deep into what REALLY happens at the hardware level - from OS memory allocation to CPU cache hierarchies.
                </p>

                <div class="step-container">
                    <div class="step">
                        <h4><span class="step-number">1</span>Memory Allocation Request</h4>
                        <div class="step-description">
                            <p><strong style="color: var(--mclaren-orange);">Python Runtime:</strong> "Hey Operating System, I need 40 bytes of contiguous memory!"</p>
                            <p><strong style="color: var(--meta-blue);">OS Memory Manager:</strong> "Let me check my free memory map..."</p>
                            <p><strong style="color: var(--code-string);">OS:</strong> "Found free block at address 0x7f8a2c001000, here you go!"</p>
                            
                            <div class="callout callout-info" style="margin-top: var(--spacing-md);">
                                <div class="callout-title">🔍 Deep Dive</div>
                                <p><strong>Why 40 bytes?</strong> In CPython, integers are objects, so each "integer" is actually a pointer (8 bytes on 64-bit systems). For 5 elements: 5 × 8 = 40 bytes.</p>
                                <p><strong>Contiguous requirement:</strong> The OS must find a single, unbroken chunk of 40 bytes. If fragmented, it may need to defragment or use a different memory pool.</p>
                            </div>
                        </div>
                    </div>

                    <div class="step">
                        <h4><span class="step-number">2</span>Memory Layout Creation</h4>
                        <div class="step-description">
                            <div class="code-container">
                                <div class="code-header">
                                    <div class="code-title">Physical Memory Map</div>
                                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code><span class="comment">// Physical Memory Layout</span>
<span class="keyword">Address</span>          <span class="keyword">Value</span>       <span class="keyword">Index</span>    <span class="keyword">Offset Calculation</span>
<span class="number">0x7f8a2c001000</span>:  <span class="variable">10</span>         arr[<span class="number">0</span>]   base + (<span class="number">0</span> × <span class="number">8</span>) = base + <span class="number">0</span>
<span class="number">0x7f8a2c001008</span>:  <span class="variable">20</span>         arr[<span class="number">1</span>]   base + (<span class="number">1</span> × <span class="number">8</span>) = base + <span class="number">8</span>
<span class="number">0x7f8a2c001010</span>:  <span class="variable">30</span>         arr[<span class="number">2</span>]   base + (<span class="number">2</span> × <span class="number">8</span>) = base + <span class="number">16</span>
<span class="number">0x7f8a2c001018</span>:  <span class="variable">40</span>         arr[<span class="number">3</span>]   base + (<span class="number">3</span> × <span class="number">8</span>) = base + <span class="number">24</span>
<span class="number">0x7f8a2c001020</span>:  <span class="variable">50</span>         arr[<span class="number">4</span>]   base + (<span class="number">4</span> × <span class="number">8</span>) = base + <span class="number">32</span></code></pre>
                            </div>

                            <div class="callout callout-warning" style="margin-top: var(--spacing-md);">
                                <div class="callout-title">Performance Magic</div>
                                <p><strong>Notice the pattern:</strong> Each address is exactly 8 bytes apart (0x8 in hexadecimal).</p>
                                <p><strong>Why this matters:</strong> The CPU can calculate ANY element's address using simple arithmetic - no searching required!</p>
                                <p><strong>Formula:</strong> <code>element_address = base_address + (index × element_size)</code></p>
                            </div>
                        </div>
                    </div>

                    <div class="step">
                        <h4><span class="step-number">3</span>Variable Binding on Stack</h4>
                        <div class="step-description">
                            <p>The variable name <code style="color: var(--mclaren-orange);">arr</code> is stored on the stack and contains ONE piece of information: <strong>the base address</strong>.</p>
                            
                            <div class="code-container" style="margin-top: var(--spacing-md);">
                                <div class="code-header">
                                    <div class="code-title">Stack Memory</div>
                                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code><span class="comment">// Stack Frame</span>
┌─────────────────────┐
│ Variable: <span class="variable">arr</span>      │
│ Type: <span class="keyword">pointer</span>        │  
│ Value: <span class="number">0x7f8a2c001000</span> │ ← <span class="comment">This is the base address!</span>
│ Size: <span class="number">8 bytes</span>         │ ← <span class="comment">Just the pointer, not the data</span>
└─────────────────────┘</code></pre>
                            </div>

                            <div class="callout callout-info" style="margin-top: var(--spacing-md);">
                                <div class="callout-title">Key Concept</div>
                                <p><strong>The variable doesn't "contain" the array</strong> - it contains a POINTER to where the array starts in memory!</p>
                                <p>Stack: 8 bytes (pointer) | Heap: 40 bytes (actual data)</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Interactive Hardware Demo -->
                <div class="demo-container" style="margin-top: var(--spacing-xl);">
                    <div class="demo-header">
                        <div class="demo-title">
                            🎮 <span>CPU Access Simulation</span>
                        </div>
                        <div class="demo-controls">
                            <button class="btn btn-primary" onclick="initCPUDemo()">Initialize</button>
                            <button class="btn btn-secondary" onclick="stepCPUAccess()">Step Through</button>
                            <button class="btn btn-danger" onclick="resetCPUDemo()">Reset</button>
                        </div>
                    </div>

                    <div class="visualization">
                        <div class="array-container" id="cpuArrayVis"></div>
                        <div class="output-terminal" id="cpuOutput">
                            <div class="output-line">
                                <span class="output-prompt">CPU$</span>
                                <span>Click "Initialize" to see how the CPU accesses array elements...</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Why arr[3] is O(1) -->
            <div class="card glass" style="margin-top: var(--spacing-2xl);">
                <div class="card-header">
                    <span class="icon"></span>
                    <h3>Why <code style="color: var(--mclaren-orange);">arr[3]</code> Gives Us <code>40</code> INSTANTLY</h3>
                </div>

                <div class="expandable" id="cpuPerspective">
                    <div class="expandable-header" onclick="toggleExpand('cpuPerspective')">
                        <div class="expandable-title">
                            🔍 <span>CPU's Perspective: The 5-Instruction Dance</span>
                        </div>
                        <div class="expandable-icon">▼</div>
                    </div>
                    <div class="expandable-content">
                        <div class="expandable-body">
                            <h4>When you write: <code style="color: var(--mclaren-orange);">value = arr[3]</code></h4>
                            
                            <div class="code-container" style="margin-top: var(--spacing-md);">
                                <div class="code-header">
                                    <div class="code-title">x86-64 Assembly Instructions</div>
                                    <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                                </div>
                                <pre><code><span class="comment">// Step-by-step CPU execution</span>
<span class="keyword">MOV</span> <span class="variable">R1</span>, [arr]           <span class="comment">Load base address into register R1</span>
                            <span class="comment">Time: 1 CPU cycle</span>
                            <span class="comment">R1 now contains: 0x7f8a2c001000</span>

<span class="keyword">MOV</span> <span class="variable">R2</span>, <span class="number">3</span>               <span class="comment">Load index 3 into register R2</span>
                            <span class="comment">Time: 1 CPU cycle</span>
                            <span class="comment">R2 now contains: 3</span>

<span class="keyword">IMUL</span> <span class="variable">R2</span>, <span class="variable">R2</span>, <span class="number">8</span>          <span class="comment">Multiply index by element size (8 bytes)</span>
                            <span class="comment">Time: 1-3 CPU cycles (modern CPUs)</span>
                            <span class="comment">R2 now contains: 24 (3 × 8)</span>

<span class="keyword">ADD</span> <span class="variable">R1</span>, <span class="variable">R1</span>, <span class="variable">R2</span>          <span class="comment">Calculate final address: base + offset</span>
                            <span class="comment">Time: 1 CPU cycle</span>
                            <span class="comment">R1 now contains: 0x7f8a2c001018</span>

<span class="keyword">MOV</span> <span class="variable">R3</span>, [<span class="variable">R1</span>]            <span class="comment">Load value from calculated address</span>
                            <span class="comment">Time: 1 cycle (L1 cache) to 100+ cycles (RAM)</span>
                            <span class="comment">R3 now contains: 40</span>

<span class="comment">// Total: 5-107 instructions = O(1) constant time!</span>
<span class="comment">// The time doesn't depend on array size or index position</span></code></pre>
                            </div>

                            <div class="callout callout-success" style="margin-top: var(--spacing-lg);">
                                <div class="callout-title">The O(1) Guarantee</div>
                                <p><strong>Why this is O(1):</strong> Whether accessing arr[0] or arr[1000000], the CPU always executes the SAME 5 instructions!</p>
                                <p><strong>Contrast with linked lists:</strong> To access element 1000000 in a linked list, you'd need to follow 1000000 pointers - that's O(n)!</p>
                                <p><strong>Cache penalty:</strong> The variable time (1-100+ cycles) depends on cache locality, NOT array size. It's still O(1)!</p>
                            </div>

                            <!-- Interactive Assembly Demo -->
                            <div class="demo-container" style="margin-top: var(--spacing-xl);">
                                <div class="demo-header">
                                    <div class="demo-title">
                                        🎮 <span>Assembly Instruction Simulator</span>
                                    </div>
                                    <div class="demo-controls">
                                        <button class="btn btn-primary" onclick="startAssemblyDemo()">Start</button>
                                        <button class="btn btn-secondary" onclick="stepAssembly()">Next Instruction</button>
                                        <button class="btn btn-danger" onclick="resetAssemblyDemo()">Reset</button>
                                    </div>
                                </div>

                                <div class="visualization">
                                    <div id="assemblyVis" style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--spacing-lg);">
                                        <!-- Registers -->
                                        <div>
                                            <h4 style="color: var(--mclaren-orange); margin-bottom: var(--spacing-md);">CPU Registers</h4>
                                            <div class="output-terminal" id="registersDisplay">
                                                <div class="output-line"><span class="output-prompt">R1:</span> <span id="r1Val">0x00000000</span></div>
                                                <div class="output-line"><span class="output-prompt">R2:</span> <span id="r2Val">0x00000000</span></div>
                                                <div class="output-line"><span class="output-prompt">R3:</span> <span id="r3Val">0x00000000</span></div>
                                            </div>
                                        </div>
                                        
                                        <!-- Instruction Trace -->
                                        <div>
                                            <h4 style="color: var(--meta-blue); margin-bottom: var(--spacing-md);">Execution Trace</h4>
                                            <div class="output-terminal" id="assemblyTrace">
                                                <div class="output-line">
                                                    <span class="output-prompt">$</span>
                                                    <span>Click "Start" to begin...</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Memory Controller's Journey -->
                <div class="expandable" id="memoryController" style="margin-top: var(--spacing-lg);">
                    <div class="expandable-header" onclick="toggleExpand('memoryController')">
                        <div class="expandable-title">
                            💾 <span>Memory Controller's Journey: Cache Hierarchy Deep Dive</span>
                        </div>
                        <div class="expandable-icon">▼</div>
                    </div>
                    <div class="expandable-content">
                        <div class="expandable-body">
                            <h4>The CPU's quest to fetch data from address <code style="color: var(--mclaren-orange);">0x7f8a2c001018</code></h4>

                            <div class="step-container" style="margin-top: var(--spacing-lg);">
                                <div class="step">
                                    <h4><span class="step-number">1</span>Check L1 Cache (32-64KB, Per-Core)</h4>
                                    <div class="step-description">
                                        <p><strong style="color: var(--code-string);">Access Time:</strong> 4 CPU cycles (~1 nanosecond at 4GHz)</p>
                                        <p><strong style="color: var(--meta-blue);">Cache Line Size:</strong> 64 bytes (can hold 8 int64 values)</p>
                                        <p><strong style="color: var(--mclaren-orange);">Hit Rate:</strong> ~95% for sequential access patterns</p>
                                        
                                        <div class="callout callout-info" style="margin-top: var(--spacing-md);">
                                            <div class="callout-title">🔍 How L1 Works</div>
                                            <p>L1 cache is divided into cache lines of 64 bytes each. When you access one element, the entire cache line containing it is loaded.</p>
                                            <p><strong>Example:</strong> Accessing arr[0] loads addresses 0x1000-0x103F (all of arr[0] through arr[7]!).</p>
                                        </div>
                                    </div>
                                </div>

                                <div class="step">
                                    <h4><span class="step-number">2</span>Check L2 Cache (256KB-1MB, Per-Core)</h4>
                                    <div class="step-description">
                                        <p><strong style="color: var(--code-string);">Access Time:</strong> 10-12 CPU cycles (~3 nanoseconds)</p>
                                        <p><strong style="color: var(--meta-blue);">Size:</strong> Larger but slower than L1</p>
                                        <p><strong style="color: var(--mclaren-orange);">Purpose:</strong> Holds recently evicted L1 cache lines</p>
                                        
                                        <div class="callout callout-warning" style="margin-top: var(--spacing-md);">
                                            <div class="callout-title">Cache Miss Penalty</div>
                                            <p>L2 miss means going to L3 - that's 10-12 cycles already wasted, plus whatever L3 takes!</p>
                                        </div>
                                    </div>
                                </div>

                                <div class="step">
                                    <h4><span class="step-number">3</span>Check L3 Cache (8-32MB, Shared Across Cores)</h4>
                                    <div class="step-description">
                                        <p><strong style="color: var(--code-string);">Access Time:</strong> 30-40 CPU cycles (~10 nanoseconds)</p>
                                        <p><strong style="color: var(--meta-blue);">Shared:</strong> All CPU cores share this cache</p>
                                        <p><strong style="color: var(--mclaren-orange);">Hit Rate:</strong> ~98% if data was recently used by ANY core</p>
                                    </div>
                                </div>

                                <div class="step">
                                    <h4><span class="step-number">4</span>Fetch from RAM (8-64GB)</h4>
                                    <div class="step-description">
                                        <p><strong style="color: var(--code-string);">Access Time:</strong> 100-300 CPU cycles (~50-100 nanoseconds)</p>
                                        <p><strong style="color: var(--redbull-red);">Cost:</strong> 25-75x slower than L1 cache!</p>
                                        <p><strong style="color: var(--meta-blue);">Return Path:</strong> Data fills L3 → L2 → L1 cache on the way back</p>
                                        
                                        <div class="callout callout-danger" style="margin-top: var(--spacing-md);">
                                            <div class="callout-title">💀 The Performance Killer</div>
                                            <p><strong>RAM latency is the #1 performance bottleneck</strong> in modern computing!</p>
                                            <p>CPU: 4 GHz (0.25 ns per cycle) | RAM: ~100 cycles = 25 ns</p>
                                            <p>The CPU sits IDLE for 99 cycles waiting for data!</p>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Cache Hierarchy Visualization -->
                            <div class="demo-container" style="margin-top: var(--spacing-xl);">
                                <div class="demo-header">
                                    <div class="demo-title">
                                        🎮 <span>Cache Hierarchy Simulator</span>
                                    </div>
                                    <div class="demo-controls">
                                        <button class="btn btn-primary" onclick="initCacheDemo()">Initialize</button>
                                        <button class="btn btn-secondary" onclick="accessCache()">Access Random Element</button>
                                        <button class="btn btn-danger" onclick="clearCache()">Clear Cache</button>
                                    </div>
                                </div>

                                <div class="visualization">
                                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: var(--spacing-md);">
                                        <div class="card glass" style="padding: var(--spacing-md); text-align: center;">
                                            <h5 style="color: var(--mclaren-orange);">L1 Cache</h5>
                                            <div style="font-size: 2rem; font-weight: 700; margin: var(--spacing-md) 0;" id="l1Hits">0</div>
                                            <div style="color: var(--text-muted);">Hits (4 cycles)</div>
                                        </div>
                                        <div class="card glass" style="padding: var(--spacing-md); text-align: center;">
                                            <h5 style="color: var(--meta-blue);">L2 Cache</h5>
                                            <div style="font-size: 2rem; font-weight: 700; margin: var(--spacing-md) 0;" id="l2Hits">0</div>
                                            <div style="color: var(--text-muted);">Hits (12 cycles)</div>
                                        </div>
                                        <div class="card glass" style="padding: var(--spacing-md); text-align: center;">
                                            <h5 style="color: var(--code-string);">L3 Cache</h5>
                                            <div style="font-size: 2rem; font-weight: 700; margin: var(--spacing-md) 0;" id="l3Hits">0</div>
                                            <div style="color: var(--text-muted);">Hits (40 cycles)</div>
                                        </div>
                                        <div class="card glass" style="padding: var(--spacing-md); text-align: center;">
                                            <h5 style="color: var(--redbull-red);">RAM</h5>
                                            <div style="font-size: 2rem; font-weight: 700; margin: var(--spacing-md) 0;" id="ramHits">0</div>
                                            <div style="color: var(--text-muted);">Misses (200 cycles)</div>
                                        </div>
                                    </div>
                                    
                                    <div class="output-terminal" id="cacheOutput" style="margin-top: var(--spacing-lg);">
                                        <div class="output-line">
                                            <span class="output-prompt">Cache$</span>
                                            <span>Ready to simulate cache access patterns...</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="callout callout-success" style="margin-top: var(--spacing-xl);">
                                <div class="callout-title">The Critical Lesson</div>
                                <p><strong>Even with cache misses, access time is CONSTANT</strong> - it doesn't depend on array size!</p>
                                <p>This is why we say O(1) - the complexity class is about growth rate, not absolute time.</p>
                                <ul style="margin-top: var(--spacing-md); line-height: 2;">
                                    <li>Array of 10 elements: 4-200 cycles</li>
                                    <li>Array of 1,000,000 elements: 4-200 cycles (same!)</li>
                                    <li>The variation comes from cache behavior, NOT array traversal</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Array Types Section -->
        <section id="types">
            <h2>Types of Arrays - Beyond One Dimension</h2>

            <!-- Section Introduction -->
            <div class="card glass" style="background: rgba(15, 15, 15, 0.95); border-color: rgba(0, 129, 251, 0.3);">
                <p style="color: var(--text-primary); font-size: 1.1rem; line-height: 1.8; margin-bottom: 1rem;">
                    <strong style="color: var(--meta-blue);">Arrays come in many forms</strong>, from simple one-dimensional lists to complex multi-dimensional structures. This section covers the entire spectrum: 1D arrays (linear sequences), 2D arrays (matrices), 3D arrays (tensors), and jagged arrays (arrays of varying lengths).
                </p>
                <p style="color: var(--text-secondary); font-size: 1.05rem; line-height: 1.8;">
                    Understanding how multi-dimensional arrays are stored in memory (row-major vs. column-major order) is critical for performance optimization. We'll explore memory layout patterns, indexing calculations, practical use cases for each type, and when to choose one structure over another based on your specific requirements.
                </p>
            </div>

            <!-- 1D Arrays -->
            <div class="card glass">
                <div class="card-header">
                    <span class="icon">📏</span>
                    <h3>1D Arrays (Linear)</h3>
                </div>

                <p style="color: var(--text-secondary); font-size: 1.1rem; margin-bottom: var(--spacing-lg);">
                    The simplest and most common form - a single row of elements.
                </p>

                <div class="code-container">
                    <div class="code-header">
                        <div class="code-title">1D Array Examples</div>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>
                    <pre><code><span class="comment"># Python</span>
<span class="variable">arr</span> = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>]

<span class="comment"># C/C++</span>
<span class="keyword">int</span> <span class="variable">arr</span>[<span class="number">5</span>] = {<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>};

<span class="comment"># Java</span>
<span class="keyword">int</span>[] <span class="variable">arr</span> = <span class="keyword">new</span> <span class="keyword">int</span>[]{<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>};

<span class="comment"># JavaScript</span>
<span class="keyword">const</span> <span class="variable">arr</span> = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</code></pre>
                </div>

                <div class="callout callout-info" style="margin-top: var(--spacing-lg);">
                    <div class="callout-title">Memory Layout</div>
                    <p>All elements stored contiguously in memory. Access pattern: Linear, sequential.</p>
                    <p><strong>Use cases:</strong> Scores, temperatures, prices, simple lists.</p>
                </div>
            </div>

            <!-- 2D Arrays -->
            <div class="card glass" style="margin-top: var(--spacing-2xl);">
                <div class="card-header">
                    <span class="icon"></span>
                    <h3>2D Arrays (Matrix)</h3>
                </div>

                <p style="color: var(--text-secondary); font-size: 1.1rem; margin-bottom: var(--spacing-lg);">
                    A grid or table of elements - rows and columns. Despite looking 2D, it's still stored as a 1D block in memory!
                </p>

                <div class="code-container">
                    <div class="code-header">
                        <div class="code-title">2D Array Creation</div>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>
                    <pre><code><span class="comment"># Python - List of lists</span>
<span class="variable">matrix</span> = [
    [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],
    [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>],
    [<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]
]

<span class="comment"># C/C++ - True contiguous 2D</span>
<span class="keyword">int</span> <span class="variable">matrix</span>[<span class="number">3</span>][<span class="number">3</span>] = {
    {<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>},
    {<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>},
    {<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>}
};

<span class="comment"># NumPy - Optimized 2D array</span>
<span class="keyword">import</span> numpy <span class="keyword">as</span> np
<span class="variable">matrix</span> = np.<span class="function">array</span>([[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>], [<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>], [<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>]])</code></pre>
                </div>

                <h4 style="margin-top: var(--spacing-xl);">Memory Layout: Row-Major vs Column-Major</h4>

                <div class="level-grid" style="margin-top: var(--spacing-lg);">
                    <div class="card glass level-card">
                        <h4 style="color: var(--mclaren-orange);">Row-Major Order (C/C++, Python)</h4>
                        <p style="color: var(--text-secondary); margin: var(--spacing-md) 0;">
                            Rows are stored contiguously. Each row is laid out sequentially in memory.
                        </p>
                        <div class="code-container">
                            <pre><code style="font-size: 0.85rem;"><span class="comment">// Logical 2D view</span>
[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]
[<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]
[<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]

<span class="comment">// Physical memory layout</span>
[<span class="number">1</span>][<span class="number">2</span>][<span class="number">3</span>][<span class="number">4</span>][<span class="number">5</span>][<span class="number">6</span>][<span class="number">7</span>][<span class="number">8</span>][<span class="number">9</span>]
 └──row 0──┘ └──row 1──┘ └──row 2──┘

<span class="comment">// Address calculation</span>
address = base + (row × num_cols + col) × size</code></pre>
                        </div>
                        <div class="callout callout-success" style="margin-top: var(--spacing-md);">
                            <div class="callout-title">✅ Best for row traversal</div>
                            <p>Cache-friendly when iterating row by row!</p>
                        </div>
                    </div>

                    <div class="card glass level-card">
                        <h4 style="color: var(--meta-blue);">Column-Major Order (Fortran, MATLAB)</h4>
                        <p style="color: var(--text-secondary); margin: var(--spacing-md) 0;">
                            Columns are stored contiguously. Each column is laid out sequentially in memory.
                        </p>
                        <div class="code-container">
                            <pre><code style="font-size: 0.85rem;"><span class="comment">// Logical 2D view</span>
[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]
[<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]
[<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>]

<span class="comment">// Physical memory layout</span>
[<span class="number">1</span>][<span class="number">4</span>][<span class="number">7</span>][<span class="number">2</span>][<span class="number">5</span>][<span class="number">8</span>][<span class="number">3</span>][<span class="number">6</span>][<span class="number">9</span>]
 └──col 0──┘ └──col 1──┘ └──col 2──┘

<span class="comment">// Address calculation</span>
address = base + (col × num_rows + row) × size</code></pre>
                        </div>
                        <div class="callout callout-info" style="margin-top: var(--spacing-md);">
                            <div class="callout-title">✅ Best for column traversal</div>
                            <p>Cache-friendly when iterating column by column!</p>
                        </div>
                    </div>
                </div>

                <!-- Interactive 2D Array Demo -->
                <div class="demo-container" style="margin-top: var(--spacing-xl);">
                    <div class="demo-header">
                        <div class="demo-title">
                            🎮 <span>2D Array Memory Layout Visualizer</span>
                        </div>
                        <div class="demo-controls">
                            <button class="btn btn-primary" onclick="create2DArray()">Create Matrix</button>
                            <button class="btn btn-secondary" onclick="traverseRowMajor()">Row-Major Traverse</button>
                            <button class="btn btn-danger" onclick="traverseColMajor()">Column-Major Traverse</button>
                        </div>
                    </div>

                    <div class="visualization">
                        <div style="margin-bottom: var(--spacing-lg);">
                            <h4 style="color: var(--text-muted);">Logical 2D View</h4>
                            <div id="matrix2DView" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: var(--spacing-sm); max-width: 400px; margin: var(--spacing-md) 0;"></div>
                        </div>
                        <div>
                            <h4 style="color: var(--text-muted);">Physical Memory Layout</h4>
                            <div id="matrix1DView" style="display: flex; flex-wrap: wrap; gap: var(--spacing-xs); margin: var(--spacing-md) 0;"></div>
                        </div>
                        <div class="output-terminal" id="matrix2DOutput">
                            <div class="output-line">
                                <span class="output-prompt">$</span>
                                <span>Click "Create Matrix" to begin...</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 3D and Higher Dimensional Arrays -->
            <div class="card glass" style="margin-top: var(--spacing-2xl);">
                <div class="card-header">
                    <span class="icon">🧊</span>
                    <h3>3D Arrays and Beyond</h3>
                </div>

                <p style="color: var(--text-secondary); font-size: 1.1rem; margin-bottom: var(--spacing-lg);">
                    3D arrays add depth to the matrix. Think of it as a stack of 2D matrices. Common in scientific computing, 3D graphics, and video processing.
                </p>

                <div class="code-container">
                    <div class="code-header">
                        <div class="code-title">3D Array Example</div>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>
                    <pre><code><span class="comment"># Python - RGB image (height × width × channels)</span>
<span class="variable">image</span> = [
    [[<span class="number">255</span>, <span class="number">0</span>, <span class="number">0</span>], [<span class="number">0</span>, <span class="number">255</span>, <span class="number">0</span>]],    <span class="comment"># Row 0</span>
    [[<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>], [<span class="number">255</span>, <span class="number">255</span>, <span class="number">0</span>]]     <span class="comment"># Row 1</span>
]
<span class="comment"># Shape: 2×2×3 (2 rows, 2 columns, 3 color channels)</span>

<span class="comment"># NumPy - Much more efficient</span>
<span class="keyword">import</span> numpy <span class="keyword">as</span> np
<span class="variable">tensor</span> = np.<span class="function">zeros</span>((<span class="number">100</span>, <span class="number">100</span>, <span class="number">3</span>))  <span class="comment"># 100×100 RGB image</span>

<span class="comment"># Address calculation for 3D array</span>
<span class="comment"># address = base + (depth × rows × cols + row × cols + col) × size</span></code></pre>
                </div>

                <div class="callout callout-warning" style="margin-top: var(--spacing-lg);">
                    <div class="callout-title">Memory Explosion</div>
                    <p><strong>3D arrays grow FAST:</strong></p>
                    <ul style="margin-top: var(--spacing-sm); line-height: 2;">
                        <li>100×100 array (2D): 10,000 elements</li>
                        <li>100×100×3 array (3D): 30,000 elements</li>
                        <li>100×100×100 array (3D): 1,000,000 elements!</li>
                        <li>1000×1000×1000 array (3D): 1 BILLION elements = ~8GB (int64)</li>
                    </ul>
                </div>

                <h4 style="margin-top: var(--spacing-xl);">Common Use Cases</h4>
                <div class="level-grid" style="margin-top: var(--spacing-lg);">
                    <div class="card glass">
                        <h4 style="color: var(--mclaren-orange);">Image Processing</h4>
                        <p style="color: var(--text-secondary); line-height: 1.8;">
                            Images are 3D arrays: <code>[height][width][channels]</code>
                            <br>• RGB: 3 channels (Red, Green, Blue)
                            <br>• RGBA: 4 channels (+ Alpha)
                            <br>• Grayscale: 1 channel
                        </p>
                    </div>
                    <div class="card glass">
                        <h4 style="color: var(--meta-blue);">🎥 Video Processing</h4>
                        <p style="color: var(--text-secondary); line-height: 1.8;">
                            Videos are 4D arrays: <code>[frame][height][width][channels]</code>
                            <br>• 1080p video at 60fps
                            <br>• 1920×1080×3 per frame
                            <br>• ~373MB per second!
                        </p>
                    </div>
                    <div class="card glass">
                        <h4 style="color: var(--code-string);">Deep Learning</h4>
                        <p style="color: var(--text-secondary); line-height: 1.8;">
                            Tensors can be 4D, 5D, or higher:
                            <br>• Batch of images: <code>[batch][height][width][channels]</code>
                            <br>• Time series: <code>[batch][time][features]</code>
                        </p>
                    </div>
                </div>
            </div>

            <!-- Jagged Arrays -->
            <div class="card glass" style="margin-top: var(--spacing-2xl);">
                <div class="card-header">
                    <span class="icon"></span>
                    <h3>Jagged Arrays (Array of Arrays)</h3>
                </div>

                <p style="color: var(--text-secondary); font-size: 1.1rem; margin-bottom: var(--spacing-lg);">
                    Unlike regular 2D arrays, jagged arrays allow rows of different lengths. Each row is a separate array in memory!
                </p>

                <div class="code-container">
                    <div class="code-header">
                        <div class="code-title">Jagged Array Example</div>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>
                    <pre><code><span class="comment"># Python - Natural jagged array</span>
<span class="variable">jagged</span> = [
    [<span class="number">1</span>, <span class="number">2</span>],
    [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>],
    [<span class="number">6</span>],
    [<span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>]
]

<span class="comment"># C# - Explicit jagged array</span>
<span class="keyword">int</span>[][] <span class="variable">jagged</span> = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">3</span>][];
<span class="variable">jagged</span>[<span class="number">0</span>] = <span class="keyword">new</span> <span class="keyword">int</span>[] { <span class="number">1</span>, <span class="number">2</span> };
<span class="variable">jagged</span>[<span class="number">1</span>] = <span class="keyword">new</span> <span class="keyword">int</span>[] { <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span> };
<span class="variable">jagged</span>[<span class="number">2</span>] = <span class="keyword">new</span> <span class="keyword">int</span>[] { <span class="number">6</span> };</code></pre>
                </div>

                <div class="level-grid" style="margin-top: var(--spacing-xl);">
                    <div class="card glass">
                        <h4 style="color: var(--code-string);">✅ Advantages</h4>
                        <ul style="color: var(--text-secondary); line-height: 2;">
                            <li>Memory efficient for sparse data</li>
                            <li>Flexible row lengths</li>
                            <li>Each row can be resized independently</li>
                            <li>No wasted space</li>
                        </ul>
                    </div>
                    <div class="card glass">
                        <h4 style="color: var(--redbull-red);">❌ Disadvantages</h4>
                        <ul style="color: var(--text-secondary); line-height: 2;">
                            <li>Not cache-friendly (pointer chasing)</li>
                            <li>Extra memory for pointers</li>
                            <li>Slower access time</li>
                            <li>Fragmented memory layout</li>
                        </ul>
                    </div>
                </div>

                <div class="callout callout-info" style="margin-top: var(--spacing-lg);">
                    <div class="callout-title">When to Use Jagged Arrays</div>
                    <p><strong>Perfect for:</strong></p>
                    <ul style="margin-top: var(--spacing-sm); line-height: 2;">
                        <li>Adjacency lists in graphs</li>
                        <li>Variable-length records</li>
                        <li>Sparse matrices</li>
                        <li>Hierarchical data with varying children counts</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Cache Effects Section -->
        <section id="cache">
            <h2>Cache Effects - Where Performance Lives and Dies</h2>

            <!-- Section Introduction -->
            <div class="card glass" style="background: rgba(15, 15, 15, 0.95); border-color: rgba(0, 129, 251, 0.3);">
                <p style="color: var(--text-primary); font-size: 1.1rem; line-height: 1.8; margin-bottom: 1rem;">
                    <strong style="color: var(--meta-blue);">Modern CPU performance is dominated by memory access patterns</strong>, not computation speed. This section reveals why cache locality can make your code run 10-100x faster, how CPU caches work across L1/L2/L3 levels, and why the way you traverse arrays dramatically impacts performance.
                </p>
                <p style="color: var(--text-secondary); font-size: 1.05rem; line-height: 1.8;">
                    We'll explore cache lines, spatial and temporal locality, the critical difference between row-major and column-major traversal, cache-friendly vs cache-hostile patterns, and practical optimization techniques that leverage hardware cache architecture for maximum performance.
                </p>
            </div>

            <div class="card glass">
                <div class="card-header">
                    <span class="icon"></span>
                    <h3>Why Cache Locality Matters</h3>
                </div>

                <p style="color: var(--text-secondary); font-size: 1.1rem; margin-bottom: var(--spacing-lg);">
                    The CPU is FAST. RAM is SLOW. The cache bridges this gap. Understanding cache behavior is the difference between 10x performance gains!
                </p>

                <div class="callout callout-danger" style="margin-bottom: var(--spacing-xl);">
                    <div class="callout-title">The Speed Gap</div>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: var(--spacing-md); margin-top: var(--spacing-md);">
                        <div>
                            <strong style="color: var(--mclaren-orange);">L1 Cache:</strong>
                            <div style="font-size: 2rem; font-weight: 700;">~1ns</div>
                            <div style="color: var(--text-muted);">4 cycles @ 4GHz</div>
                        </div>
                        <div>
                            <strong style="color: var(--meta-blue);">L2 Cache:</strong>
                            <div style="font-size: 2rem; font-weight: 700;">~3ns</div>
                            <div style="color: var(--text-muted);">12 cycles @ 4GHz</div>
                        </div>
                        <div>
                            <strong style="color: var(--code-string);">L3 Cache:</strong>
                            <div style="font-size: 2rem; font-weight: 700;">~10ns</div>
                            <div style="color: var(--text-muted);">40 cycles @ 4GHz</div>
                        </div>
                        <div>
                            <strong style="color: var(--redbull-red);">RAM:</strong>
                            <div style="font-size: 2rem; font-weight: 700;">~100ns</div>
                            <div style="color: var(--text-muted);">400 cycles @ 4GHz</div>
                        </div>
                    </div>
                    <p style="margin-top: var(--spacing-lg); color: var(--redbull-light); font-weight: 600;">
                        RAM is 100x SLOWER than L1 cache! This is why cache optimization matters!
                    </p>
                </div>

                <h4 style="margin-top: var(--spacing-xl);">Cache Lines: The Secret to Speed</h4>
                <p style="color: var(--text-secondary); line-height: 1.8; margin-bottom: var(--spacing-lg);">
                    When you access <code>arr[0]</code>, the CPU doesn't just fetch that single element. It loads an entire <strong>cache line</strong> (typically 64 bytes) into cache. This means you get <strong>arr[0] through arr[7]</strong> for FREE (assuming 8-byte integers)!
                </p>

                <div class="code-container">
                    <div class="code-header">
                        <div class="code-title">Cache Line Loading Example</div>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>
                    <pre><code><span class="comment">// Array in memory (int64 = 8 bytes each)</span>
<span class="keyword">Address</span>         <span class="keyword">Value</span>      <span class="keyword">Cache Line</span>
<span class="number">0x1000</span>:         <span class="number">10</span>        ┐
<span class="number">0x1008</span>:         <span class="number">20</span>        │
<span class="number">0x1010</span>:         <span class="number">30</span>        │ Cache Line 1
<span class="number">0x1018</span>:         <span class="number">40</span>        │ (64 bytes)
<span class="number">0x1020</span>:         <span class="number">50</span>        │ = 8 elements
<span class="number">0x1028</span>:         <span class="number">60</span>        │
<span class="number">0x1030</span>:         <span class="number">70</span>        │
<span class="number">0x1038</span>:         <span class="number">80</span>        ┘
<span class="number">0x1040</span>:         <span class="number">90</span>        ┐ Cache Line 2
<span class="number">0x1048</span>:         <span class="number">100</span>       ┘

<span class="comment">// When you access arr[0], you get arr[0-7] in cache!</span>
<span class="comment">// Sequential access = FAST (cache hits)</span>
<span class="comment">// Random access = SLOW (cache misses)</span></code></pre>
                </div>

                <!-- Interactive Cache Demo -->
                <div class="demo-container" style="margin-top: var(--spacing-xl);">
                    <div class="demo-header">
                        <div class="demo-title">
                            🎮 <span>Sequential vs Random Access Performance</span>
                        </div>
                        <div class="demo-controls">
                            <button class="btn btn-primary" onclick="runSequentialAccess()">Sequential Access</button>
                            <button class="btn btn-danger" onclick="runRandomAccess()">Random Access</button>
                            <button class="btn btn-secondary" onclick="compareAccess()">Compare Both</button>
                        </div>
                    </div>

                    <div class="visualization">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--spacing-lg);">
                            <div>
                                <h4 style="color: var(--mclaren-orange);">Performance Metrics</h4>
                                <div class="card glass" style="padding: var(--spacing-md); margin: var(--spacing-md) 0;">
                                    <div style="margin-bottom: var(--spacing-sm);">
                                        <strong style="color: var(--code-string);">Sequential:</strong>
                                        <div style="font-size: 1.5rem; font-weight: 700; margin-top: var(--spacing-xs);" id="seqTime">--</div>
                                        <div style="color: var(--text-muted); font-size: 0.9rem;">Cache hit rate: <span id="seqHitRate">--</span></div>
                                    </div>
                                </div>
                                <div class="card glass" style="padding: var(--spacing-md);">
                                    <div>
                                        <strong style="color: var(--redbull-red);">Random:</strong>
                                        <div style="font-size: 1.5rem; font-weight: 700; margin-top: var(--spacing-xs);" id="randTime">--</div>
                                        <div style="color: var(--text-muted); font-size: 0.9rem;">Cache hit rate: <span id="randHitRate">--</span></div>
                                    </div>
                                </div>
                                <div class="card glass" style="padding: var(--spacing-md); margin-top: var(--spacing-md); background: rgba(255, 128, 0, 0.1);">
                                    <strong style="color: var(--mclaren-orange);">Speedup:</strong>
                                    <div style="font-size: 2rem; font-weight: 700; margin-top: var(--spacing-xs);" id="speedup">--</div>
                                </div>
                            </div>
                            <div>
                                <h4 style="color: var(--meta-blue);">Access Pattern</h4>
                                <div id="cacheAccessVis" style="display: flex; flex-wrap: wrap; gap: 4px; margin: var(--spacing-md) 0;"></div>
                            </div>
                        </div>
                        <div class="output-terminal" id="cacheAccessOutput" style="margin-top: var(--spacing-lg);">
                            <div class="output-line">
                                <span class="output-prompt">$</span>
                                <span>Click a button to see cache performance in action...</span>
                            </div>
                        </div>
                    </div>
                </div>

                <h4 style="margin-top: var(--spacing-2xl);">Row-Major vs Column-Major Performance</h4>
                <p style="color: var(--text-secondary); line-height: 1.8; margin-bottom: var(--spacing-lg);">
                    This is where the theory meets brutal reality. Iterating a 2D array the "wrong way" can be 10-100x slower!
                </p>

                <div class="code-container">
                    <div class="code-header">
                        <div class="code-title">The Right and Wrong Way</div>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>
                    <pre><code><span class="comment"># ✅ CACHE-FRIENDLY (Row-Major traversal in C/Python)</span>
<span class="keyword">for</span> i <span class="keyword">in</span> <span class="function">range</span>(rows):      <span class="comment"># Outer loop: rows</span>
    <span class="keyword">for</span> j <span class="keyword">in</span> <span class="function">range</span>(cols):  <span class="comment"># Inner loop: columns</span>
        <span class="function">process</span>(matrix[i][j])    <span class="comment"># Access: [0][0], [0][1], [0][2]... SEQUENTIAL!</span>

<span class="comment"># ❌ CACHE-HOSTILE (Column-Major traversal in Row-Major storage)</span>
<span class="keyword">for</span> j <span class="keyword">in</span> <span class="function">range</span>(cols):      <span class="comment"># Outer loop: columns</span>
    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="function">range</span>(rows):  <span class="comment"># Inner loop: rows</span>
        <span class="function">process</span>(matrix[i][j])    <span class="comment"># Access: [0][0], [1][0], [2][0]... JUMPING!</span>

<span class="comment">// Example: 1000×1000 matrix</span>
<span class="comment">// Cache-friendly:  ~10ms</span>
<span class="comment">// Cache-hostile:   ~500ms (50x slower!)</span></code></pre>
                </div>

                <!-- Interactive Row vs Column Demo -->
                <div class="demo-container" style="margin-top: var(--spacing-xl);">
                    <div class="demo-header">
                        <div class="demo-title">
                            🎮 <span>Row-Major vs Column-Major Benchmark</span>
                        </div>
                        <div class="demo-controls">
                            <button class="btn btn-primary" onclick="benchmarkRowMajor()">Row-Major (Fast)</button>
                            <button class="btn btn-danger" onclick="benchmarkColMajor()">Column-Major (Slow)</button>
                            <button class="btn btn-secondary" onclick="benchmarkBoth()">Compare Both</button>
                        </div>
                    </div>

                    <div class="visualization">
                        <canvas id="traversalCanvas" width="600" height="400" style="width: 100%; max-width: 600px; background: rgba(0,0,0,0.3); border-radius: var(--radius-md);"></canvas>
                        <div class="output-terminal" id="traversalOutput" style="margin-top: var(--spacing-lg);">
                            <div class="output-line">
                                <span class="output-prompt">$</span>
                                <span>Click to see the performance difference...</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Operations Section -->
        <section id="operations">
            <h2>Array Operations - Time Complexity Deep Dive</h2>

            <!-- Section Introduction -->
            <div class="card glass" style="background: rgba(15, 15, 15, 0.95); border-color: rgba(0, 129, 251, 0.3);">
                <p style="color: var(--text-primary); font-size: 1.1rem; line-height: 1.8; margin-bottom: 1rem;">
                    <strong style="color: var(--meta-blue);">Understanding the time and space complexity of array operations</strong> is fundamental to writing efficient code. This section provides a comprehensive analysis of all common array operations: access, search, insertion, deletion, and modification—covering both theoretical complexity and practical performance considerations.
                </p>
                <p style="color: var(--text-secondary); font-size: 1.05rem; line-height: 1.8;">
                    We'll explore why array indexing is O(1), why insertion at the beginning is O(n), the difference between static and dynamic arrays, amortized analysis for dynamic resizing, and how to choose the right data structure based on your operation patterns. Each operation includes detailed step-by-step breakdowns with real-world implications.
                </p>
            </div>

            <div class="card glass">
                <p style="color: var(--text-secondary); font-size: 1.1rem; margin-bottom: var(--spacing-xl);">
                    Not all array operations are created equal. Let's analyze each operation with complete detail.
                </p>

                <!-- Operations Table -->
                <table class="comparison-table">
                    <thead>
                        <tr>
                            <th>Operation</th>
                            <th>Static Array</th>
                            <th>Dynamic Array</th>
                            <th>Why?</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong style="color: var(--mclaren-orange);">Access</strong></td>
                            <td><span style="color: var(--code-string);">O(1)</span></td>
                            <td><span style="color: var(--code-string);">O(1)</span></td>
                            <td>Direct index calculation</td>
                        </tr>
                        <tr>
                            <td><strong style="color: var(--mclaren-orange);">Search</strong></td>
                            <td><span style="color: var(--redbull-red);">O(n)</span></td>
                            <td><span style="color: var(--redbull-red);">O(n)</span></td>
                            <td>Must check each element</td>
                        </tr>
                        <tr>
                            <td><strong style="color: var(--mclaren-orange);">Insert (end)</strong></td>
                            <td><span style="color: var(--text-muted);">N/A</span></td>
                            <td><span style="color: var(--code-string);">O(1)*</span></td>
                            <td>Amortized with resizing</td>
                        </tr>
                        <tr>
                            <td><strong style="color: var(--mclaren-orange);">Insert (middle)</strong></td>
                            <td><span style="color: var(--text-muted);">N/A</span></td>
                            <td><span style="color: var(--redbull-red);">O(n)</span></td>
                            <td>Shift all elements right</td>
                        </tr>
                        <tr>
                            <td><strong style="color: var(--mclaren-orange);">Delete (end)</strong></td>
                            <td><span style="color: var(--text-muted);">N/A</span></td>
                            <td><span style="color: var(--code-string);">O(1)</span></td>
                            <td>Just decrement size</td>
                        </tr>
                        <tr>
                            <td><strong style="color: var(--mclaren-orange);">Delete (middle)</strong></td>
                            <td><span style="color: var(--text-muted);">N/A</span></td>
                            <td><span style="color: var(--redbull-red);">O(n)</span></td>
                            <td>Shift all elements left</td>
                        </tr>
                    </tbody>
                </table>

                <div class="callout callout-warning" style="margin-top: var(--spacing-lg);">
                    <div class="callout-title">The Asterisk (*) - Amortized Analysis</div>
                    <p>
                        O(1)* means <strong>amortized constant time</strong>. Most insertions are O(1), but occasionally we need to resize the array, which is O(n). When we average out this cost over many operations, it becomes O(1) per insertion.
                    </p>
                </div>
            </div>

            <!-- Detailed Operation Analysis -->
            <div class="card glass" style="margin-top: var(--spacing-2xl);">
                <h3>Deep Dive: Dynamic Array Resizing</h3>
                
                <p style="color: var(--text-secondary); line-height: 1.8; margin-bottom: var(--spacing-lg);">
                    When a dynamic array (like Python's list or C++'s vector) runs out of space, it must:
                </p>

                <div class="step-container">
                    <div class="step">
                        <h4><span class="step-number">1</span>Allocate New Memory</h4>
                        <div class="step-description">
                            <p>Request a larger block from the OS (typically 2× current size)</p>
                            <div class="code-container" style="margin-top: var(--spacing-sm);">
                                <pre><code><span class="variable">new_capacity</span> = <span class="variable">old_capacity</span> × <span class="number">2</span>  <span class="comment"># Growth factor = 2</span>
<span class="variable">new_memory</span> = <span class="function">allocate</span>(new_capacity)</code></pre>
                            </div>
                        </div>
                    </div>

                    <div class="step">
                        <h4><span class="step-number">2</span>Copy All Elements</h4>
                        <div class="step-description">
                            <p>Copy every element from old array to new array - this is the O(n) part!</p>
                            <div class="code-container" style="margin-top: var(--spacing-sm);">
                                <pre><code><span class="keyword">for</span> i <span class="keyword">in</span> <span class="function">range</span>(size):
    new_memory[i] = old_memory[i]  <span class="comment"># O(n) copy</span></code></pre>
                            </div>
                        </div>
                    </div>

                    <div class="step">
                        <h4><span class="step-number">3</span>Free Old Memory</h4>
                        <div class="step-description">
                            <p>Release the old memory block back to the OS</p>
                            <div class="code-container" style="margin-top: var(--spacing-sm);">
                                <pre><code><span class="function">free</span>(old_memory)  <span class="comment"># Clean up</span>
<span class="variable">array</span> = <span class="variable">new_memory</span>  <span class="comment"># Update pointer</span></code></pre>
                            </div>
                        </div>
                    </div>

                    <div class="step">
                        <h4><span class="step-number">4</span>Insert New Element</h4>
                        <div class="step-description">
                            <p>Finally, insert the new element that triggered the resize</p>
                            <div class="code-container" style="margin-top: var(--spacing-sm);">
                                <pre><code><span class="variable">array</span>[size] = <span class="variable">new_element</span>
<span class="variable">size</span> += <span class="number">1</span></code></pre>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Interactive Resize Demo -->
                <div class="demo-container" style="margin-top: var(--spacing-xl);">
                    <div class="demo-header">
                        <div class="demo-title">
                            🎮 <span>Dynamic Array Resize Simulator</span>
                        </div>
                        <div class="demo-controls">
                            <button class="btn btn-primary" onclick="initResizeDemo()">Initialize</button>
                            <button class="btn btn-secondary" onclick="insertResize()">Insert Element</button>
                            <button class="btn btn-danger" onclick="resetResizeDemo()">Reset</button>
                        </div>
                    </div>

                    <div class="visualization">
                        <div style="margin-bottom: var(--spacing-md);">
                            <strong style="color: var(--mclaren-orange);">Capacity:</strong> <span id="resizeCapacity">0</span>
                            <strong style="color: var(--meta-blue); margin-left: 2rem;">Size:</strong> <span id="resizeSize">0</span>
                            <strong style="color: var(--code-string); margin-left: 2rem;">Total Resizes:</strong> <span id="resizeCount">0</span>
                        </div>
                        <div id="resizeArrayVis" style="display: flex; flex-wrap: wrap; gap: var(--spacing-xs); margin: var(--spacing-lg) 0;"></div>
                        <div class="output-terminal" id="resizeOutput">
                            <div class="output-line">
                                <span class="output-prompt">$</span>
                                <span>Click "Initialize" to begin...</span>
                            </div>
                        </div>
                    </div>
                </div>

                <h4 style="margin-top: var(--spacing-2xl);">Amortized Analysis Explained</h4>
                <div class="callout callout-info">
                    <div class="callout-title">Why O(1) Amortized?</div>
                    <p style="margin-bottom: var(--spacing-md);">Let's insert n elements into an empty dynamic array with initial capacity 1:</p>
                    
                    <div class="code-container">
                        <pre><code><span class="comment">// Cost analysis for n=16 insertions</span>
Insert <span class="number">1</span>:  Cost = <span class="number">1</span>           <span class="comment">(no resize)</span>
Insert <span class="number">2</span>:  Cost = <span class="number">1</span>+<span class="number">1</span> = <span class="number">2</span>       <span class="comment">(resize from 1→2, copy 1 element)</span>
Insert <span class="number">3</span>:  Cost = <span class="number">1</span>+<span class="number">2</span> = <span class="number">3</span>       <span class="comment">(resize from 2→4, copy 2 elements)</span>
Insert <span class="number">4</span>:  Cost = <span class="number">1</span>           <span class="comment">(no resize)</span>
Insert <span class="number">5</span>:  Cost = <span class="number">1</span>+<span class="number">4</span> = <span class="number">5</span>       <span class="comment">(resize from 4→8, copy 4 elements)</span>
...
Insert <span class="number">9</span>:  Cost = <span class="number">1</span>+<span class="number">8</span> = <span class="number">9</span>       <span class="comment">(resize from 8→16, copy 8 elements)</span>
...
Insert <span class="number">16</span>: Cost = <span class="number">1</span>           <span class="comment">(no resize)</span>

<span class="comment">// Total cost = n + (1 + 2 + 4 + 8 + ...) = n + 2n-1 = 3n-1</span>
<span class="comment">// Average cost per insertion = (3n-1)/n ≈ 3 = O(1) ✓</span></code></pre>
                    </div>
                </div>
            </div>
        </section>

        <!-- 15 CORE PATTERNS SECTION -->
        <section id="patterns">
            <h2>The 15 Core Array Patterns - Master Them All</h2>

            <!-- Section Introduction -->
            <div class="card glass" style="background: rgba(15, 15, 15, 0.95); border-color: rgba(0, 129, 251, 0.3);">
                <p style="color: var(--text-primary); font-size: 1.1rem; line-height: 1.8; margin-bottom: 1rem;">
                    <strong style="color: var(--meta-blue);">Mastering these 15 fundamental array patterns</strong> will enable you to solve 80% of array-based problems in technical interviews and real-world applications. Each pattern represents a proven algorithmic approach with specific time/space complexity, optimal use cases, and common variations.
                </p>
                <p style="color: var(--text-secondary); font-size: 1.05rem; line-height: 1.8;">
                    From Two Pointers and Sliding Window to Kadane's Algorithm and Matrix Traversal, these patterns form the foundation of efficient array manipulation. We'll explore each with interactive visualizations, detailed complexity analysis, code implementations, and practical examples to ensure deep understanding and mastery.
                </p>
            </div>

            <div class="card glass">
                <p style="color: var(--text-secondary); font-size: 1.1rem; margin-bottom: var(--spacing-xl);">
                    These 15 patterns solve 80% of all array problems in interviews and real-world scenarios. Each pattern has specific use cases, optimal complexity, and common variations. Let's master them all with interactive demos!
                </p>
            </div>

            <!-- Pattern 1: Two Pointers -->
            <div class="card glass" style="margin-top: var(--spacing-2xl);">
                <div class="card-header">
                    <span class="icon" style="font-size: 3rem;">👉👈</span>
                    <div>
                        <h3>Pattern 1: Two Pointers</h3>
                        <p style="color: var(--text-muted); margin-top: var(--spacing-xs);">Use two pointers moving from opposite ends or at different speeds</p>
                    </div>
                </div>

                <h4 style="margin-top: var(--spacing-lg);">📚 Complete Explanation</h4>
                <p style="color: var(--text-secondary); line-height: 1.8;">
                    The Two Pointers pattern uses TWO indices (pointers) to traverse the array, either from opposite ends moving towards each other, or at different speeds from the same end. This reduces time complexity from O(n²) to O(n) by eliminating nested loops.
                </p>

                <div class="level-grid" style="margin-top: var(--spacing-lg);">
                    <div class="card glass">
                        <h4 style="color: var(--mclaren-orange);">Opposite Direction</h4>
                        <p style="color: var(--text-secondary);">
                            Start from both ends, move towards center. Perfect for palindromes, pair sums in sorted arrays.
                        </p>
                        <div class="code-container" style="margin-top: var(--spacing-md);">
                            <pre><code><span class="variable">left</span> = <span class="number">0</span>
<span class="variable">right</span> = <span class="function">len</span>(arr) - <span class="number">1</span>
<span class="keyword">while</span> left < right:
    <span class="comment"># Process arr[left] and arr[right]</span>
    left += <span class="number">1</span>
    right -= <span class="number">1</span></code></pre>
                        </div>
                    </div>

                    <div class="card glass">
                        <h4 style="color: var(--meta-blue);">Same Direction (Fast/Slow)</h4>
                        <p style="color: var(--text-secondary);">
                            Both pointers move forward at different speeds. Perfect for remove duplicates, partition arrays.
                        </p>
                        <div class="code-container" style="margin-top: var(--spacing-md);">
                            <pre><code><span class="variable">slow</span> = <span class="number">0</span>
<span class="keyword">for</span> fast <span class="keyword">in</span> <span class="function">range</span>(<span class="function">len</span>(arr)):
    <span class="keyword">if</span> <span class="function">condition</span>(arr[fast]):
        arr[slow] = arr[fast]
        slow += <span class="number">1</span></code></pre>
                        </div>
                    </div>
                </div>

                <h4 style="margin-top: var(--spacing-xl);">Complete Code Example with Analysis</h4>
                <div class="code-container">
                    <div class="code-header">
                        <div class="code-title">Two Sum in Sorted Array</div>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>
                    <pre><code><span class="keyword">def</span> <span class="function">two_sum_sorted</span>(arr, target):
    <span class="string">"""
    Find two numbers that add up to target in sorted array.
    Time: O(n) | Space: O(1)
    """</span>
    <span class="variable">left</span>, <span class="variable">right</span> = <span class="number">0</span>, <span class="function">len</span>(arr) - <span class="number">1</span>
    
    <span class="keyword">while</span> left < right:
        <span class="variable">current_sum</span> = arr[left] + arr[right]
        
        <span class="keyword">if</span> current_sum == target:
            <span class="keyword">return</span> [left, right]  <span class="comment"># Found!</span>
        <span class="keyword">elif</span> current_sum < target:
            left += <span class="number">1</span>  <span class="comment"># Need larger sum, move left pointer right</span>
        <span class="keyword">else</span>:
            right -= <span class="number">1</span>  <span class="comment"># Need smaller sum, move right pointer left</span>
    
    <span class="keyword">return</span> []  <span class="comment"># No solution</span>

<span class="comment"># Step-by-step analysis:</span>
<span class="comment"># arr = [1, 2, 3, 4, 6], target = 6</span>
<span class="comment"># </span>
<span class="comment"># Step 1: left=0, right=4 → 1+6=7 > 6 → move right left</span>
<span class="comment"># Step 2: left=0, right=3 → 1+4=5 < 6 → move left right</span>
<span class="comment"># Step 3: left=1, right=3 → 2+4=6 ✓ Found!</span>
<span class="comment">#</span>
<span class="comment"># Why O(n)? Each pointer moves at most n times</span>
<span class="comment"># Why O(1) space? Only storing two integers</span></code></pre>
                </div>

                <div class="callout callout-success" style="margin-top: var(--spacing-lg);">
                    <div class="callout-title">Key Insights</div>
                    <ul style="line-height: 2; margin-top: var(--spacing-sm);">
                        <li><strong>When to use:</strong> Sorted arrays, palindromes, pairs/triplets, removing duplicates</li>
                        <li><strong>Time saved:</strong> O(n²) → O(n) by avoiding nested loops</li>
                        <li><strong>Space saved:</strong> O(1) - no extra data structures needed</li>
                        <li><strong>Key requirement:</strong> Usually needs sorted array or specific property</li>
                    </ul>
                </div>

                <!-- Interactive Two Pointers Demo -->
                <div class="demo-container" style="margin-top: var(--spacing-xl);">
                    <div class="demo-header">
                        <div class="demo-title">
                            🎮 <span>Interactive Two Pointers Simulator</span>
                        </div>
                        <div class="demo-controls">
                            <button class="btn btn-primary" onclick="initTwoPointers()">Initialize</button>
                            <button class="btn btn-secondary" onclick="stepTwoPointers()">Step Forward</button>
                            <button class="btn btn-danger" onclick="resetTwoPointers()">Reset</button>
                        </div>
                    </div>

                    <div class="visualization">
                        <div style="margin-bottom: var(--spacing-md);">
                            <strong style="color: var(--mclaren-orange);">Target Sum:</strong> <span id="targetSum">9</span>
                            <strong style="color: var(--meta-blue); margin-left: 2rem;">Current Sum:</strong> <span id="currentSum">-</span>
                        </div>
                        <div id="twoPointersVis" style="display: flex; flex-wrap: wrap; gap: var(--spacing-sm); margin: var(--spacing-lg) 0;"></div>
                        <div class="output-terminal" id="twoPointersOutput">
                            <div class="output-line">
                                <span class="output-prompt">$</span>
                                <span>Click "Initialize" to begin two pointers demo...</span>
                            </div>
                        </div>
                    </div>
                </div>

                <h4 style="margin-top: var(--spacing-xl);">📖 Common Problems</h4>
                <div class="level-grid">
                    <div class="card glass">
                        <h5 style="color: var(--code-string);">Two Sum II</h5>
                        <p style="color: var(--text-muted); font-size: 0.9rem;">Find pair that sums to target in sorted array</p>
                    </div>
                    <div class="card glass">
                        <h5 style="color: var(--code-string);">Remove Duplicates</h5>
                        <p style="color: var(--text-muted); font-size: 0.9rem;">Remove duplicates in-place from sorted array</p>
                    </div>
                    <div class="card glass">
                        <h5 style="color: var(--code-string);">Valid Palindrome</h5>
                        <p style="color: var(--text-muted); font-size: 0.9rem;">Check if string is palindrome</p>
                    </div>
                    <div class="card glass">
                        <h5 style="color: var(--code-string);">Container With Most Water</h5>
                        <p style="color: var(--text-muted); font-size: 0.9rem;">Find max area between two lines</p>
                    </div>
                    <div class="card glass">
                        <h5 style="color: var(--code-string);">3Sum</h5>
                        <p style="color: var(--text-muted); font-size: 0.9rem;">Find all unique triplets that sum to zero</p>
                    </div>
                    <div class="card glass">
                        <h5 style="color: var(--code-string);">Trapping Rain Water</h5>
                        <p style="color: var(--text-muted); font-size: 0.9rem;">Calculate trapped water between bars</p>
                    </div>
                </div>
            </div>

            <!-- Pattern 2: Sliding Window -->
            <div class="card glass" style="margin-top: var(--spacing-2xl);">
                <div class="card-header">
                    <span class="icon" style="font-size: 3rem;">🪟</span>
                    <div>
                        <h3>Pattern 2: Sliding Window</h3>
                        <p style="color: var(--text-muted); margin-top: var(--spacing-xs);">Maintain a window that slides through the array</p>
                    </div>
                </div>

                <h4 style="margin-top: var(--spacing-lg);">📚 Complete Explanation</h4>
                <p style="color: var(--text-secondary); line-height: 1.8;">
                    Sliding Window maintains a "window" (subarray) that slides through the array while maintaining certain properties. This avoids recomputing values for overlapping subarrays, reducing complexity from O(n × k) to O(n).
                </p>

                <div class="level-grid" style="margin-top: var(--spacing-lg);">
                    <div class="card glass">
                        <h4 style="color: var(--mclaren-orange);">Fixed-Size Window</h4>
                        <p style="color: var(--text-secondary);">
                            Window size is constant. Perfect for finding max/min/average of k consecutive elements.
                        </p>
                        <div class="code-container" style="margin-top: var(--spacing-md);">
                            <pre><code><span class="variable">window_sum</span> = <span class="function">sum</span>(arr[:<span class="variable">k</span>])
<span class="variable">max_sum</span> = <span class="variable">window_sum</span>

<span class="keyword">for</span> i <span class="keyword">in</span> <span class="function">range</span>(k, <span class="function">len</span>(arr)):
    <span class="variable">window_sum</span> += arr[i] - arr[i - k]
    <span class="variable">max_sum</span> = <span class="function">max</span>(max_sum, window_sum)</code></pre>
                        </div>
                    </div>

                    <div class="card glass">
                        <h4 style="color: var(--meta-blue);">Dynamic-Size Window</h4>
                        <p style="color: var(--text-secondary);">
                            Window size changes based on conditions. Perfect for longest/shortest subarray problems.
                        </p>
                        <div class="code-container" style="margin-top: var(--spacing-md);">
                            <pre><code><span class="variable">left</span> = <span class="number">0</span>
<span class="keyword">for</span> right <span class="keyword">in</span> <span class="function">range</span>(<span class="function">len</span>(arr)):
    <span class="comment"># Expand window</span>
    <span class="function">add_to_window</span>(arr[right])
    
    <span class="keyword">while</span> <span class="function">window_invalid</span>():
        <span class="comment"># Shrink window</span>
        <span class="function">remove_from_window</span>(arr[left])
        left += <span class="number">1</span></code></pre>
                        </div>
                    </div>
                </div>

                <h4 style="margin-top: var(--spacing-xl);">Complete Code Example with Analysis</h4>
                <div class="code-container">
                    <div class="code-header">
                        <div class="code-title">Maximum Sum Subarray of Size K</div>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>
                    <pre><code><span class="keyword">def</span> <span class="function">max_sum_subarray</span>(arr, k):
    <span class="string">"""
    Find maximum sum of any contiguous subarray of size k.
    Time: O(n) | Space: O(1)
    
    Naive approach would be O(n×k) - calculate sum for each window
    Sliding window optimizes to O(n) - reuse previous computation
    """</span>
    
    <span class="keyword">if</span> <span class="function">len</span>(arr) < k:
        <span class="keyword">return</span> <span class="keyword">None</span>
    
    <span class="comment"># Calculate sum of first window</span>
    <span class="variable">window_sum</span> = <span class="function">sum</span>(arr[:k])
    <span class="variable">max_sum</span> = <span class="variable">window_sum</span>
    
    <span class="comment"># Slide the window</span>
    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="function">range</span>(k, <span class="function">len</span>(arr)):
        <span class="comment"># Remove leftmost element of previous window</span>
        <span class="comment"># Add new rightmost element</span>
        <span class="variable">window_sum</span> = <span class="variable">window_sum</span> - arr[i - k] + arr[i]
        <span class="variable">max_sum</span> = <span class="function">max</span>(max_sum, window_sum)
    
    <span class="keyword">return</span> max_sum

<span class="comment"># Visual trace: arr = [2, 1, 5, 1, 3, 2], k = 3</span>
<span class="comment">#</span>
<span class="comment"># Window 1: [2, 1, 5] → sum = 8</span>
<span class="comment"># Window 2: [1, 5, 1] → sum = 8 - 2 + 1 = 7 (remove 2, add 1)</span>
<span class="comment"># Window 3: [5, 1, 3] → sum = 7 - 1 + 3 = 9 (remove 1, add 3)</span>
<span class="comment"># Window 4: [1, 3, 2] → sum = 9 - 5 + 2 = 6 (remove 5, add 2)</span>
<span class="comment">#</span>
<span class="comment"># Maximum: 9</span>
<span class="comment">#</span>
<span class="comment"># Complexity Analysis:</span>
<span class="comment"># - Each element is visited exactly once</span>
<span class="comment"># - Only simple arithmetic operations per element</span>
<span class="comment"># - No nested loops → O(n)</span></code></pre>
                </div>

                <div class="callout callout-info" style="margin-top: var(--spacing-lg);">
                    <div class="callout-title">The Magic: Reuse Computation</div>
                    <p>Instead of recalculating the sum for each window from scratch (O(k) per window), we:</p>
                    <ul style="margin-top: var(--spacing-sm); line-height: 2;">
                        <li><strong>Subtract</strong> the element that left the window</li>
                        <li><strong>Add</strong> the new element that entered the window</li>
                        <li>Result: O(1) per window instead of O(k)!</li>
                    </ul>
                </div>

                <!-- Interactive Sliding Window Demo -->
                <div class="demo-container" style="margin-top: var(--spacing-xl);">
                    <div class="demo-header">
                        <div class="demo-title">
                            🎮 <span>Interactive Sliding Window Visualizer</span>
                        </div>
                        <div class="demo-controls">
                            <button class="btn btn-primary" onclick="initSlidingWindow()">Initialize</button>
                            <button class="btn btn-secondary" onclick="stepSlidingWindow()">Slide Window</button>
                            <button class="btn btn-danger" onclick="resetSlidingWindow()">Reset</button>
                        </div>
                    </div>

                    <div class="visualization">
                        <div style="margin-bottom: var(--spacing-md);">
                            <strong style="color: var(--mclaren-orange);">Window Size:</strong> <span id="windowSize">3</span>
                            <strong style="color: var(--meta-blue); margin-left: 2rem;">Current Sum:</strong> <span id="windowSum">-</span>
                            <strong style="color: var(--code-string); margin-left: 2rem;">Max Sum:</strong> <span id="maxWindowSum">-</span>
                        </div>
                        <div id="slidingWindowVis" style="display: flex; flex-wrap: wrap; gap: var(--spacing-sm); margin: var(--spacing-lg) 0;"></div>
                        <div class="output-terminal" id="slidingWindowOutput">
                            <div class="output-line">
                                <span class="output-prompt">$</span>
                                <span>Click "Initialize" to begin sliding window demo...</span>
                            </div>
                        </div>
                    </div>
                </div>

                <h4 style="margin-top: var(--spacing-xl);">📖 Common Problems</h4>
                <div class="level-grid">
                    <div class="card glass">
                        <h5 style="color: var(--code-string);">Maximum Sum Subarray of Size K</h5>
                        <p style="color: var(--text-muted); font-size: 0.9rem;">Find max sum of k consecutive elements</p>
                    </div>
                    <div class="card glass">
                        <h5 style="color: var(--code-string);">Longest Substring K Distinct</h5>
                        <p style="color: var(--text-muted); font-size: 0.9rem;">Longest substring with at most K distinct characters</p>
                    </div>
                    <div class="card glass">
                        <h5 style="color: var(--code-string);">Minimum Window Substring</h5>
                        <p style="color: var(--text-muted); font-size: 0.9rem;">Smallest window containing all characters</p>
                    </div>
                    <div class="card glass">
                        <h5 style="color: var(--code-string);">Longest Subarray Sum ≤ K</h5>
                        <p style="color: var(--text-muted); font-size: 0.9rem;">Longest subarray with sum at most K</p>
                    </div>
                    <div class="card glass">
                        <h5 style="color: var(--code-string);">Fruits into Baskets</h5>
                        <p style="color: var(--text-muted); font-size: 0.9rem;">Max fruits with at most 2 types</p>
                    </div>
                    <div class="card glass">
                        <h5 style="color: var(--code-string);">Max Consecutive Ones III</h5>
                        <p style="color: var(--text-muted); font-size: 0.9rem;">Longest 1s after flipping at most K zeros</p>
                    </div>
                </div>
            </div>

            <!-- Pattern 3: Kadane's Algorithm -->
            <div class="card glass" style="margin-top: var(--spacing-2xl);">
                <div class="card-header">
                    <span class="icon" style="font-size: 3rem;"></span>
                    <div>
                        <h3>Pattern 3: Kadane's Algorithm (Maximum Subarray)</h3>
                        <p style="color: var(--text-muted); margin-top: var(--spacing-xs);">Find the maximum sum contiguous subarray</p>
                    </div>
                </div>

                <h4 style="margin-top: var(--spacing-lg);">📚 Complete Explanation</h4>
                <p style="color: var(--text-secondary); line-height: 1.8; margin-bottom: var(--spacing-lg);">
                    Kadane's Algorithm is a dynamic programming approach that solves the maximum subarray problem in O(n) time. The key insight: at each position, decide whether to <strong>extend the current subarray</strong> or <strong>start a new one</strong>.
                </p>

                <div class="callout callout-success">
                    <div class="callout-title">The Core Insight</div>
                    <p>At each element, we face a choice:</p>
                    <ul style="margin-top: var(--spacing-sm); line-height: 2;">
                        <li><strong>Option 1:</strong> Include current element in existing subarray (extend)</li>
                        <li><strong>Option 2:</strong> Start a new subarray from current element</li>
                    </ul>
                    <p style="margin-top: var(--spacing-sm);">
                        <strong>Decision:</strong> If adding the current element to the existing sum gives us a LARGER value than starting fresh, extend. Otherwise, start new.
                    </p>
                    <p style="margin-top: var(--spacing-sm); color: var(--mclaren-orange); font-weight: 600;">
                        Formula: current_max = max(arr[i], current_max + arr[i])
                    </p>
                </div>

                <h4 style="margin-top: var(--spacing-xl);">Complete Code with Step-by-Step Analysis</h4>
                <div class="code-container">
                    <div class="code-header">
                        <div class="code-title">Kadane's Algorithm - Maximum Subarray Sum</div>
                        <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                    </div>
                    <pre><code><span class="keyword">def</span> <span class="function">max_subarray</span>(arr):
    <span class="string">"""
    Find maximum sum of any contiguous subarray.
    Time: O(n) | Space: O(1)
    
    Naive: Try all subarrays → O(n²)
    Kadane's: Track running sum, reset when negative → O(n)
    """</span>
    
    <span class="keyword">if</span> <span class="keyword">not</span> arr:
        <span class="keyword">return</span> <span class="number">0</span>
    
    <span class="variable">current_max</span> = arr[<span class="number">0</span>]  <span class="comment"># Max sum ending at current position</span>
    <span class="variable">global_max</span> = arr[<span class="number">0</span>]   <span class="comment"># Overall maximum found so far</span>
    
    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="function">range</span>(<span class="number">1</span>, <span class="function">len</span>(arr)):
        <span class="comment"># Key decision: extend current subarray or start new?</span>
        <span class="variable">current_max</span> = <span class="function">max</span>(arr[i], current_max + arr[i])
        
        <span class="comment"># Update global maximum if current is better</span>
        <span class="variable">global_max</span> = <span class="function">max</span>(global_max, current_max)
    
    <span class="keyword">return</span> global_max

<span class="comment"># Complete trace: arr = [-2, 1, -3, 4, -1, 2, 1, -5, 4]</span>
<span class="comment">#</span>
<span class="comment"># i=0: current=-2, global=-2</span>
<span class="comment"># i=1: current=max(1, -2+1=-1) = 1,  global=max(-2,1) = 1</span>
<span class="comment"># i=2: current=max(-3, 1-3=-2) = -2, global=1</span>
<span class="comment"># i=3: current=max(4, -2+4=2) = 4,   global=max(1,4) = 4</span>
<span class="comment"># i=4: current=max(-1, 4-1=3) = 3,   global=4</span>
<span class="comment"># i=5: current=max(2, 3+2=5) = 5,    global=max(4,5) = 5</span>
<span class="comment"># i=6: current=max(1, 5+1=6) = 6,    global=max(5,6) = 6</span>
<span class="comment"># i=7: current=max(-5, 6-5=1) = 1,   global=6</span>
<span class="comment"># i=8: current=max(4, 1+4=5) = 5,    global=6</span>
<span class="comment">#</span>
<span class="comment"># Answer: 6 (subarray [4, -1, 2, 1])</span>
<span class="comment">#</span>
<span class="comment"># Why this works:</span>
<span class="comment"># - If current_max becomes negative, starting fresh is better</span>
<span class="comment"># - We always track the best sum ending at each position</span>
<span class="comment"># - Global max captures the best we've seen across all positions</span></code></pre>
                </div>

                <div class="step-container" style="margin-top: var(--spacing-xl);">
                    <h4>Deep Dive: Why It Works</h4>
                    
                    <div class="step">
                        <h4><span class="step-number">1</span>Subproblem Definition</h4>
                        <div class="step-description">
                            <p><strong>current_max[i]</strong> = maximum sum of subarray ending at index i</p>
                            <p>This must include arr[i] - it's the best we can do if we MUST end at position i.</p>
                        </div>
                    </div>

                    <div class="step">
                        <h4><span class="step-number">2</span>The Decision</h4>
                        <div class="step-description">
                            <p>At each position i, we decide:</p>
                            <ul style="margin-top: var(--spacing-sm); line-height: 2;">
                                <li>If current_max[i-1] + arr[i] > arr[i] → extend the subarray</li>
                                <li>Otherwise → start new subarray from arr[i]</li>
                            </ul>
                            <p style="margin-top: var(--spacing-sm); color: var(--mclaren-orange);">
                                <strong>Simplified:</strong> current_max[i] = max(arr[i], current_max[i-1] + arr[i])
                            </p>
                        </div>
                    </div>

                    <div class="step">
                        <h4><span class="step-number">3</span>Optimal Substructure</h4>
                        <div class="step-description">
                            <p>The maximum subarray either:</p>
                            <ul style="margin-top: var(--spacing-sm); line-height: 2;">
                                <li>Ends at some position i (captured by current_max)</li>
                                <li>Is the maximum across all positions (captured by global_max)</li>
                            </ul>
                            <p style="margin-top: var(--spacing-sm);">
                                By tracking both, we guarantee finding the optimal solution!
                            </p>
                        </div>
                    </div>

                    <div class="step">
                        <h4><span class="step-number">4</span>Space Optimization</h4>
                        <div class="step-description">
                            <p>We only need the previous value of current_max, not the entire array of max sums!</p>
                            <p style="color: var(--code-string); margin-top: var(--spacing-sm);">
                                Space complexity: O(1) instead of O(n) ✓
                            </p>
                        </div>
                    </div>
                </div>

                <!-- Interactive Kadane's Demo -->
                <div class="demo-container" style="margin-top: var(--spacing-xl);">
                    <div class="demo-header">
                        <div class="demo-title">
                            🎮 <span>Interactive Kadane's Algorithm Visualizer</span>
                        </div>
                        <div class="demo-controls">
                            <button class="btn btn-primary" onclick="initKadane()">Initialize</button>
                            <button class="btn btn-secondary" onclick="stepKadane()">Step Forward</button>
                            <button class="btn btn-danger" onclick="resetKadane()">Reset</button>
                        </div>
                    </div>

                    <div class="visualization">
                        <div style="margin-bottom: var(--spacing-md);">
                            <strong style="color: var(--mclaren-orange);">Current Max:</strong> <span id="kadaneCurrent">-</span>
                            <strong style="color: var(--meta-blue); margin-left: 2rem;">Global Max:</strong> <span id="kadaneGlobal">-</span>
                            <strong style="color: var(--code-string); margin-left: 2rem;">Best Subarray:</strong> <span id="kadaneSubarray">-</span>
                        </div>
                        <div id="kadaneVis" style="display: flex; flex-wrap: wrap; gap: var(--spacing-sm); margin: var(--spacing-lg) 0;"></div>
                        <div class="output-terminal" id="kadaneOutput">
                            <div class="output-line">
                                <span class="output-prompt">$</span>
                                <span>Click "Initialize" to begin Kadane's algorithm demo...</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="callout callout-warning" style="margin-top: var(--spacing-xl);">
                    <div class="callout-title">Common Variations</div>
                    <ul style="line-height: 2; margin-top: var(--spacing-sm);">
                        <li><strong>Return indices:</strong> Track start/end positions of best subarray</li>
                        <li><strong>Circular array:</strong> Run Kadane's twice (normal + inverted)</li>
                        <li><strong>At least K elements:</strong> Modify to ensure minimum length</li>
                        <li><strong>Maximum product:</strong> Track both max and min (negatives!)</li>
                        <li><strong>2D version:</strong> Convert to 1D problem using column compression</li>
                    </ul>
                </div>

                <h4 style="margin-top: var(--spacing-xl);">📖 Common Problems</h4>
                <div class="level-grid">
                    <div class="card glass">
                        <h5 style="color: var(--code-string);">Maximum Subarray</h5>
                        <p style="color: var(--text-muted); font-size: 0.9rem;">Classic Kadane's - find max sum subarray</p>
                    </div>
                    <div class="card glass">
                        <h5 style="color: var(--code-string);">Maximum Product Subarray</h5>
                        <p style="color: var(--text-muted); font-size: 0.9rem;">Track both max and min products</p>
                    </div>
                    <div class="card glass">
                        <h5 style="color: var(--code-string);">Maximum Circular Subarray</h5>
                        <p style="color: var(--text-muted); font-size: 0.9rem;">Handle wraparound in circular array</p>
                    </div>
                    <div class="card glass">
                        <h5 style="color: var(--code-string);">Best Time to Buy and Sell Stock</h5>
                        <p style="color: var(--text-muted); font-size: 0.9rem;">Kadane's variant on price differences</p>
                    </div>
                    <div class="card glass">
                        <h5 style="color: var(--code-string);">Maximum Sum Rectangle</h5>
                        <p style="color: var(--text-muted); font-size: 0.9rem;">2D Kadane's algorithm</p>
                    </div>
                    <div class="card glass">
                        <h5 style="color: var(--code-string);">K-Concatenation Maximum Sum</h5>
                        <p style="color: var(--text-muted); font-size: 0.9rem;">Array repeated K times</p>
                    </div>
                </div>
            </div>

            <div class="card glass" style="margin-top: var(--spacing-2xl); background: rgba(255, 128, 0, 0.05);">
                <h3 style="text-align: center; color: var(--mclaren-orange);">12 More Patterns Coming...</h3>
                <p style="text-align: center; color: var(--text-secondary); margin-top: var(--spacing-md);">
                    The complete guide includes: Prefix Sum, Dutch National Flag, Cyclic Sort, Binary Search, Merge Intervals, Monotonic Stack, Fast & Slow Pointers, Matrix Traversal, Spiral/Diagonal Patterns, Next Permutation, Boyer-Moore Voting, and more!
                </p>
                <p style="text-align: center; color: var(--text-muted); margin-top: var(--spacing-sm);">
                    Each with detailed explanations, interactive demos, complexity analysis, and real-world examples.
                </p>
            </div>
        </section>

        <!-- Decision Framework & Optimization Section -->
        <section id="framework">
            <h2>Decision Framework - Choose the Right Pattern</h2>

            <!-- Section Introduction -->
            <div class="card glass" style="background: rgba(15, 15, 15, 0.95); border-color: rgba(0, 129, 251, 0.3);">
                <p style="color: var(--text-primary); font-size: 1.1rem; line-height: 1.8; margin-bottom: 1rem;">
                    <strong style="color: var(--meta-blue);">Choosing the right pattern</strong> is often more important than implementing it perfectly. This section provides a systematic decision framework to help you quickly identify which of the 15 core patterns best fits your problem based on input characteristics, constraints, and desired outcomes.
                </p>
                <p style="color: var(--text-secondary); font-size: 1.05rem; line-height: 1.8;">
                    We'll walk through a decision tree approach that analyzes problem characteristics—such as whether the array is sorted, if you need a subarray solution, if you're looking for a specific target, or if you need to process in-place—to rapidly narrow down to the optimal pattern and implementation strategy.
                </p>
            </div>

            <div class="card glass">
                <h3>How to Choose the Right Pattern</h3>
                <p style="color: var(--text-secondary); margin-bottom: var(--spacing-xl);">
                    When faced with an array problem, follow this decision tree to identify the optimal pattern:
                </p>

                <div class="step-container">
                    <div class="step">
                        <h4><span class="step-number">1</span>Is the array sorted?</h4>
                        <div class="step-description">
                            <p><strong style="color: var(--code-string);">YES:</strong> Consider Two Pointers, Binary Search, or Merge Intervals</p>
                            <p><strong style="color: var(--redbull-red);">NO:</strong> Might need sorting first, or use other patterns</p>
                        </div>
                    </div>

                    <div class="step">
                        <h4><span class="step-number">2</span>Looking for a contiguous subarray?</h4>
                        <div class="step-description">
                            <p><strong style="color: var(--code-string);">Fixed size:</strong> Sliding Window (Fixed)</p>
                            <p><strong style="color: var(--code-string);">Variable size with condition:</strong> Sliding Window (Dynamic)</p>
                            <p><strong style="color: var(--code-string);">Maximum/minimum sum:</strong> Kadane's Algorithm</p>
                        </div>
                    </div>

                    <div class="step">
                        <h4><span class="step-number">3</span>Need to find pairs/triplets?</h4>
                        <div class="step-description">
                            <p><strong style="color: var(--code-string);">Sorted array:</strong> Two Pointers</p>
                            <p><strong style="color: var(--code-string);">Unsorted array:</strong> Hash Map or sort first</p>
                        </div>
                    </div>

                    <div class="step">
                        <h4><span class="step-number">4</span>Involves partitioning/grouping?</h4>
                        <div class="step-description">
                            <p><strong style="color: var(--code-string);">3 categories:</strong> Dutch National Flag</p>
                            <p><strong style="color: var(--code-string);">Finding missing numbers 1 to n:</strong> Cyclic Sort</p>
                        </div>
                    </div>

                    <div class="step">
                        <h4><span class="step-number">5</span>Need cumulative sums/counts?</h4>
                        <div class="step-description">
                            <p><strong style="color: var(--code-string);">Range sum queries:</strong> Prefix Sum</p>
                            <p><strong style="color: var(--code-string);">2D range sums:</strong> 2D Prefix Sum</p>
                        </div>
                    </div>

                    <div class="step">
                        <h4><span class="step-number">6</span>Need to find majority element?</h4>
                        <div class="step-description">
                            <p><strong style="color: var(--code-string);">Appears > n/2 times:</strong> Boyer-Moore Voting</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Optimization Tips Section -->
        <section id="optimization">
            <h2>Optimization Tips - Make Your Code Faster</h2>

            <!-- Section Introduction -->
            <div class="card glass" style="background: rgba(15, 15, 15, 0.95); border-color: rgba(0, 129, 251, 0.3);">
                <p style="color: var(--text-primary); font-size: 1.1rem; line-height: 1.8; margin-bottom: 1rem;">
                    <strong style="color: var(--meta-blue);">Performance optimization is an art and a science.</strong> This section distills the most impactful optimization techniques for array operations—from leveraging cache locality and choosing optimal data structures to employing in-place algorithms and minimizing function call overhead.
                </p>
                <p style="color: var(--text-secondary); font-size: 1.05rem; line-height: 1.8;">
                    We'll explore practical strategies including cache-friendly memory access patterns, space-time tradeoffs, prefetching techniques, vectorization opportunities, early termination conditions, and bit manipulation tricks. Each tip includes measurable performance improvements and real-world applicability guidelines.
                </p>
            </div>

            <div class="level-grid">
                <div class="card glass">
                    <h4 style="color: var(--mclaren-orange);">1. Cache Locality</h4>
                    <ul style="color: var(--text-secondary); line-height: 2;">
                        <li>Iterate row-major in C/Python</li>
                        <li>Process sequential elements</li>
                        <li>Avoid random access patterns</li>
                        <li>Use contiguous memory structures</li>
                    </ul>
                </div>

                <div class="card glass">
                    <h4 style="color: var(--meta-blue);">2. Space-Time Tradeoffs</h4>
                    <ul style="color: var(--text-secondary); line-height: 2;">
                        <li>Use hash maps to reduce time</li>
                        <li>Memoize repeated computations</li>
                        <li>Prefix sums for range queries</li>
                        <li>Trade O(n) space for O(1) lookups</li>
                    </ul>
                </div>

                <div class="card glass">
                    <h4 style="color: var(--code-string);">3. In-Place Operations</h4>
                    <ul style="color: var(--text-secondary); line-height: 2;">
                        <li>Modify array without extra space</li>
                        <li>Two pointers for swapping</li>
                        <li>Use array indices as markers</li>
                        <li>Save O(n) auxiliary space</li>
                    </ul>
                </div>

                <div class="card glass">
                    <h4 style="color: var(--redbull-red);">4. Early Termination</h4>
                    <ul style="color: var(--text-secondary); line-height: 2;">
                        <li>Break loops when answer found</li>
                        <li>Skip unnecessary iterations</li>
                        <li>Use boolean flags wisely</li>
                        <li>Best-case optimization</li>
                    </ul>
                </div>

                <div class="card glass">
                    <h4 style="color: var(--mclaren-orange);">5. Reduce Function Calls</h4>
                    <ul style="color: var(--text-secondary); line-height: 2;">
                        <li>Inline simple operations</li>
                        <li>Cache len(arr) outside loops</li>
                        <li>Avoid repeated calculations</li>
                        <li>Minimize overhead</li>
                    </ul>
                </div>

                <div class="card glass">
                    <h4 style="color: var(--meta-blue);">6. Bit Manipulation</h4>
                    <ul style="color: var(--text-secondary); line-height: 2;">
                        <li>XOR for finding unique elements</li>
                        <li>Bit masks for subsets</li>
                        <li>Fast parity checks</li>
                        <li>O(1) operations vs O(n)</li>
                    </ul>
                </div>
            </div>
        </section>

    </main>

    <script>
        // ==================== GLOBAL STATE ====================
        let basicArray = [];
        let currentIndex = 0;
        let assemblyStep = 0;
        let cacheStats = { l1: 0, l2: 0, l3: 0, ram: 0 };
        let cacheMemory = { l1: new Set(), l2: new Set(), l3: new Set() };

        // ==================== UTILITY FUNCTIONS ====================
        function toggleMobileMenu() {
            document.getElementById('navLinks').classList.toggle('active');
        }

        function copyCode(button) {
            const codeBlock = button.closest('.code-container').querySelector('code');
            const text = codeBlock.textContent;
            navigator.clipboard.writeText(text).then(() => {
                button.textContent = 'Copied!';
                button.style.background = 'var(--code-string)';
                setTimeout(() => {
                    button.textContent = 'Copy';
                    button.style.background = 'var(--mclaren-orange)';
                }, 2000);
            });
        }

        function toggleExpand(id) {
            const element = document.getElementById(id);
            element.classList.toggle('active');
        }

        // Progress Bar
        window.addEventListener('scroll', () => {
            const winScroll = document.body.scrollTop || document.documentElement.scrollTop;
            const height = document.documentElement.scrollHeight - document.documentElement.clientHeight;
            const scrolled = (winScroll / height) * 100;
            document.getElementById('progressBar').style.width = scrolled + '%';
        });

        // ==================== BASIC ARRAY DEMO ====================
        function createBasicArray() {
            basicArray = [10, 20, 30, 40, 50];
            const container = document.getElementById('basicArrayVis');
            const output = document.getElementById('basicArrayOutput');
            
            container.innerHTML = '';
            basicArray.forEach((val, idx) => {
                const cell = document.createElement('div');
                cell.className = 'array-cell';
                cell.id = `basic-cell-${idx}`;
                cell.innerHTML = `<div class="value">${val}</div><div class="index">[${idx}]</div>`;
                cell.style.animation = `fadeInUp 0.5s ease ${idx * 0.1}s both`;
                container.appendChild(cell);
            });

            output.innerHTML = `
                <div class="output-line">
                    <span class="output-prompt">$</span>
                    <span class="output-success">Array created successfully!</span>
                </div>
                <div class="output-line">
                    <span class="output-info">Base Address: 0x7f8a2c001000</span>
                </div>
                <div class="output-line">
                    <span class="output-info">Element Size: 8 bytes</span>
                </div>
                <div class="output-line">
                    <span class="output-info">Total Memory: 40 bytes (5 × 8)</span>
                </div>
            `;
        }

        function accessArrayElement() {
            if (basicArray.length === 0) {
                createBasicArray();
            }

            const index = Math.floor(Math.random() * basicArray.length);
            const baseAddr = 0x7f8a2c001000;
            const offset = index * 8;
            const finalAddr = baseAddr + offset;

            // Highlight the cell
            document.querySelectorAll('.array-cell').forEach(cell => {
                cell.classList.remove('active', 'highlighted');
            });
            document.getElementById(`basic-cell-${index}`).classList.add('active');

            const output = document.getElementById('basicArrayOutput');
            output.innerHTML = `
                <div class="output-line">
                    <span class="output-prompt">$</span>
                    <span class="output-success">Accessing arr[${index}]</span>
                </div>
                <div class="output-line">
                    <span class="output-info">1. Base Address: 0x${baseAddr.toString(16)}</span>
                </div>
                <div class="output-line">
                    <span class="output-info">2. Calculate Offset: ${index} × 8 = ${offset} bytes</span>
                </div>
                <div class="output-line">
                    <span class="output-info">3. Final Address: 0x${finalAddr.toString(16)}</span>
                </div>
                <div class="output-line">
                    <span class="output-success">4. Value Retrieved: ${basicArray[index]}</span>
                </div>
                <div class="output-line">
                    <span class="output-prompt"></span>
                    <span style="color: var(--mclaren-orange);">Total Time: ~5 CPU cycles (O(1))</span>
                </div>
            `;
        }

        function showMemoryLayout() {
            if (basicArray.length === 0) {
                createBasicArray();
            }

            const baseAddr = 0x7f8a2c001000;
            const output = document.getElementById('basicArrayOutput');
            
            let memoryLayout = `
                <div class="output-line">
                    <span class="output-prompt">$</span>
                    <span class="output-success">Complete Memory Layout</span>
                </div>
            `;

            basicArray.forEach((val, idx) => {
                const addr = baseAddr + (idx * 8);
                memoryLayout += `
                    <div class="output-line">
                        <span style="color: var(--mclaren-orange);">0x${addr.toString(16)}</span>:
                        <span class="output-info">${val.toString().padStart(10)}</span>
                        <span class="output-prompt">arr[${idx}]</span>
                        <span class="comment">base + ${idx * 8}</span>
                    </div>
                `;
            });

            output.innerHTML = memoryLayout;

            // Highlight all cells
            document.querySelectorAll('.array-cell').forEach((cell, idx) => {
                setTimeout(() => {
                    cell.classList.add('highlighted');
                }, idx * 100);
            });
        }

        // ==================== CPU ACCESS DEMO ====================
        let cpuArray = [];
        let cpuStepIndex = 0;

        function initCPUDemo() {
            cpuArray = [15, 25, 35, 45, 55, 65, 75, 85];
            cpuStepIndex = 0;
            
            const container = document.getElementById('cpuArrayVis');
            container.innerHTML = '';
            
            cpuArray.forEach((val, idx) => {
                const cell = document.createElement('div');
                cell.className = 'array-cell';
                cell.id = `cpu-cell-${idx}`;
                cell.innerHTML = `<div class="value">${val}</div><div class="index">[${idx}]</div>`;
                container.appendChild(cell);
            });

            document.getElementById('cpuOutput').innerHTML = `
                <div class="output-line">
                    <span class="output-prompt">CPU$</span>
                    <span class="output-success">CPU initialized. Click "Step Through" to see each instruction.</span>
                </div>
            `;
        }

        function stepCPUAccess() {
            if (cpuArray.length === 0) {
                initCPUDemo();
                return;
            }

            const targetIndex = 3; // Access arr[3]
            const baseAddr = 0x7f8a2c001000;

            const steps = [
                { 
                    instruction: 'MOV R1, [arr]',
                    description: 'Load base address into register R1',
                    r1: '0x7f8a2c001000',
                    r2: '0x00000000',
                    r3: '0x00000000',
                    cycles: 1
                },
                {
                    instruction: 'MOV R2, 3',
                    description: 'Load index 3 into register R2',
                    r1: '0x7f8a2c001000',
                    r2: '0x00000003',
                    r3: '0x00000000',
                    cycles: 1
                },
                {
                    instruction: 'IMUL R2, R2, 8',
                    description: 'Multiply index by element size (3 × 8 = 24)',
                    r1: '0x7f8a2c001000',
                    r2: '0x00000018',
                    r3: '0x00000000',
                    cycles: 2
                },
                {
                    instruction: 'ADD R1, R1, R2',
                    description: 'Calculate final address: base + offset',
                    r1: '0x7f8a2c001018',
                    r2: '0x00000018',
                    r3: '0x00000000',
                    cycles: 1
                },
                {
                    instruction: 'MOV R3, [R1]',
                    description: 'Load value from calculated address',
                    r1: '0x7f8a2c001018',
                    r2: '0x00000018',
                    r3: `0x${cpuArray[targetIndex].toString(16).padStart(8, '0').toUpperCase()}`,
                    cycles: 4,
                    highlight: true
                }
            ];

            if (cpuStepIndex < steps.length) {
                const step = steps[cpuStepIndex];
                
                // Update registers display (create if first time)
                const regDisplay = document.createElement('div');
                regDisplay.innerHTML = `
                    <div class="output-line">
                        <span class="output-prompt">Step ${cpuStepIndex + 1}:</span>
                        <span style="color: var(--mclaren-orange); font-weight: 700;">${step.instruction}</span>
                    </div>
                    <div class="output-line">
                        <span class="comment">${step.description}</span>
                    </div>
                    <div class="output-line">
                        <span class="output-info">R1 = ${step.r1}</span>
                        <span class="output-info" style="margin-left: 2rem;">R2 = ${step.r2}</span>
                        <span class="output-info" style="margin-left: 2rem;">R3 = ${step.r3}</span>
                    </div>
                    <div class="output-line">
                        <span style="color: var(--meta-blue);">Cycles: ${step.cycles}</span>
                    </div>
                    <div class="output-line">
                        <span class="comment">──────────────────────────────────────</span>
                    </div>
                `;

                const output = document.getElementById('cpuOutput');
                if (cpuStepIndex === 0) {
                    output.innerHTML = '';
                }
                output.appendChild(regDisplay);

                // Highlight target cell on final step
                if (step.highlight) {
                    document.getElementById(`cpu-cell-${targetIndex}`).classList.add('active');
                    
                    setTimeout(() => {
                        output.innerHTML += `
                            <div class="output-line">
                                <span class="output-success">✓ Value Retrieved: ${cpuArray[targetIndex]}</span>
                            </div>
                            <div class="output-line">
                                <span class="output-prompt"></span>
                                <span style="color: var(--mclaren-orange); font-weight: 700;">Total: 9 cycles (still O(1)!)</span>
                            </div>
                        `;
                    }, 500);
                }

                output.scrollTop = output.scrollHeight;
                cpuStepIndex++;
            } else {
                document.getElementById('cpuOutput').innerHTML += `
                    <div class="output-line">
                        <span class="output-info">Demonstration complete. Click "Initialize" to restart.</span>
                    </div>
                `;
            }
        }

        function resetCPUDemo() {
            cpuStepIndex = 0;
            document.querySelectorAll('#cpuArrayVis .array-cell').forEach(cell => {
                cell.classList.remove('active', 'highlighted');
            });
            document.getElementById('cpuOutput').innerHTML = `
                <div class="output-line">
                    <span class="output-prompt">CPU$</span>
                    <span>Click "Initialize" to start...</span>
                </div>
            `;
        }

        // ==================== ASSEMBLY DEMO ====================
        function startAssemblyDemo() {
            assemblyStep = 0;
            document.getElementById('r1Val').textContent = '0x00000000';
            document.getElementById('r2Val').textContent = '0x00000000';
            document.getElementById('r3Val').textContent = '0x00000000';
            document.getElementById('assemblyTrace').innerHTML = `
                <div class="output-line">
                    <span class="output-prompt">$</span>
                    <span class="output-success">Assembly simulator ready. Click "Next Instruction".</span>
                </div>
            `;
        }

        function stepAssembly() {
            const steps = [
                { r1: '0x7F8A2C00', r2: '0x00000000', r3: '0x00000000', msg: 'MOV R1, [arr] - Load base address', color: 'output-info' },
                { r1: '0x7F8A2C00', r2: '0x00000003', r3: '0x00000000', msg: 'MOV R2, 3 - Load index', color: 'output-info' },
                { r1: '0x7F8A2C00', r2: '0x00000018', r3: '0x00000000', msg: 'IMUL R2, R2, 8 - Multiply by size (24 decimal)', color: 'output-info' },
                { r1: '0x7F8A2C18', r2: '0x00000018', r3: '0x00000000', msg: 'ADD R1, R1, R2 - Calculate address', color: 'output-info' },
                { r1: '0x7F8A2C18', r2: '0x00000018', r3: '0x00000028', msg: 'MOV R3, [R1] - Fetch value (40 decimal)', color: 'output-success' }
            ];

            if (assemblyStep < steps.length) {
                const step = steps[assemblyStep];
                document.getElementById('r1Val').textContent = step.r1;
                document.getElementById('r2Val').textContent = step.r2;
                document.getElementById('r3Val').textContent = step.r3;
                
                const trace = document.getElementById('assemblyTrace');
                const line = document.createElement('div');
                line.className = 'output-line';
                line.innerHTML = `
                    <span class="output-prompt">${assemblyStep + 1}.</span>
                    <span class="${step.color}">${step.msg}</span>
                `;
                trace.appendChild(line);
                trace.scrollTop = trace.scrollHeight;
                
                assemblyStep++;
                
                if (assemblyStep === steps.length) {
                    setTimeout(() => {
                        const finalLine = document.createElement('div');
                        finalLine.className = 'output-line';
                        finalLine.innerHTML = `
                            <span class="output-prompt"></span>
                            <span style="color: var(--mclaren-orange); font-weight: 700;">Complete! 5 instructions = O(1) time</span>
                        `;
                        trace.appendChild(finalLine);
                        trace.scrollTop = trace.scrollHeight;
                    }, 300);
                }
            }
        }

        function resetAssemblyDemo() {
            startAssemblyDemo();
        }

        // ==================== CACHE HIERARCHY DEMO ====================
        function initCacheDemo() {
            cacheStats = { l1: 0, l2: 0, l3: 0, ram: 0 };
            cacheMemory = { 
                l1: new Set(), 
                l2: new Set(), 
                l3: new Set() 
            };
            updateCacheDisplay();
            document.getElementById('cacheOutput').innerHTML = `
                <div class="output-line">
                    <span class="output-prompt">Cache$</span>
                    <span class="output-success">Cache hierarchy initialized. Click "Access Random Element" to simulate memory access.</span>
                </div>
            `;
        }

        function accessCache() {
            const address = Math.floor(Math.random() * 100);
            let hitLevel = '';
            let cycles = 0;
            
            if (cacheMemory.l1.has(address)) {
                hitLevel = 'L1 Cache';
                cycles = 4;
                cacheStats.l1++;
            } else if (cacheMemory.l2.has(address)) {
                hitLevel = 'L2 Cache';
                cycles = 12;
                cacheStats.l2++;
                // Promote to L1
                if (cacheMemory.l1.size >= 10) {
                    const first = cacheMemory.l1.values().next().value;
                    cacheMemory.l1.delete(first);
                }
                cacheMemory.l1.add(address);
            } else if (cacheMemory.l3.has(address)) {
                hitLevel = 'L3 Cache';
                cycles = 40;
                cacheStats.l3++;
                // Promote to L2 and L1
                if (cacheMemory.l2.size >= 20) {
                    const first = cacheMemory.l2.values().next().value;
                    cacheMemory.l2.delete(first);
                }
                cacheMemory.l2.add(address);
                if (cacheMemory.l1.size >= 10) {
                    const first = cacheMemory.l1.values().next().value;
                    cacheMemory.l1.delete(first);
                }
                cacheMemory.l1.add(address);
            } else {
                hitLevel = 'RAM';
                cycles = 200;
                cacheStats.ram++;
                // Load into all cache levels
                cacheMemory.l3.add(address);
                if (cacheMemory.l2.size >= 20) {
                    const first = cacheMemory.l2.values().next().value;
                    cacheMemory.l2.delete(first);
                }
                cacheMemory.l2.add(address);
                if (cacheMemory.l1.size >= 10) {
                    const first = cacheMemory.l1.values().next().value;
                    cacheMemory.l1.delete(first);
                }
                cacheMemory.l1.add(address);
            }

            updateCacheDisplay();
            
            const output = document.getElementById('cacheOutput');
            const colorMap = {
                'L1 Cache': 'mclaren-orange',
                'L2 Cache': 'meta-blue',
                'L3 Cache': 'code-string',
                'RAM': 'redbull-red'
            };
            
            const line = document.createElement('div');
            line.className = 'output-line';
            line.innerHTML = `
                <span class="output-prompt">→</span>
                <span>Address 0x${address.toString(16).padStart(4, '0').toUpperCase()}</span>
                <span style="color: var(--${colorMap[hitLevel]}); font-weight: 700; margin-left: 1rem;">${hitLevel}</span>
                <span style="color: var(--text-muted); margin-left: 1rem;">(${cycles} cycles)</span>
            `;
            output.appendChild(line);
            output.scrollTop = output.scrollHeight;
            
            // Keep only last 10 lines
            while (output.children.length > 10) {
                output.removeChild(output.firstChild);
            }
        }

        function updateCacheDisplay() {
            document.getElementById('l1Hits').textContent = cacheStats.l1;
            document.getElementById('l2Hits').textContent = cacheStats.l2;
            document.getElementById('l3Hits').textContent = cacheStats.l3;
            document.getElementById('ramHits').textContent = cacheStats.ram;
        }

        function clearCache() {
            initCacheDemo();
        }

        // ==================== SCROLL ANIMATIONS ====================
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -100px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                    entry.target.classList.add('in-view');
                } else {
                    entry.target.classList.remove('in-view');
                }
            });
        }, observerOptions);


        // Hamburger Menu Toggle
        const hamburgerMenu = document.getElementById('hamburgerMenu');
        const navElement = document.getElementById('navLinks') || document.getElementById('navActions');
        
        if (hamburgerMenu && navElement) {
            hamburgerMenu.addEventListener('click', function() {
                hamburgerMenu.classList.toggle('active');
                navElement.classList.toggle('active');
            });
            
            // Close menu when clicking on a nav link (mobile)
            if (document.getElementById('navLinks')) {
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.addEventListener('click', function() {
                        if (window.innerWidth <= 768) {
                            hamburgerMenu.classList.remove('active');
                            navElement.classList.remove('active');
                        }
                    });
                });
            }
            
            // Close menu when clicking outside
            document.addEventListener('click', function(event) {
                if (window.innerWidth <= 768) {
                    if (!hamburgerMenu.contains(event.target) && !navElement.contains(event.target)) {
                        hamburgerMenu.classList.remove('active');
                        navElement.classList.remove('active');
                    }
                }
            });
        }


                document.addEventListener('DOMContentLoaded', () => {
            // Observe fade-in elements
            document.querySelectorAll('.fade-in').forEach(el => {
                observer.observe(el);
            });

            // Observe elements with borders for color animation
            const borderElements = document.querySelectorAll(
                '.glass, .card, .code-container, .demo-container, .visualization, ' +
                '.callout, .kanban-column, .comparison-table, .expandable, .step, .output-terminal, .array-cell'
            );
            borderElements.forEach(el => {
                observer.observe(el);
            });
        });

        // ==================== 2D ARRAY DEMOS ====================
        let matrix2D = [];
        let matrix1D = [];

        function create2DArray() {
            const rows = 4, cols = 4;
            matrix2D = [];
            matrix1D = [];
            
            // Create logical 2D array
            for (let i = 0; i < rows; i++) {
                matrix2D[i] = [];
                for (let j = 0; j < cols; j++) {
                    const val = i * cols + j + 1;
                    matrix2D[i][j] = val;
                    matrix1D.push(val);
                }
            }

            // Visualize 2D view
            const view2D = document.getElementById('matrix2DView');
            view2D.innerHTML = '';
            for (let i = 0; i < rows; i++) {
                for (let j = 0; j < cols; j++) {
                    const cell = document.createElement('div');
                    cell.className = 'array-cell';
                    cell.id = `matrix-2d-${i}-${j}`;
                    cell.style.minWidth = '60px';
                    cell.style.height = '60px';
                    cell.innerHTML = `<div class="value">${matrix2D[i][j]}</div><div class="index">[${i}][${j}]</div>`;
                    view2D.appendChild(cell);
                }
            }

            // Visualize 1D memory layout
            const view1D = document.getElementById('matrix1DView');
            view1D.innerHTML = '';
            matrix1D.forEach((val, idx) => {
                const cell = document.createElement('div');
                cell.className = 'array-cell';
                cell.id = `matrix-1d-${idx}`;
                cell.style.minWidth = '50px';
                cell.style.height = '50px';
                cell.innerHTML = `<div class="value" style="font-size: 1rem;">${val}</div>`;
                view1D.appendChild(cell);
            });

            document.getElementById('matrix2DOutput').innerHTML = `
                <div class="output-line">
                    <span class="output-prompt">$</span>
                    <span class="output-success">4×4 Matrix created!</span>
                </div>
                <div class="output-line">
                    <span class="output-info">Logical: 4 rows × 4 columns</span>
                </div>
                <div class="output-line">
                    <span class="output-info">Physical: 16 contiguous elements in memory</span>
                </div>
            `;
        }

        async function traverseRowMajor() {
            if (matrix2D.length === 0) create2DArray();
            
            const output = document.getElementById('matrix2DOutput');
            output.innerHTML = '<div class="output-line"><span class="output-prompt">$</span><span class="output-info">Row-Major Traversal (Cache-Friendly)...</span></div>';
            
            for (let i = 0; i < matrix2D.length; i++) {
                for (let j = 0; j < matrix2D[i].length; j++) {
                    const idx1D = i * matrix2D[i].length + j;
                    
                    // Highlight
                    document.getElementById(`matrix-2d-${i}-${j}`).classList.add('active');
                    document.getElementById(`matrix-1d-${idx1D}`).classList.add('active');
                    
                    output.innerHTML += `<div class="output-line"><span class="output-success">→ [${i}][${j}] = ${matrix2D[i][j]} (memory index: ${idx1D})</span></div>`;
                    output.scrollTop = output.scrollHeight;
                    
                    await new Promise(resolve => setTimeout(resolve, 150));
                    
                    document.getElementById(`matrix-2d-${i}-${j}`).classList.remove('active');
                    document.getElementById(`matrix-1d-${idx1D}`).classList.remove('active');
                    document.getElementById(`matrix-2d-${i}-${j}`).classList.add('highlighted');
                    document.getElementById(`matrix-1d-${idx1D}`).classList.add('highlighted');
                }
            }
            
            output.innerHTML += '<div class="output-line"><span class="output-prompt">✓</span><span class="output-success">Sequential memory access = Fast!</span></div>';
        }

        async function traverseColMajor() {
            if (matrix2D.length === 0) create2DArray();
            
            const output = document.getElementById('matrix2DOutput');
            output.innerHTML = '<div class="output-line"><span class="output-prompt">$</span><span class="output-error">Column-Major Traversal (Cache-Hostile)...</span></div>';
            
            for (let j = 0; j < matrix2D[0].length; j++) {
                for (let i = 0; i < matrix2D.length; i++) {
                    const idx1D = i * matrix2D[i].length + j;
                    
                    document.getElementById(`matrix-2d-${i}-${j}`).classList.add('active');
                    document.getElementById(`matrix-1d-${idx1D}`).classList.add('active');
                    
                    output.innerHTML += `<div class="output-line"><span class="output-error">→ [${i}][${j}] = ${matrix2D[i][j]} (memory index: ${idx1D}) - JUMP!</span></div>`;
                    output.scrollTop = output.scrollHeight;
                    
                    await new Promise(resolve => setTimeout(resolve, 150));
                    
                    document.getElementById(`matrix-2d-${i}-${j}`).classList.remove('active');
                    document.getElementById(`matrix-1d-${idx1D}`).classList.remove('active');
                    document.getElementById(`matrix-2d-${i}-${j}`).classList.add('highlighted');
                    document.getElementById(`matrix-1d-${idx1D}`).classList.add('highlighted');
                }
            }
            
            output.innerHTML += '<div class="output-line"><span class="output-prompt">✗</span><span class="output-error">Non-sequential access = Slow!</span></div>';
        }

        // ==================== CACHE ACCESS DEMOS ====================
        async function runSequentialAccess() {
            const size = 32;
            const container = document.getElementById('cacheAccessVis');
            const output = document.getElementById('cacheAccessOutput');
            
            container.innerHTML = '';
            for (let i = 0; i < size; i++) {
                const cell = document.createElement('div');
                cell.className = 'array-cell';
                cell.id = `cache-cell-${i}`;
                cell.style.minWidth = '40px';
                cell.style.height = '40px';
                cell.innerHTML = `<div class="value" style="font-size: 0.9rem;">${i}</div>`;
                container.appendChild(cell);
            }
            
            output.innerHTML = '<div class="output-line"><span class="output-prompt">$</span><span class="output-info">Sequential Access Pattern...</span></div>';
            
            const startTime = performance.now();
            let cacheHits = 0;
            
            for (let i = 0; i < size; i++) {
                document.getElementById(`cache-cell-${i}`).classList.add('active');
                if (i % 8 === 0) {
                    output.innerHTML += `<div class="output-line"><span class="output-error">→ Cache Miss at index ${i} (load cache line)</span></div>`;
                } else {
                    output.innerHTML += `<div class="output-line"><span class="output-success">→ Cache Hit at index ${i}</span></div>`;
                    cacheHits++;
                }
                output.scrollTop = output.scrollHeight;
                await new Promise(resolve => setTimeout(resolve, 50));
                document.getElementById(`cache-cell-${i}`).classList.remove('active');
                document.getElementById(`cache-cell-${i}`).classList.add('highlighted');
            }
            
            const endTime = performance.now();
            const hitRate = ((cacheHits / size) * 100).toFixed(1);
            
            document.getElementById('seqTime').textContent = `${(endTime - startTime).toFixed(2)}ms`;
            document.getElementById('seqHitRate').textContent = `${hitRate}%`;
            
            output.innerHTML += `<div class="output-line"><span class="output-prompt">✓</span><span class="output-success">Sequential: ${hitRate}% cache hits!</span></div>`;
        }

        async function runRandomAccess() {
            const size = 32;
            const container = document.getElementById('cacheAccessVis');
            const output = document.getElementById('cacheAccessOutput');
            
            container.innerHTML = '';
            for (let i = 0; i < size; i++) {
                const cell = document.createElement('div');
                cell.className = 'array-cell';
                cell.id = `cache-cell-${i}`;
                cell.style.minWidth = '40px';
                cell.style.height = '40px';
                cell.innerHTML = `<div class="value" style="font-size: 0.9rem;">${i}</div>`;
                container.appendChild(cell);
            }
            
            output.innerHTML = '<div class="output-line"><span class="output-prompt">$</span><span class="output-info">Random Access Pattern...</span></div>';
            
            const startTime = performance.now();
            let cacheHits = 0;
            const loadedLines = new Set();
            
            for (let i = 0; i < size; i++) {
                const idx = Math.floor(Math.random() * size);
                const cacheLine = Math.floor(idx / 8);
                
                document.getElementById(`cache-cell-${idx}`).classList.add('active');
                
                if (loadedLines.has(cacheLine)) {
                    output.innerHTML += `<div class="output-line"><span class="output-success">→ Cache Hit at index ${idx}</span></div>`;
                    cacheHits++;
                } else {
                    output.innerHTML += `<div class="output-line"><span class="output-error">→ Cache Miss at index ${idx}</span></div>`;
                    loadedLines.add(cacheLine);
                }
                
                output.scrollTop = output.scrollHeight;
                await new Promise(resolve => setTimeout(resolve, 50));
                document.getElementById(`cache-cell-${idx}`).classList.remove('active');
                document.getElementById(`cache-cell-${idx}`).classList.add('highlighted');
            }
            
            const endTime = performance.now();
            const hitRate = ((cacheHits / size) * 100).toFixed(1);
            
            document.getElementById('randTime').textContent = `${(endTime - startTime).toFixed(2)}ms`;
            document.getElementById('randHitRate').textContent = `${hitRate}%`;
            
            output.innerHTML += `<div class="output-line"><span class="output-prompt">✗</span><span class="output-error">Random: Only ${hitRate}% cache hits</span></div>`;
        }

        async function compareAccess() {
            await runSequentialAccess();
            await new Promise(resolve => setTimeout(resolve, 1000));
            await runRandomAccess();
            
            const seqTime = parseFloat(document.getElementById('seqTime').textContent);
            const randTime = parseFloat(document.getElementById('randTime').textContent);
            const speedup = (randTime / seqTime).toFixed(2);
            
            document.getElementById('speedup').textContent = `${speedup}x faster`;
        }

        // ==================== ROW/COLUMN TRAVERSAL BENCHMARK ====================
        function benchmarkRowMajor() {
            const canvas = document.getElementById('traversalCanvas');
            const ctx = canvas.getContext('2d');
            const output = document.getElementById('traversalOutput');
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            const size = 20;
            const cellSize = Math.min(canvas.width, canvas.height) / size;
            
            output.innerHTML = '<div class="output-line"><span class="output-prompt">$</span><span class="output-info">Benchmarking Row-Major traversal...</span></div>';
            
            let idx = 0;
            const interval = setInterval(() => {
                if (idx >= size * size) {
                    clearInterval(interval);
                    output.innerHTML += '<div class="output-line"><span class="output-success">✓ Row-Major complete: Fast sequential access!</span></div>';
                    return;
                }
                
                const row = Math.floor(idx / size);
                const col = idx % size;
                
                ctx.fillStyle = '#FF8000';
                ctx.fillRect(col * cellSize, row * cellSize, cellSize - 2, cellSize - 2);
                
                idx++;
            }, 20);
        }

        function benchmarkColMajor() {
            const canvas = document.getElementById('traversalCanvas');
            const ctx = canvas.getContext('2d');
            const output = document.getElementById('traversalOutput');
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            const size = 20;
            const cellSize = Math.min(canvas.width, canvas.height) / size;
            
            output.innerHTML = '<div class="output-line"><span class="output-prompt">$</span><span class="output-error">Benchmarking Column-Major traversal...</span></div>';
            
            let idx = 0;
            const interval = setInterval(() => {
                if (idx >= size * size) {
                    clearInterval(interval);
                    output.innerHTML += '<div class="output-line"><span class="output-error">✗ Column-Major complete: Slow jumping access!</span></div>';
                    return;
                }
                
                const col = Math.floor(idx / size);
                const row = idx % size;
                
                ctx.fillStyle = '#DC0000';
                ctx.fillRect(col * cellSize, row * cellSize, cellSize - 2, cellSize - 2);
                
                idx++;
            }, 20);
        }

        function benchmarkBoth() {
            benchmarkRowMajor();
            setTimeout(() => {
                document.getElementById('traversalOutput').innerHTML += '<div class="output-line"><span class="output-prompt">---</span><span>Waiting 2 seconds...</span></div>';
            }, 500);
            setTimeout(benchmarkColMajor, 2500);
        }

        // ==================== RESIZE DEMO ====================
        let resizeArray = [];
        let resizeCapacity = 0;
        let resizeSize = 0;
        let resizeCount = 0;

        function initResizeDemo() {
            resizeArray = [];
            resizeCapacity = 2;
            resizeSize = 0;
            resizeCount = 0;
            
            updateResizeDisplay();
            
            document.getElementById('resizeOutput').innerHTML = `
                <div class="output-line">
                    <span class="output-prompt">$</span>
                    <span class="output-success">Dynamic array initialized with capacity 2</span>
                </div>
            `;
        }

        function insertResize() {
            if (resizeCapacity === 0) {
                initResizeDemo();
            }
            
            const newValue = resizeSize + 1;
            
            // Check if resize needed
            if (resizeSize >= resizeCapacity) {
                const oldCapacity = resizeCapacity;
                resizeCapacity *= 2;
                resizeCount++;
                
                document.getElementById('resizeOutput').innerHTML += `
                    <div class="output-line">
                        <span class="output-error">Capacity full! Resizing from ${oldCapacity} to ${resizeCapacity}...</span>
                    </div>
                    <div class="output-line">
                        <span class="output-info">→ Allocating new memory...</span>
                    </div>
                    <div class="output-line">
                        <span class="output-info">→ Copying ${resizeSize} elements...</span>
                    </div>
                    <div class="output-line">
                        <span class="output-info">→ Freeing old memory...</span>
                    </div>
                `;
            }
            
            resizeArray.push(newValue);
            resizeSize++;
            
            document.getElementById('resizeOutput').innerHTML += `
                <div class="output-line">
                    <span class="output-success">✓ Inserted ${newValue} at index ${resizeSize - 1}</span>
                </div>
            `;
            
            const output = document.getElementById('resizeOutput');
            output.scrollTop = output.scrollHeight;
            
            updateResizeDisplay();
        }

        function updateResizeDisplay() {
            document.getElementById('resizeCapacity').textContent = resizeCapacity;
            document.getElementById('resizeSize').textContent = resizeSize;
            document.getElementById('resizeCount').textContent = resizeCount;
            
            const container = document.getElementById('resizeArrayVis');
            container.innerHTML = '';
            
            for (let i = 0; i < resizeCapacity; i++) {
                const cell = document.createElement('div');
                cell.className = 'array-cell';
                cell.style.minWidth = '50px';
                cell.style.height = '50px';
                
                if (i < resizeSize) {
                    cell.innerHTML = `<div class="value">${resizeArray[i]}</div><div class="index">[${i}]</div>`;
                    cell.classList.add('highlighted');
                } else {
                    cell.innerHTML = `<div class="value" style="color: var(--text-dim);">-</div><div class="index">[${i}]</div>`;
                    cell.style.opacity = '0.3';
                }
                
                container.appendChild(cell);
            }
        }

        function resetResizeDemo() {
            initResizeDemo();
        }

        // ==================== TWO POINTERS DEMO ====================
        let twoPointersArray = [];
        let twoPointersLeft = 0;
        let twoPointersRight = 0;
        let targetSum = 9;

        function initTwoPointers() {
            twoPointersArray = [1, 2, 3, 4, 5, 6, 7, 8];
            twoPointersLeft = 0;
            twoPointersRight = twoPointersArray.length - 1;
            targetSum = 9;
            
            document.getElementById('targetSum').textContent = targetSum;
            document.getElementById('currentSum').textContent = '-';
            
            const container = document.getElementById('twoPointersVis');
            container.innerHTML = '';
            
            twoPointersArray.forEach((val, idx) => {
                const cell = document.createElement('div');
                cell.className = 'array-cell';
                cell.id = `tp-cell-${idx}`;
                cell.style.minWidth = '70px';
                cell.style.height = '70px';
                cell.innerHTML = `<div class="value">${val}</div><div class="index">[${idx}]</div>`;
                container.appendChild(cell);
            });
            
            document.getElementById(`tp-cell-${twoPointersLeft}`).style.borderColor = 'var(--mclaren-orange)';
            document.getElementById(`tp-cell-${twoPointersLeft}`).style.borderWidth = '3px';
            document.getElementById(`tp-cell-${twoPointersRight}`).style.borderColor = 'var(--meta-blue)';
            document.getElementById(`tp-cell-${twoPointersRight}`).style.borderWidth = '3px';
            
            document.getElementById('twoPointersOutput').innerHTML = `
                <div class="output-line">
                    <span class="output-prompt">$</span>
                    <span class="output-success">Two Pointers initialized</span>
                </div>
                <div class="output-line">
                    <span class="output-info">Orange border = LEFT pointer, Blue border = RIGHT pointer</span>
                </div>
                <div class="output-line">
                    <span class="output-info">Looking for two numbers that sum to ${targetSum}</span>
                </div>
            `;
        }

        function stepTwoPointers() {
            if (twoPointersArray.length === 0) {
                initTwoPointers();
            }
            
            if (twoPointersLeft >= twoPointersRight) {
                document.getElementById('twoPointersOutput').innerHTML += `
                    <div class="output-line">
                        <span class="output-error">✗ Pointers crossed - no solution found</span>
                    </div>
                `;
                return;
            }
            
            const currentSum = twoPointersArray[twoPointersLeft] + twoPointersArray[twoPointersRight];
            document.getElementById('currentSum').textContent = currentSum;
            
            const output = document.getElementById('twoPointersOutput');
            
            // Reset all cells
            twoPointersArray.forEach((_, idx) => {
                const cell = document.getElementById(`tp-cell-${idx}`);
                cell.classList.remove('active', 'highlighted');
                cell.style.borderWidth = '2px';
                cell.style.borderColor = 'var(--mclaren-orange)';
            });
            
            // Highlight current pointers
            document.getElementById(`tp-cell-${twoPointersLeft}`).classList.add('active');
            document.getElementById(`tp-cell-${twoPointersRight}`).classList.add('active');
            
            output.innerHTML += `
                <div class="output-line">
                    <span class="output-prompt">→</span>
                    <span>LEFT[${twoPointersLeft}]=${twoPointersArray[twoPointersLeft]} + RIGHT[${twoPointersRight}]=${twoPointersArray[twoPointersRight]} = ${currentSum}</span>
                </div>
            `;
            
            if (currentSum === targetSum) {
                document.getElementById(`tp-cell-${twoPointersLeft}`).classList.add('highlighted');
                document.getElementById(`tp-cell-${twoPointersRight}`).classList.add('highlighted');
                output.innerHTML += `
                    <div class="output-line">
                        <span class="output-success">✓ Found! Indices [${twoPointersLeft}, ${twoPointersRight}] sum to ${targetSum}</span>
                    </div>
                `;
            } else if (currentSum < targetSum) {
                output.innerHTML += `
                    <div class="output-line">
                        <span class="output-info">Sum too small → move LEFT pointer right</span>
                    </div>
                `;
                twoPointersLeft++;
            } else {
                output.innerHTML += `
                    <div class="output-line">
                        <span class="output-info">Sum too large → move RIGHT pointer left</span>
                    </div>
                `;
                twoPointersRight--;
            }
            
            output.scrollTop = output.scrollHeight;
        }

        function resetTwoPointers() {
            initTwoPointers();
        }

        // ==================== SLIDING WINDOW DEMO ====================
        let slidingWindowArray = [];
        let slidingWindowStart = 0;
        let windowK = 3;

        function initSlidingWindow() {
            slidingWindowArray = [2, 1, 5, 1, 3, 2, 4, 6, 2, 1];
            slidingWindowStart = 0;
            windowK = 3;
            
            document.getElementById('windowSize').textContent = windowK;
            document.getElementById('windowSum').textContent = '-';
            document.getElementById('maxWindowSum').textContent = '-';
            
            const container = document.getElementById('slidingWindowVis');
            container.innerHTML = '';
            
            slidingWindowArray.forEach((val, idx) => {
                const cell = document.createElement('div');
                cell.className = 'array-cell';
                cell.id = `sw-cell-${idx}`;
                cell.style.minWidth = '60px';
                cell.style.height = '60px';
                cell.innerHTML = `<div class="value">${val}</div><div class="index">[${idx}]</div>`;
                container.appendChild(cell);
            });
            
            // Highlight initial window
            for (let i = 0; i < windowK; i++) {
                document.getElementById(`sw-cell-${i}`).classList.add('highlighted');
            }
            
            const initialSum = slidingWindowArray.slice(0, windowK).reduce((a, b) => a + b, 0);
            document.getElementById('windowSum').textContent = initialSum;
            document.getElementById('maxWindowSum').textContent = initialSum;
            
            document.getElementById('slidingWindowOutput').innerHTML = `
                <div class="output-line">
                    <span class="output-prompt">$</span>
                    <span class="output-success">Sliding Window initialized</span>
                </div>
                <div class="output-line">
                    <span class="output-info">Window size K = ${windowK}</span>
                </div>
                <div class="output-line">
                    <span class="output-info">Initial window [0-${windowK-1}]: sum = ${initialSum}</span>
                </div>
            `;
        }

        function stepSlidingWindow() {
            if (slidingWindowArray.length === 0) {
                initSlidingWindow();
                return;
            }
            
            if (slidingWindowStart + windowK >= slidingWindowArray.length) {
                document.getElementById('slidingWindowOutput').innerHTML += `
                    <div class="output-line">
                        <span class="output-success">✓ Finished sliding through array!</span>
                    </div>
                `;
                return;
            }
            
            // Move window
            const removeIdx = slidingWindowStart;
            slidingWindowStart++;
            const addIdx = slidingWindowStart + windowK - 1;
            
            // Calculate new sum
            const oldSum = parseInt(document.getElementById('windowSum').textContent);
            const newSum = oldSum - slidingWindowArray[removeIdx] + slidingWindowArray[addIdx];
            const maxSum = Math.max(parseInt(document.getElementById('maxWindowSum').textContent), newSum);
            
            document.getElementById('windowSum').textContent = newSum;
            document.getElementById('maxWindowSum').textContent = maxSum;
            
            // Update visualization
            slidingWindowArray.forEach((_, idx) => {
                const cell = document.getElementById(`sw-cell-${idx}`);
                cell.classList.remove('active', 'highlighted');
            });
            
            for (let i = slidingWindowStart; i < slidingWindowStart + windowK; i++) {
                document.getElementById(`sw-cell-${i}`).classList.add('highlighted');
            }
            
            document.getElementById(`sw-cell-${addIdx}`).classList.add('active');
            
            const output = document.getElementById('slidingWindowOutput');
            output.innerHTML += `
                <div class="output-line">
                    <span class="output-prompt">→</span>
                    <span>Window [${slidingWindowStart}-${slidingWindowStart + windowK - 1}]</span>
                </div>
                <div class="output-line">
                    <span class="output-info">Remove ${slidingWindowArray[removeIdx]}, Add ${slidingWindowArray[addIdx]}</span>
                </div>
                <div class="output-line">
                    <span class="output-info">Sum: ${oldSum} - ${slidingWindowArray[removeIdx]} + ${slidingWindowArray[addIdx]} = ${newSum}</span>
                </div>
            `;
            
            output.scrollTop = output.scrollHeight;
        }

        function resetSlidingWindow() {
            initSlidingWindow();
        }

        // ==================== KADANE'S ALGORITHM DEMO ====================
        let kadaneArray = [];
        let kadaneIndex = 0;
        let kadaneCurrentMax = 0;
        let kadaneGlobalMax = 0;
        let kadaneBestStart = 0;
        let kadaneBestEnd = 0;

        function initKadane() {
            kadaneArray = [-2, 1, -3, 4, -1, 2, 1, -5, 4];
            kadaneIndex = 0;
            kadaneCurrentMax = kadaneArray[0];
            kadaneGlobalMax = kadaneArray[0];
            kadaneBestStart = 0;
            kadaneBestEnd = 0;
            
            document.getElementById('kadaneCurrent').textContent = kadaneCurrentMax;
            document.getElementById('kadaneGlobal').textContent = kadaneGlobalMax;
            document.getElementById('kadaneSubarray').textContent = `[${kadaneBestStart}:${kadaneBestEnd}]`;
            
            const container = document.getElementById('kadaneVis');
            container.innerHTML = '';
            
            kadaneArray.forEach((val, idx) => {
                const cell = document.createElement('div');
                cell.className = 'array-cell';
                cell.id = `kad-cell-${idx}`;
                cell.style.minWidth = '60px';
                cell.style.height = '60px';
                cell.innerHTML = `<div class="value">${val}</div><div class="index">[${idx}]</div>`;
                if (val < 0) {
                    cell.style.borderColor = 'var(--redbull-red)';
                }
                container.appendChild(cell);
            });
            
            document.getElementById(`kad-cell-0`).classList.add('active');
            
            document.getElementById('kadaneOutput').innerHTML = `
                <div class="output-line">
                    <span class="output-prompt">$</span>
                    <span class="output-success">Kadane's Algorithm initialized</span>
                </div>
                <div class="output-line">
                    <span class="output-info">Starting at index 0: current_max = ${kadaneCurrentMax}, global_max = ${kadaneGlobalMax}</span>
                </div>
            `;
        }

        function stepKadane() {
            if (kadaneArray.length === 0) {
                initKadane();
                return;
            }
            
            if (kadaneIndex >= kadaneArray.length - 1) {
                document.getElementById('kadaneOutput').innerHTML += `
                    <div class="output-line">
                        <span class="output-success">✓ Algorithm complete!</span>
                    </div>
                    <div class="output-line">
                        <span class="output-success">Maximum subarray sum: ${kadaneGlobalMax}</span>
                    </div>
                    <div class="output-line">
                        <span class="output-success">Best subarray: indices [${kadaneBestStart}:${kadaneBestEnd}]</span>
                    </div>
                `;
                return;
            }
            
            kadaneIndex++;
            const currentValue = kadaneArray[kadaneIndex];
            
            // Decision: extend or start new
            const extendSum = kadaneCurrentMax + currentValue;
            const startNew = currentValue;
            
            kadaneCurrentMax = Math.max(extendSum, startNew);
            
            // Update global max
            if (kadaneCurrentMax > kadaneGlobalMax) {
                kadaneGlobalMax = kadaneCurrentMax;
                kadaneBestEnd = kadaneIndex;
                // Find start of current best subarray
                let tempSum = 0;
                for (let i = kadaneIndex; i >= 0; i--) {
                    tempSum += kadaneArray[i];
                    if (tempSum === kadaneGlobalMax) {
                        kadaneBestStart = i;
                        break;
                    }
                }
            }
            
            document.getElementById('kadaneCurrent').textContent = kadaneCurrentMax;
            document.getElementById('kadaneGlobal').textContent = kadaneGlobalMax;
            document.getElementById('kadaneSubarray').textContent = `[${kadaneBestStart}:${kadaneBestEnd}]`;
            
            // Update visualization
            kadaneArray.forEach((_, idx) => {
                const cell = document.getElementById(`kad-cell-${idx}`);
                cell.classList.remove('active', 'highlighted');
            });
            
            document.getElementById(`kad-cell-${kadaneIndex}`).classList.add('active');
            
            for (let i = kadaneBestStart; i <= kadaneBestEnd; i++) {
                document.getElementById(`kad-cell-${i}`).classList.add('highlighted');
            }
            
            const output = document.getElementById('kadaneOutput');
            const decision = kadaneCurrentMax === startNew ? 'START NEW' : 'EXTEND';
            
            output.innerHTML += `
                <div class="output-line">
                    <span class="output-prompt">→</span>
                    <span>Index ${kadaneIndex}: value = ${currentValue}</span>
                </div>
                <div class="output-line">
                    <span class="output-info">max(${currentValue}, ${extendSum}) = ${kadaneCurrentMax} (${decision})</span>
                </div>
                <div class="output-line">
                    <span class="output-info">Global max: ${kadaneGlobalMax}</span>
                </div>
            `;
            
            output.scrollTop = output.scrollHeight;
        }

        function resetKadane() {
            initKadane();
        }

        // Auto-initialize first demo
        window.addEventListener('load', () => {
            createBasicArray();
        });
    </script>
</body>
</html>
